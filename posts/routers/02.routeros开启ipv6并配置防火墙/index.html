<!doctype html><html lang=zh><head><title>02.RouterOSå¼€å¯IPv6å¹¶é…ç½®é˜²ç«å¢™ &ndash; bash</title><meta name=description content="å€‹äººè‡ªç•™åœ°ï¼Œå¦‚æœèƒ½å¹«åˆ°ä½ ï¼Œæˆ‘ä¹Ÿæœƒå¾ˆé«˜èˆˆã€‚"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://hanigege.github.io/css/palettes/base16-dark.css><link rel=stylesheet href=https://hanigege.github.io/css/risotto.css><link rel=stylesheet href=https://hanigege.github.io/css/custom.css><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js></script><style>pre{position:relative;padding-top:40px!important;background-color:#1e1e1e!important;border:1px solid #333!important;border-radius:10px!important;box-shadow:0 4px 15px rgba(0,0,0,.4);overflow-x:auto!important;overflow-y:hidden!important;margin:1.5em 0}pre::-webkit-scrollbar{height:8px}pre::-webkit-scrollbar-thumb{background:#4a4a4a;border-radius:4px}pre::-webkit-scrollbar-track{background:0 0}code{font-family:jetbrains mono,fira code,Menlo,monospace!important;font-size:.92em!important;line-height:1.6!important;color:#d4d4d4!important;background:0 0!important;white-space:pre!important}.copy-code-button{position:absolute;top:10px;right:12px;padding:5px 12px;background:rgba(255,255,255,8%);color:#aaa;border:1px solid rgba(255,255,255,.15);border-radius:6px;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);cursor:pointer;font-size:11px;font-weight:500;z-index:100;transition:all .25s ease}.copy-code-button:hover{background:rgba(102,217,239,.2);color:#66d9ef;border-color:#66d9ef;transform:translateY(-1px)}.copy-code-button:active{transform:translateY(0)}p img{cursor:zoom-in;transition:opacity .3s;border-radius:4px;max-width:100%}p img:hover{opacity:.9}.medium-zoom-overlay{z-index:999998!important}.medium-zoom-image--opened{z-index:999999!important}</style><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(e=>{if(e.querySelector(".copy-code-button"))return;const t=document.createElement("button");t.className="copy-code-button",t.type="button",t.innerText="Copy",t.addEventListener("click",()=>{const n=e.querySelector("code"),s=n?n.innerText:e.innerText;navigator.clipboard.writeText(s).then(()=>{t.innerText="Copied!",t.style.background="rgba(166, 226, 46, 0.2)",t.style.color="#a6e22e",setTimeout(()=>{t.innerText="Copy",t.style.background="",t.style.color=""},2e3)})}),e.appendChild(t)});const e=document.querySelectorAll("p img");e.length>0&&mediumZoom(e,{margin:24,background:"#1e1e1ecf",scrollOffset:40})})</script></head><body><div class=page><header class=page__header><nav class="page__nav main-nav"><link rel=stylesheet href=/css/custom.css><ul><li class=nomarker><h1 class=page__logo><a href=https://hanigege.github.io/ class=page__logo-inner>bash</a></h1></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/freebsd/ title>FreeBSD</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/linux/ title>Linux</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/routers/ title>Routers</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/other/ title>Other</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/about/ title>About</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>02.RouterOSå¼€å¯IPv6å¹¶é…ç½®é˜²ç«å¢™</h1></header><div class=content__body><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>æœ¬æ–‡ä»‹ç» RouterOS å¦‚ä½•å¼€å¯ IPv6ã€‚ä»¥ <span style=font-weight:700>**NAT6**</span> æ¨¡å¼ä¸ºä¾‹ï¼ŒIPv6 å†…ç½‘ç½‘æ®µé»˜è®¤ä¸º
</span></span><span style=display:flex><span><span style=color:#e6db74>`dc00::/64`</span>ï¼ŒRouterOS <span style=color:#e6db74>`bridge1`</span> çš„ IPv6 å†…ç½‘åœ°å€ä¸º <span style=color:#e6db74>`dc00::1111/64`</span>ã€‚
</span></span><span style=display:flex><span> æ¡¥æ¥æ¥å£ <span style=color:#e6db74>`bridge1`</span>ã€æ‹¨å·æ¥å£ <span style=color:#e6db74>`pppoe-out1`</span> åç§°è‹¥ä¸åŒåˆ™è‡ªè¡Œæ›¿æ¢ã€‚
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span> ä½œè€…ï¼šTom
</span></span></code></pre></div><h2 id=1-å¼€å¯-ipv6-æ¨¡å—>1. å¼€å¯ IPv6 æ¨¡å—</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 settings set disable-ipv6=no
</span></span></code></pre></div><h2 id=2-è·å–-ipv6-å‰ç¼€-prefix>2. è·å– IPv6 å‰ç¼€ (Prefix)</h2><p>ä»è¿è¥å•†å¤„è·å– IPv6 PDï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 dhcp-client add interface=pppoe-out1 pool-name=dhcpv6-gua-pool1 pool-prefix-length=60 request=prefix
</span></span></code></pre></div><h2 id=3-æ·»åŠ å±€åŸŸç½‘-ula-åœ°å€æ± >3. æ·»åŠ å±€åŸŸç½‘ ULA åœ°å€æ± </h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 pool add name=dhcpv6-ula-pool1 prefix=dc00::/64 prefix-length=64
</span></span></code></pre></div><h2 id=4-é…ç½®æ¥å£åœ°å€>4. é…ç½®æ¥å£åœ°å€</h2><ul><li><strong>è®¡ç®— EUI-64 åœ°å€</strong>ï¼šå¯ä½¿ç”¨ <a href=https://eui64-calc.princelle.org/>EUI-64 è®¡ç®—å™¨</a>ï¼Œæˆ–ç›´æ¥ä½¿ç”¨ <code>::1</code>,æˆ–ä½¿ç”¨ä¸Šé¢è®¡ç®—å¾—åˆ°çš„åç¼€ï¼ˆä¾‹å¦‚::BF24:12FF:FEE1:E81Bï¼‰é…ç½®pppoe-out1çš„GUAåœ°å€</li><li><strong>é…ç½® PPPoE æ¥å£ GUA åœ°å€</strong>ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 address add address=::BF24:12FF:FEE1:E81B/64 from-pool=dhcpv6-gua-pool1 interface=pppoe-out1
</span></span></code></pre></div><ul><li><strong>é…ç½® Bridge æ¥å£ ULA åœ°å€ï¼Œé»˜è®¤dc00::1111ï¼ˆå¯è‡ªè¡Œä¿®æ”¹ï¼‰</strong>ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 address add address=dc00::1111/64 from-pool=dhcpv6-ula-pool1 interface=bridge1
</span></span></code></pre></div><h2 id=5-å¼€å¯-nat6-æºåœ°å€ä¼ªè£…>5. å¼€å¯ NAT6 (æºåœ°å€ä¼ªè£…)</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 firewall nat add action=masquerade chain=srcnat src-address=dc00::/64
</span></span></code></pre></div><h2 id=6-é…ç½®é‚»å±…å‘ç°-nd>6. é…ç½®é‚»å±…å‘ç° (ND)</h2><p>ç¦ç”¨é»˜è®¤ ND é…ç½®ï¼Œå¹¶æ–°å»ºé…ç½®ã€‚å»ºè®®ä¸å¹¿æ’­ IPv6 DNSã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 nd set [ find default=yes ] advertise-dns=no disabled=yes
</span></span><span style=display:flex><span>/ipv6 nd add advertise-dns=no advertise-mac-address=no interface=bridge1 managed-address-configuration=yes other-configuration=yes ra-interval=5m-15m
</span></span></code></pre></div><h2 id=7-ipv6-é˜²ç«å¢™è§„åˆ™>7. IPv6 é˜²ç«å¢™è§„åˆ™</h2><p>å› ä½¿ç”¨ NAT6ï¼Œè§„åˆ™é€»è¾‘ä¸ IPv4 ç±»ä¼¼ï¼Œæ²¡æœ‰PSDã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 firewall filter
</span></span><span style=display:flex><span>add action=accept chain=forward in-interface=bridge1
</span></span><span style=display:flex><span>add action=accept chain=input in-interface=bridge1
</span></span><span style=display:flex><span>add action=accept chain=forward connection-state=established,related,untracked
</span></span><span style=display:flex><span>add action=accept chain=input connection-state=established,related
</span></span><span style=display:flex><span>add action=drop chain=input connection-state=invalid in-interface=pppoe-out1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># å…è®¸å¿…è¦çš„ ICMPv6 åè®®
</span></span><span style=display:flex><span>add action=accept chain=input icmp-options=128:0-255 in-interface=pppoe-out1 protocol=icmpv6
</span></span><span style=display:flex><span>add action=accept chain=input comment=&#34;Allow Echo request (ping)&#34; icmp-options=128:0-255 protocol=icmpv6
</span></span><span style=display:flex><span>add action=accept chain=input comment=&#34;Allow Echo reply&#34; icmp-options=129:0-255 protocol=icmpv6
</span></span><span style=display:flex><span>add action=accept chain=input comment=&#34;Allow Router Solicitation&#34; icmp-options=133:0-255 protocol=icmpv6
</span></span><span style=display:flex><span>add action=accept chain=input comment=&#34;Allow Router Advertisement&#34; icmp-options=134:0-255 protocol=icmpv6
</span></span><span style=display:flex><span>add action=accept chain=input comment=&#34;Allow Neighbor Solicitation&#34; icmp-options=135:0-255 protocol=icmpv6
</span></span><span style=display:flex><span>add action=accept chain=input comment=&#34;Allow Neighbor Advertisement&#34; icmp-options=136:0-255 protocol=icmpv6
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># æ‹¦æˆªå…¶ä»–æ¥è‡ª WAN çš„å†…å®¹
</span></span><span style=display:flex><span>add action=drop chain=input comment=&#34;Drop other ICMPv6 from WAN&#34; in-interface=pppoe-out1 protocol=icmpv6
</span></span><span style=display:flex><span>add action=drop chain=input dst-port=53,8291 in-interface=pppoe-out1 protocol=tcp
</span></span><span style=display:flex><span>add action=drop chain=input dst-port=53,8291 in-interface=pppoe-out1 protocol=udp
</span></span></code></pre></div><h2 id=8-è°ƒæ•´-tcp-mss>8. è°ƒæ•´ TCP MSS</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 firewall mangle add action=change-mss chain=forward new-mss=clamp-to-pmtu protocol=tcp tcp-flags=syn
</span></span><span style=display:flex><span>/ipv6 firewall mangle add action=change-mss chain=output new-mss=clamp-to-pmtu protocol=tcp tcp-flags=syn
</span></span></code></pre></div><blockquote><p><strong>æç¤º</strong>ï¼šé…ç½®å®Œæˆåï¼Œè®¿é—® <code>http://[2402:4e00:1013:e500:0:9671:f018:4947]</code>ï¼ˆä»…æ˜¾ç¤º IP åœ°å€çš„æµ‹è¯•é¡µï¼‰éªŒè¯è¿é€šæ€§ã€‚</p></blockquote><div id=utterances-comments><script src=https://utteranc.es/client.js repo=hanigege/blog-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><span class=about__logo role=img>ğŸš</span>&nbsp;<h1 class=about__title>bash&amp;sh</h1><p class=about__description>å€‹äººè‡ªç•™åœ°ï¼Œå¦‚æœèƒ½å¹«åˆ°ä½ ï¼Œæˆ‘ä¹Ÿæœƒå¾ˆé«˜èˆˆã€‚</p></div><ul class=aside__social-links><li><a href=mailto:purodn@gmail.com rel=me aria-label=Email title=Email><i class="fa-solid fa-envelope" aria-hidden=true></i></a>&nbsp;</li></ul></div><hr><div class=aside__content><p>2026-02-27</p><hr>On this page:<nav id=TableOfContents><ol><li><a href=#1-å¼€å¯-ipv6-æ¨¡å—>1. å¼€å¯ IPv6 æ¨¡å—</a></li><li><a href=#2-è·å–-ipv6-å‰ç¼€-prefix>2. è·å– IPv6 å‰ç¼€ (Prefix)</a></li><li><a href=#3-æ·»åŠ å±€åŸŸç½‘-ula-åœ°å€æ± >3. æ·»åŠ å±€åŸŸç½‘ ULA åœ°å€æ± </a></li><li><a href=#4-é…ç½®æ¥å£åœ°å€>4. é…ç½®æ¥å£åœ°å€</a></li><li><a href=#5-å¼€å¯-nat6-æºåœ°å€ä¼ªè£…>5. å¼€å¯ NAT6 (æºåœ°å€ä¼ªè£…)</a></li><li><a href=#6-é…ç½®é‚»å±…å‘ç°-nd>6. é…ç½®é‚»å±…å‘ç° (ND)</a></li><li><a href=#7-ipv6-é˜²ç«å¢™è§„åˆ™>7. IPv6 é˜²ç«å¢™è§„åˆ™</a></li><li><a href=#8-è°ƒæ•´-tcp-mss>8. è°ƒæ•´ TCP MSS</a></li></ol></nav></div></section><footer class=page__footer><p class=copyright>Â© <strong>felix</strong>.</p><p class=advertisement>Powered by <a>bash&sh</a>.</p></footer></div></body></html>