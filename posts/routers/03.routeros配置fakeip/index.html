<!doctype html><html lang=zh><head><title>03.RouterOSé…ç½®FakeIP &ndash; bash</title><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://hanigege.github.io/css/palettes/base16-dark.css><link rel=stylesheet href=https://hanigege.github.io/css/risotto.css><link rel=stylesheet href=https://hanigege.github.io/css/custom.css><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js></script><style>.page__aside hr,.aside__content hr{display:none!important}.aside__content p{margin-bottom:.5rem!important}pre{position:relative;padding-top:40px!important;background-color:#1e1e1e!important;border:1px solid #333!important;border-radius:10px!important;box-shadow:0 4px 15px rgba(0,0,0,.4);overflow-x:auto!important;overflow-y:hidden!important;margin:1.5em 0}pre::-webkit-scrollbar{height:8px}pre::-webkit-scrollbar-thumb{background:#4a4a4a;border-radius:4px}pre::-webkit-scrollbar-track{background:0 0}code{font-family:jetbrains mono,fira code,Menlo,monospace!important;font-size:.92em!important;line-height:1.6!important;color:#d4d4d4!important;background:0 0!important;white-space:pre!important}.copy-code-button{position:absolute;top:10px;right:12px;padding:5px 12px;background:rgba(255,255,255,8%);color:#aaa;border:1px solid rgba(255,255,255,.15);border-radius:6px;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);cursor:pointer;font-size:11px;font-weight:500;z-index:100;transition:all .25s ease}.copy-code-button:hover{background:rgba(102,217,239,.2);color:#66d9ef;border-color:#66d9ef;transform:translateY(-1px)}.copy-code-button:active{transform:translateY(0)}p img{cursor:zoom-in;transition:opacity .3s;border-radius:4px;max-width:100%}p img:hover{opacity:.9}.medium-zoom-overlay{z-index:999998!important}.medium-zoom-image--opened{z-index:999999!important}</style><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(e=>{if(e.querySelector(".copy-code-button"))return;const t=document.createElement("button");t.className="copy-code-button",t.type="button",t.innerText="Copy",t.addEventListener("click",()=>{const n=e.querySelector("code"),s=n?n.innerText:e.innerText;navigator.clipboard.writeText(s).then(()=>{t.innerText="Copied!",t.style.background="rgba(166, 226, 46, 0.2)",t.style.color="#a6e22e",setTimeout(()=>{t.innerText="Copy",t.style.background="",t.style.color=""},2e3)})}),e.appendChild(t)});const e=document.querySelectorAll("p img");e.length>0&&mediumZoom(e,{margin:24,background:"#1e1e1ecf",scrollOffset:40})})</script></head><body><div class=page><header class=page__header><nav class="page__nav main-nav"><link rel=stylesheet href=/css/custom.css><ul><li class=nomarker><h1 class=page__logo><a href=https://hanigege.github.io/ class=page__logo-inner>bash</a></h1></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/freebsd/ title>FreeBSD</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/linux/ title>Linux</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/routers/ title>Routers</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/other/ title>Other</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/about/ title>About</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>03.RouterOSé…ç½®FakeIP</h1></header><div class=content__body><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>æœ¬æ–‡ä»‹ç»ä½¿ç”¨ FakeIP åˆ†æµæ³•å®ç°å±€åŸŸç½‘å†…è®¾å¤‡é€æ˜ä»£ç†æ—¶ï¼Œä¸»è·¯ç”± RouterOS éƒ¨åˆ†çš„è®¾ç½®ã€‚
</span></span><span style=display:flex><span>æ³¨æ„ï¼šsing-box åŠ mosdns çš„å…·ä½“é…ç½®ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…ã€‚
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ä½œè€…ï¼šTom
</span></span></code></pre></div><h3 id=ç¯å¢ƒè®¾å®š>ç¯å¢ƒè®¾å®š</h3><ul><li><strong>sing-box IP</strong>: IPv4 <code>10.0.0.2</code>, IPv6 <code>dc00::2222</code></li><li><strong>FakeIP ç½‘æ®µ</strong>: IPv4 <code>28.0.0.0/8</code>, IPv6 <code>f2b0::/18</code></li><li><strong>æ³¨æ„</strong>: å¼€å¯ FastTrack å Mangle ä¼šå¤±æ•ˆï¼Œå»ºè®®ä½¿ç”¨ Route æˆ– Routing Rules æ–¹å¼ã€‚</li></ul><hr><h2 id=æ–¹æ¡ˆ-1ä½¿ç”¨-mangle-æ‰“æ ‡ç­¾æ–¹å¼>æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Mangle æ‰“æ ‡ç­¾æ–¹å¼</h2><h3 id=ipv4-éƒ¨åˆ†>IPv4 éƒ¨åˆ†</h3><ol><li><strong>æ·»åŠ sing-box-v4è·¯ç”±è¡¨</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>   /routing table add name=sing-box-v4 fib
</span></span></code></pre></div><ol start=2><li><strong>é…ç½®åœ°å€åˆ—è¡¨</strong>ï¼ˆåœ°å€åˆ—è¡¨ä¸­æ–°å¢proxy_ipv4åˆ—è¡¨ï¼Œå¡«å…¥fakeipç½‘æ®µã€tg v4ç½‘æ®µã€å¥ˆè²v4ç½‘æ®µï¼‰ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=28.0.0.0/8
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=1.1.1.1/32
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=1.0.0.1/32
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=8.8.8.8/32
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=8.8.4.4/32
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=8.41.4.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=23.23.189.144/28
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=23.246.0.0/18
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=34.195.253.0/25
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=37.77.184.0/21
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=38.72.126.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=45.57.0.0/17
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=52.24.178.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=52.35.140.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=54.204.25.0/28
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=54.213.167.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=64.120.128.0/17
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=66.197.128.0/17
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=69.53.224.0/19
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=103.87.204.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=108.175.32.0/20
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=185.2.220.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=185.9.188.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=192.173.64.0/18
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=198.38.96.0/19
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=198.45.48.0/20
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=203.75.84.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=203.198.13.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=203.198.80.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=207.45.72.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=208.75.76.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=210.0.153.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=91.108.56.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=91.108.4.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=91.108.8.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=91.108.16.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=91.108.12.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=149.154.160.0/20
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=91.105.192.0/23
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=91.108.20.0/22
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=185.76.151.0/24
</span></span><span style=display:flex><span>/ip firewall address-list add list=proxy_ipv4 address=95.161.64.0/20
</span></span></code></pre></div><ol start=3><li><strong>ä¸ºç›®çš„ipä¸ºproxy_ipv4åœ°å€åˆ—è¡¨çš„è¿æ¥æ‰“ä¸Šâ€œsing-box-v4â€æ ‡è®°</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ip firewall mangle add action=mark-routing chain=prerouting dst-address-list=proxy_ipv4 new-routing-mark=sing-box-v4 passthrough=yes
</span></span></code></pre></div><ol start=4><li><strong>è®¾ç½®è·¯ç”±è¡¨sing-box-v4çš„ä¸‹ä¸€è·³ç½‘å…³ä¸ºsing-box</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ip route add dst-address=0.0.0.0/0 gateway=10.0.0.2 routing-table=sing-box-v4
</span></span></code></pre></div><h3 id=ipv6-éƒ¨åˆ†>IPv6 éƒ¨åˆ†</h3><ol><li><strong>æ·»åŠ sing-box-v6è·¯ç”±è¡¨</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/routing table add name=sing-box-v6 fib
</span></span></code></pre></div><ol start=2><li><strong>åœ°å€åˆ—è¡¨æ·»åŠ æ·»åŠ fakev6åŠtg v6ç½‘æ®µ</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 firewall address-list add address=f2b0::/18 list=proxy_ipv6
</span></span><span style=display:flex><span>/ipv6 firewall address-list add address=2001:b28:f23d::/48 list=proxy_ipv6
</span></span><span style=display:flex><span>/ipv6 firewall address-list add address=2001:b28:f23f::/48 list=proxy_ipv6
</span></span><span style=display:flex><span>/ipv6 firewall address-list add address=2001:67c:4e8::/48 list=proxy_ipv6
</span></span><span style=display:flex><span>/ipv6 firewall address-list add address=2001:b28:f23c::/48 list=proxy_ipv6
</span></span><span style=display:flex><span>/ipv6 firewall address-list add address=2a0a:f280::/32 list=proxy_ipv6
</span></span></code></pre></div><ol start=3><li><strong>ä¸ºç›®çš„ipä¸ºproxy_ipv6çš„è¿æ¥æ‰“æ ‡è®°</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 firewall mangle add action=mark-routing chain=prerouting dst-address-list=proxy_ipv6 new-routing-mark=sing-box-v6
</span></span></code></pre></div><p><strong>è®¾ç½®è·¯ç”±è¡¨sing-box-v6çš„ä¸‹ä¸€è·³ç½‘å…³ä¸ºsing-boxã€‚æ³¨æ„gatewayä¸ºsing-boxçš„IPv6</strong>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ipv6 route add dst-address=::/0 gateway=dc00::2222 routing-table=sing-box-v6
</span></span></code></pre></div><p><strong>æ·»åŠ è·¯ç”±è§„åˆ™ç¡®ä¿fakev6è·¯ç”±æ­£å¸¸æ‰§è¡Œ</strong>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/routing rule add action=lookup-only-in-table routing-mark=sing-box-v6 table=sing-box-v6
</span></span></code></pre></div><hr><h2 id=æ–¹æ¡ˆ-2ç›´æ¥åœ¨-ip-route-ä¸­æ·»åŠ é™æ€è·¯ç”±>æ–¹æ¡ˆ 2ï¼šç›´æ¥åœ¨ /ip route ä¸­æ·»åŠ é™æ€è·¯ç”±</h2><p><strong>æ­¤æ–¹æ³•é€šè¿‡ç›´æ¥æŒ‡å®šç›®æ ‡ç½‘æ®µçš„ä¸‹ä¸€è·³æ¥å®ç°ï¼Œä¸ä¾èµ– Mangleã€‚</strong>
<strong>ä¸‹é¢å‘½ä»¤æœªåŒ…å«TG IPã€å¥ˆè²IPï¼Œéœ€è¦ç”¨å¯è‡ªè¡Œæ·»åŠ ã€‚æ­¤æ–¹æ³•ä¸ç¬¬1ç§mangleæ ‡è®°æ³•ä¸å†²çªï¼Œä¾‹å¦‚å¯ä»¥FakeIPä½¿ç”¨routeï¼ŒTG IPç­‰ä¾ç„¶ä½¿ç”¨mangleã€‚</strong></p><h3 id=ipv4>ipv4</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>/</span>ip route add disabled<span style=color:#f92672>=</span>no dst<span style=color:#f92672>-</span>address<span style=color:#f92672>=</span><span style=color:#ae81ff>28.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.0</span><span style=color:#f92672>/</span><span style=color:#ae81ff>8</span> gateway<span style=color:#f92672>=</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.2</span> routing<span style=color:#f92672>-</span>table<span style=color:#f92672>=</span>main suppress<span style=color:#f92672>-</span>hw<span style=color:#f92672>-</span>offload<span style=color:#f92672>=</span>no
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>ip route add disabled<span style=color:#f92672>=</span>no distance<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> dst<span style=color:#f92672>-</span>address<span style=color:#f92672>=</span><span style=color:#ae81ff>8.8</span><span style=color:#f92672>.</span><span style=color:#ae81ff>8.8</span><span style=color:#f92672>/</span><span style=color:#ae81ff>32</span> gateway<span style=color:#f92672>=</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.2</span> routing<span style=color:#f92672>-</span>table<span style=color:#f92672>=</span>main scope<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span> suppress<span style=color:#f92672>-</span>hw<span style=color:#f92672>-</span>offload<span style=color:#f92672>=</span>no target<span style=color:#f92672>-</span>scope<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>ip route add disabled<span style=color:#f92672>=</span>no distance<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> dst<span style=color:#f92672>-</span>address<span style=color:#f92672>=</span><span style=color:#ae81ff>1.1</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1.1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>32</span> gateway<span style=color:#f92672>=</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.2</span> routing<span style=color:#f92672>-</span>table<span style=color:#f92672>=</span>main scope<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span> suppress<span style=color:#f92672>-</span>hw<span style=color:#f92672>-</span>offload<span style=color:#f92672>=</span>no target<span style=color:#f92672>-</span>scope<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>ip route add disabled<span style=color:#f92672>=</span>no distance<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> dst<span style=color:#f92672>-</span>address<span style=color:#f92672>=</span><span style=color:#ae81ff>8.8</span><span style=color:#f92672>.</span><span style=color:#ae81ff>4.4</span><span style=color:#f92672>/</span><span style=color:#ae81ff>32</span> gateway<span style=color:#f92672>=</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.2</span> routing<span style=color:#f92672>-</span>table<span style=color:#f92672>=</span>main scope<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span> suppress<span style=color:#f92672>-</span>hw<span style=color:#f92672>-</span>offload<span style=color:#f92672>=</span>no target<span style=color:#f92672>-</span>scope<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>ip route add disabled<span style=color:#f92672>=</span>no distance<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> dst<span style=color:#f92672>-</span>address<span style=color:#f92672>=</span><span style=color:#ae81ff>1.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>32</span> gateway<span style=color:#f92672>=</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.2</span> routing<span style=color:#f92672>-</span>table<span style=color:#f92672>=</span>main scope<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span> suppress<span style=color:#f92672>-</span>hw<span style=color:#f92672>-</span>offload<span style=color:#f92672>=</span>no target<span style=color:#f92672>-</span>scope<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span></code></pre></div><p><img src=assets/9.png alt=9></p><hr><h3 id=ipv6>ipv6</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>/</span>ipv6 route add disabled<span style=color:#f92672>=</span>no distance<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> dst<span style=color:#f92672>-</span>address<span style=color:#f92672>=</span>f2b0::<span style=color:#f92672>/</span><span style=color:#ae81ff>18</span> gateway<span style=color:#f92672>=</span>dc00::<span style=color:#ae81ff>2222</span> routing<span style=color:#f92672>-</span>table<span style=color:#f92672>=</span>main scope<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span> suppress<span style=color:#f92672>-</span>hw<span style=color:#f92672>-</span>offload<span style=color:#f92672>=</span>no target<span style=color:#f92672>-</span>scope<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span></code></pre></div><p><img src=assets/10.png alt=10></p><h2 id=æ–¹æ¡ˆ-3é€šè¿‡-routing-rules-é…ç½®æ¨è>æ–¹æ¡ˆ 3ï¼šé€šè¿‡ /routing rules é…ç½®ï¼ˆæ¨èï¼‰</h2><p>è¿™æ˜¯åšä¸»ç›®å‰ä½¿ç”¨çš„æ–¹æ³•ï¼Œæœ€ä¸ºç®€æ´ä¸”ä¸å— FastTrack å½±å“ã€‚</p><ol><li><strong>æ·»åŠ sing-box-v4ã€sing-box-v6è·¯ç”±è¡¨</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/routing table add name=sing-box-v4 fib
</span></span><span style=display:flex><span>/routing table add name=sing-box-v6 fib
</span></span></code></pre></div><ol start=2><li><strong>è®¾ç½®è·¯ç”±è¡¨sing-box-v4ã€sing-box-v6çš„ä¸‹ä¸€è·³ç½‘å…³ä¸ºsing-box</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/ip route add dst-address=0.0.0.0/0 gateway=10.0.0.2 routing-table=sing-box-v4
</span></span><span style=display:flex><span>/ipv6 route add dst-address=::/0 gateway=dc00::2222 routing-table=sing-box-v6
</span></span></code></pre></div><ol start=3><li><strong>è®¾ç½®FakeIPã€TG IPç­‰IPçš„è·¯ç”±è§„åˆ™</strong>ï¼š</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/routing rule
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=f2b0::/18 table=sing-box-v6
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=2001:b28:f23d::/48 table=sing-box-v6
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=2001:b28:f23f::/48 table=sing-box-v6
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=2001:67c:4e8::/48 table=sing-box-v6
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=2001:b28:f23c::/48 table=sing-box-v6
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=2a0a:f280::/32 table=sing-box-v6
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=1.1.1.1/32 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=1.0.0.1/32 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=192.168.31.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=8.8.8.8/32 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=8.8.4.4/32 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=8.41.4.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=45.12.89.152/32 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=104.19.192.175/32 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=23.23.189.144/28 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=23.246.0.0/18 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=34.195.253.0/25 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=37.77.184.0/21 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=38.72.126.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=45.57.0.0/17 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=52.24.178.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=52.35.140.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=54.204.25.0/28 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=54.213.167.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=64.120.128.0/17 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=66.197.128.0/17 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=69.53.224.0/19 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=103.87.204.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=108.175.32.0/20 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=185.2.220.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=185.9.188.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=192.173.64.0/18 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=198.38.96.0/19 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=198.45.48.0/20 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=203.75.84.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=203.198.13.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=203.198.80.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=207.45.72.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=208.75.76.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=210.0.153.0/24 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=91.108.56.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=91.108.4.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=91.108.8.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=91.108.16.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=91.108.12.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=149.154.160.0/20 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=28.0.0.0/8 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=91.108.20.0/22 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=91.105.192.0/23 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=95.161.64.0/20 table=sing-box-v4
</span></span><span style=display:flex><span>add action=lookup disabled=no dst-address=185.76.151.0/24 table=sing-box-v4
</span></span></code></pre></div><div id=utterances-comments><script src=https://utteranc.es/client.js repo=hanigege/blog-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><span class=about__logo role=img>ğŸš</span>&nbsp;<h1 class=about__title>å–‚é¥­</h1></div><ul class=aside__social-links></ul></div><hr><div class=aside__content><p>2026-02-27</p><hr>On this page:<nav id=TableOfContents><ol><li><ol><li><a href=#ç¯å¢ƒè®¾å®š>ç¯å¢ƒè®¾å®š</a></li></ol></li><li><a href=#æ–¹æ¡ˆ-1ä½¿ç”¨-mangle-æ‰“æ ‡ç­¾æ–¹å¼>æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Mangle æ‰“æ ‡ç­¾æ–¹å¼</a><ol><li><a href=#ipv4-éƒ¨åˆ†>IPv4 éƒ¨åˆ†</a></li><li><a href=#ipv6-éƒ¨åˆ†>IPv6 éƒ¨åˆ†</a></li></ol></li><li><a href=#æ–¹æ¡ˆ-2ç›´æ¥åœ¨-ip-route-ä¸­æ·»åŠ é™æ€è·¯ç”±>æ–¹æ¡ˆ 2ï¼šç›´æ¥åœ¨ /ip route ä¸­æ·»åŠ é™æ€è·¯ç”±</a><ol><li><a href=#ipv4>ipv4</a></li><li><a href=#ipv6>ipv6</a></li></ol></li><li><a href=#æ–¹æ¡ˆ-3é€šè¿‡-routing-rules-é…ç½®æ¨è>æ–¹æ¡ˆ 3ï¼šé€šè¿‡ /routing rules é…ç½®ï¼ˆæ¨èï¼‰</a></li></ol></nav></div></section><footer class=page__footer><p class=copyright>Â© <strong>Gary</strong>.</p><p class=advertisement>Powered by <a>bash&sh</a>.</p></footer></div></body></html>