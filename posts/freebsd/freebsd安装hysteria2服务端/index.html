<!doctype html><html lang=zh><head><title>Freebsdå®‰è£…Hysteria2æœåŠ¡ç«¯ &ndash; bash</title><meta name=description content="å€‹äººè‡ªç•™åœ°ï¼Œå¦‚æœèƒ½å¹«åˆ°ä½ ï¼Œæˆ‘ä¹Ÿæœƒå¾ˆé«˜èˆˆã€‚"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://hanigege.github.io/css/palettes/base16-dark.css><link rel=stylesheet href=https://hanigege.github.io/css/risotto.css><link rel=stylesheet href=https://hanigege.github.io/css/custom.css><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js></script><style>.page__aside hr,.aside__content hr{display:none!important}.aside__content p{margin-bottom:.5rem!important}pre{position:relative;padding-top:40px!important;background-color:#1e1e1e!important;border:1px solid #333!important;border-radius:10px!important;box-shadow:0 4px 15px rgba(0,0,0,.4);overflow-x:auto!important;overflow-y:hidden!important;margin:1.5em 0}pre::-webkit-scrollbar{height:8px}pre::-webkit-scrollbar-thumb{background:#4a4a4a;border-radius:4px}pre::-webkit-scrollbar-track{background:0 0}code{font-family:jetbrains mono,fira code,Menlo,monospace!important;font-size:.92em!important;line-height:1.6!important;color:#d4d4d4!important;background:0 0!important;white-space:pre!important}.copy-code-button{position:absolute;top:10px;right:12px;padding:5px 12px;background:rgba(255,255,255,8%);color:#aaa;border:1px solid rgba(255,255,255,.15);border-radius:6px;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);cursor:pointer;font-size:11px;font-weight:500;z-index:100;transition:all .25s ease}.copy-code-button:hover{background:rgba(102,217,239,.2);color:#66d9ef;border-color:#66d9ef;transform:translateY(-1px)}.copy-code-button:active{transform:translateY(0)}p img{cursor:zoom-in;transition:opacity .3s;border-radius:4px;max-width:100%}p img:hover{opacity:.9}.medium-zoom-overlay{z-index:999998!important}.medium-zoom-image--opened{z-index:999999!important}</style><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(e=>{if(e.querySelector(".copy-code-button"))return;const t=document.createElement("button");t.className="copy-code-button",t.type="button",t.innerText="Copy",t.addEventListener("click",()=>{const n=e.querySelector("code"),s=n?n.innerText:e.innerText;navigator.clipboard.writeText(s).then(()=>{t.innerText="Copied!",t.style.background="rgba(166, 226, 46, 0.2)",t.style.color="#a6e22e",setTimeout(()=>{t.innerText="Copy",t.style.background="",t.style.color=""},2e3)})}),e.appendChild(t)});const e=document.querySelectorAll("p img");e.length>0&&mediumZoom(e,{margin:24,background:"#1e1e1ecf",scrollOffset:40})})</script></head><body><div class=page><header class=page__header><nav class="page__nav main-nav"><link rel=stylesheet href=/css/custom.css><ul><li class=nomarker><h1 class=page__logo><a href=https://hanigege.github.io/ class=page__logo-inner>bash</a></h1></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/freebsd/ title>FreeBSD</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/linux/ title>Linux</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/routers/ title>Routers</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/other/ title>Other</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/about/ title>About</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>Freebsdå®‰è£…Hysteria2æœåŠ¡ç«¯</h1></header><div class=content__body><h2 id=freebsd15ä¸‹é…ç½®æœåŠ¡å™¨ç«¯hysteria2>FreeBSD15ä¸‹é…ç½®æœåŠ¡å™¨ç«¯Hysteria2</h2><p><strong>å»ºè®®ç”¨rootç”¨æˆ·è¿è¡Œï¼š</strong></p><p>ç‰¹æƒç«¯å£é™åˆ¶ï¼šé root ç”¨æˆ·æ— æ³•ç›‘å¬ 1024 ä»¥ä¸‹çš„ç«¯å£ï¼ˆå¦‚ 443ï¼‰ã€‚
Hysteria2è®¾ç½®ç®€å•ï¼Œæ€§èƒ½å¼ºåŠ²ï¼Œå¼ºåŠ›æ¨èï¼Œåªè‡ªå·±ç”¨ï¼Œå¾ˆæ–¹ä¾¿ã€‚</p><p>å…ˆåˆ°å®˜ç½‘ä¸‹è½½æœ€æ–°çš„for freebsdç‰ˆ <a href=https://github.com/apernet/hysteria/releases>å®˜ç½‘ä¸‹è½½</a></p><h2 id=1-å®‰è£…hysteria>1. å®‰è£…hysteria</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>fetch https:<span style=color:#f92672>//</span>github<span style=color:#f92672>.</span>com<span style=color:#f92672>/</span>apernet<span style=color:#f92672>/</span>hysteria<span style=color:#f92672>/</span>releases<span style=color:#f92672>/</span>download<span style=color:#f92672>/</span>app<span style=color:#f92672>%</span><span style=color:#ae81ff>2</span>Fv2<span style=color:#f92672>.</span><span style=color:#ae81ff>7.0</span><span style=color:#f92672>/</span>hysteria<span style=color:#f92672>-</span>freebsd<span style=color:#f92672>-</span>amd64 <span style=color:#75715e>#ä¸‹è½½ç›®å‰æœ€æ–°çš„2.7.0ç‰ˆ</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mv hysteria<span style=color:#f92672>-</span>freebsd<span style=color:#f92672>-</span>amd64 hysteria <span style=color:#75715e>#æŠŠæ–‡ä»¶æ”¹åæˆhysteria</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chmod <span style=color:#f92672>+</span>x hysteria <span style=color:#75715e>#è®©æ–‡ä»¶å¯æ‰§è¡Œ</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mv hysteria <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>local<span style=color:#f92672>/</span>bin <span style=color:#75715e>#å°†æ–‡ä»¶ç§»åˆ°ç›¸åº”ç›®å½•</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sysrc hysteria_enable<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;YES&#34;</span> <span style=color:#75715e>#è®¾ç½®å¼€æœºå¯åŠ¨</span>
</span></span></code></pre></div><h2 id=2-è‡ªç­¾è¯ä¹¦>2. è‡ªç­¾è¯ä¹¦ï¼š</h2><p>ä»¥ä¸‹æ˜¯é€‚é… FreeBSD çš„é«˜æ•ˆæ‰§è¡Œæ­¥éª¤ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>mkdir -p /usr/local/etc/hysteria
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># ç”Ÿæˆç§é’¥ä¸è¯ä¹¦ bing.comä¹Ÿå¯ä»¥æ”¹ä¸ºå…¶å®ƒçš„
</span></span><span style=display:flex><span>openssl req -x509 -nodes -newkey ec -pkeyopt ec_paramgen_curve:prime256v1 \
</span></span><span style=display:flex><span>-keyout /usr/local/etc/hysteria/server.key \
</span></span><span style=display:flex><span>-out /usr/local/etc/hysteria/server.crt \
</span></span><span style=display:flex><span>-subj &#34;/CN=bing.com&#34; -days 36500
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># ä¿®æ­£æƒé™ (FreeBSD ä¸­ hysteria ç”¨æˆ·ç»„åé€šå¸¸ä¹Ÿæ˜¯ hysteria) rootç”¨æˆ·ç™»å½•ä¸‹é¢å‘½ä»¤æ²¡æœ‰å¿…è¦
</span></span><span style=display:flex><span># chown hysteria:hysteria /usr/local/etc/hysteria/server.key /usr/local/etc/hysteria/server.crt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># æ‰€æœ‰ç”¨æˆ·å¿…é¡»æ‰§è¡ŒåŒ…æ‹¬root,ç»™è¯ä¹¦æƒé™
</span></span><span style=display:flex><span>chmod 644 /usr/local/etc/hysteria/server.crt
</span></span><span style=display:flex><span>chmod 600 /usr/local/etc/hysteria/server.key
</span></span></code></pre></div><h3 id=hysteria-æœåŠ¡é…ç½®æç¤º>Hysteria æœåŠ¡é…ç½®æç¤º</h3><p>åœ¨ FreeBSD ä¸Šè¿è¡Œ Hysteria æ—¶ï¼Œè¯·ç¡®ä¿ /usr/local/etc/hysteria/config.yamlï¼ˆæˆ–ä½ çš„é…ç½®æ–‡ä»¶ï¼‰å¼•ç”¨äº†æ­£ç¡®çš„è·¯å¾„ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cert: /usr/local/etc/hysteria/server.crt
</span></span><span style=display:flex><span>key: /usr/local/etc/hysteria/server.key
</span></span></code></pre></div><p>æ³¨æ„ï¼š ç”±äºä½ ä½¿ç”¨äº†è‡ªç­¾åè¯ä¹¦ï¼Œå®¢æˆ·ç«¯è¿æ¥æ—¶å¿…é¡»å¼€å¯ insecure: true æˆ–é…ç½®å¯¹åº”çš„ ca æ ¡éªŒã€‚</p><h2 id=3-åˆ›å»ºå¯åŠ¨è„šæœ¬>3. åˆ›å»ºå¯åŠ¨è„šæœ¬</h2><p>åœ¨ FreeBSD ä¸­ï¼Œä»…ä»…æŠŠäºŒè¿›åˆ¶æ–‡ä»¶æ”¾è¿›å»æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»ç¼–å†™ä¸€ä¸ªç¬¦åˆ rc.subr æ ‡å‡†çš„å¯åŠ¨è„šæœ¬ã€‚</p><p>åˆ›å»ºå¯åŠ¨è„šæœ¬,å¹¶å°†è„šæœ¬æ”¾åˆ°ç›®å½• /usr/local/etc/rc.d ä¸­ã€‚ç³»ç»Ÿé»˜è®¤æ²¡æœ‰è¿™ä¸ªè„šæœ¬ï¼Œæˆ‘çš„è„šæœ¬å¦‚ä¸‹:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nano /usr/local/etc/rc.d/hysteria
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># PROVIDE: hysteria</span>
</span></span><span style=display:flex><span><span style=color:#75715e># REQUIRE: NETWORKING</span>
</span></span><span style=display:flex><span><span style=color:#75715e># KEYWORD: shutdown</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>. /etc/rc.subr
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;hysteria&#34;</span>
</span></span><span style=display:flex><span>rcvar<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;hysteria_enable&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>load_rc_config $name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>: <span style=color:#e6db74>${</span>hysteria_enable:=<span style=color:#e6db74>&#34;NO&#34;</span><span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>: <span style=color:#e6db74>${</span>hysteria_config:=<span style=color:#e6db74>&#34;/usr/local/etc/hysteria/config.yaml&#34;</span><span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>: <span style=color:#e6db74>${</span>hysteria_log:=<span style=color:#e6db74>&#34;/var/log/hysteria.log&#34;</span><span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pidfile<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/var/run/</span><span style=color:#e6db74>${</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>.pid&#34;</span>
</span></span><span style=display:flex><span>procname<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/usr/local/bin/hysteria&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ä½¿ç”¨ daemon -f ç¡®ä¿è¿›ç¨‹å®Œå…¨åå°åŒ–ï¼Œ-p è®°å½•å­è¿›ç¨‹çœŸå® PID</span>
</span></span><span style=display:flex><span>command<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/usr/sbin/daemon&#34;</span>
</span></span><span style=display:flex><span>command_args<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;-f -p </span><span style=color:#e6db74>${</span>pidfile<span style=color:#e6db74>}</span><span style=color:#e6db74> -o </span><span style=color:#e6db74>${</span>hysteria_log<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span>procname<span style=color:#e6db74>}</span><span style=color:#e6db74> server -c </span><span style=color:#e6db74>${</span>hysteria_config<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>run_rc_command <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h3 id=èµ‹äºˆæƒé™ä¸åˆ›å»ºæ—¥å¿—>èµ‹äºˆæƒé™ä¸åˆ›å»ºæ—¥å¿—</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e># èµ‹äºˆæ‰§è¡Œæƒé™</span>
</span></span><span style=display:flex><span>chmod <span style=color:#f92672>+</span>x <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>local<span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>rc<span style=color:#f92672>.</span>d<span style=color:#f92672>/</span>hysteria
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># åˆ›å»ºå¹¶æˆæƒæ—¥å¿—æ–‡ä»¶</span>
</span></span><span style=display:flex><span>touch <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>hysteria<span style=color:#f92672>.</span>log
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>644</span> <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>hysteria<span style=color:#f92672>.</span>log
</span></span></code></pre></div><h2 id=4-æ·»åŠ é…ç½®æ–‡ä»¶configyaml>4. æ·»åŠ é…ç½®æ–‡ä»¶config.yaml</h2><p><strong>å°†æ–‡ä»¶æ”¾åˆ°/usr/local/etc/hysteria/ä¸‹</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nvim /usr/local/etc/hysteria/config.yaml
</span></span></code></pre></div><h3 id=1å›å®¶é…ç½®>ï¼ˆ1ï¼‰å›å®¶é…ç½®</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>listen: :33443 #ç›‘å¬ç«¯å£
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#ä½¿ç”¨è‡ªç­¾è¯ä¹¦
</span></span><span style=display:flex><span>tls:
</span></span><span style=display:flex><span>  cert: /usr/local/etc/hysteria/server.crt
</span></span><span style=display:flex><span>  key: /usr/local/etc/hysteria/server.key
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>auth:
</span></span><span style=display:flex><span>  type: password
</span></span><span style=display:flex><span>  password: 888888 #è®¾ç½®è®¤è¯å¯†ç 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>masquerade:
</span></span><span style=display:flex><span>  type: proxy
</span></span><span style=display:flex><span>  proxy:
</span></span><span style=display:flex><span>    url: https://bing.com #ä¼ªè£…ç½‘å€
</span></span><span style=display:flex><span>    rewriteHost: true
</span></span></code></pre></div><h3 id=2æ ‡å‡†é…ç½®>ï¼ˆ2ï¼‰æ ‡å‡†é…ç½®</h3><p>å°†æ–‡ä»¶æ”¾åˆ°/usr/local/etc/hysteria/ä¸‹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># Hysteria 2 Server Config for FreeBSD 15
</span></span><span style=display:flex><span>listen: :443
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tls:
</span></span><span style=display:flex><span>  cert: /usr/local/etc/hysteria/server.crt
</span></span><span style=display:flex><span>  key: /usr/local/etc/hysteria/server.key
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>auth:
</span></span><span style=display:flex><span>  type: password
</span></span><span style=display:flex><span>  password: &#34;888888&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bandwidth:
</span></span><span style=display:flex><span>  up: 200 mbps
</span></span><span style=display:flex><span>  down: 200 mbps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>masquerade:
</span></span><span style=display:flex><span>  type: proxy
</span></span><span style=display:flex><span>  proxy:
</span></span><span style=display:flex><span>    url: https://bing.com/
</span></span><span style=display:flex><span>    rewriteHost: true
</span></span></code></pre></div><h3 id=3ä¼˜åŒ–é…ç½®æ¨è>ï¼ˆ3ï¼‰ä¼˜åŒ–é…ç½®ï¼šï¼ˆæ¨èï¼‰</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># Hysteria 2 Server Config for FreeBSD 15
</span></span><span style=display:flex><span>listen: :443
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tls:
</span></span><span style=display:flex><span>  cert: /usr/local/etc/hysteria/server.crt
</span></span><span style=display:flex><span>  key: /usr/local/etc/hysteria/server.key
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>auth:
</span></span><span style=display:flex><span>  type: password
</span></span><span style=display:flex><span>  password: &#34;888888&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># ç§‘å­¦å»ºè®®ï¼šåœ¨ FreeBSD ä¸‹ï¼Œé€šè¿‡ ignoreClientBandwidth è®©æœåŠ¡ç«¯æ›´çµæ´»
</span></span><span style=display:flex><span># å¦‚æœä¾ç„¶æƒ³é™åˆ¶ï¼Œè¯·ä¿æŒ 300 mbpsï¼Œä½†åŠ¡å¿…é…åˆæˆ‘ä¹‹å‰ç»™ä½ çš„ sysctl å†…æ ¸ä¼˜åŒ–
</span></span><span style=display:flex><span>bandwidth:
</span></span><span style=display:flex><span>  up: 300 mbps
</span></span><span style=display:flex><span>  down: 300 mbps
</span></span><span style=display:flex><span>ignoreClientBandwidth: true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># æ ¹æ²» i/o timeout çš„å…³é”®ï¼šæŒ‡å®šå¯é çš„å›½é™… DNS
</span></span><span style=display:flex><span>resolver:
</span></span><span style=display:flex><span>  type: udp
</span></span><span style=display:flex><span>  udp:
</span></span><span style=display:flex><span>    addr: 8.8.8.8:53
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>masquerade:
</span></span><span style=display:flex><span>  type: proxy
</span></span><span style=display:flex><span>  proxy:
</span></span><span style=display:flex><span>    url: https://www.bing.com
</span></span><span style=display:flex><span>    rewriteHost: true
</span></span><span style=display:flex><span>  # ä¿æŒ 80 ç«¯å£å…³é—­ï¼Œä¸ä½¿ç”¨ listenHTTPï¼Œæ˜¯æœ€ç§‘å­¦çš„é¿ç¾æ–¹å¼
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>quic:
</span></span><span style=display:flex><span>  initStreamReceiveWindow: 8388608    # 8 MB
</span></span><span style=display:flex><span>  maxStreamReceiveWindow:  8388608    # 8 MB
</span></span><span style=display:flex><span>  initConnReceiveWindow:   20971520   # 20 MB
</span></span><span style=display:flex><span>  maxConnReceiveWindow:    20971520   # 20 MB
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># è¿™é‡Œçš„æ—¥å¿—ç­‰çº§è®¾ä¸º warnï¼Œå‡å°‘æ— æ•ˆä¿¡æ¯å †ç§¯ï¼Œä»…ä¿ç•™å…³é”®é”™è¯¯
</span></span><span style=display:flex><span>log:
</span></span><span style=display:flex><span>  level: warn
</span></span></code></pre></div><h2 id=5-å¯åŠ¨>5. å¯åŠ¨</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e># å¯åŠ¨</span>
</span></span><span style=display:flex><span>service hysteria start
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ£€æŸ¥çŠ¶æ€ (ç°åœ¨çš„ PID ä¼šéå¸¸å‡†ç¡®)</span>
</span></span><span style=display:flex><span>service hysteria status
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹æ—¥å¿—ç¡®è®¤è¿è¡Œæƒ…å†µ</span>
</span></span><span style=display:flex><span>tail <span style=color:#f92672>-</span>f <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>hysteria<span style=color:#f92672>.</span>log
</span></span></code></pre></div><h2 id=6-æ·»åŠ rcconf-é‡Œè‡ªå¯åŠ¨é¡¹>6. æ·»åŠ rc.conf é‡Œè‡ªå¯åŠ¨é¡¹</h2><p>FreeBSD çš„è„šæœ¬å¯¹å˜é‡åéå¸¸æ•æ„Ÿã€‚è¯·ç¡®ä¿ä½ çš„ /etc/rc.conf ä¸­é…ç½®çš„æ˜¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>hysteria_enable=&#34;YES&#34;
</span></span><span style=display:flex><span>hysteria_config=&#34;/usr/local/etc/hysteria/config.yaml&#34;
</span></span></code></pre></div><h2 id=7-æŸ¥çœ‹æ—¥å¿—>7. æŸ¥çœ‹æ—¥å¿—ï¼š</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>tail <span style=color:#f92672>-</span>f <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>hysteria<span style=color:#f92672>.</span>log
</span></span></code></pre></div><h2 id=8-æœåŠ¡ç«¯ç³»ç»Ÿä¼˜åŒ–>8. æœåŠ¡ç«¯ç³»ç»Ÿä¼˜åŒ–</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e># è¿½åŠ æœ€ä¼˜é…ç½®åˆ° sysctl.conf</span>
</span></span><span style=display:flex><span>cat <span style=color:#f92672>&lt;&lt;</span> <span style=color:#e6db74>&#39;EOF&#39;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>sysctl<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span>kern<span style=color:#f92672>.</span>ipc<span style=color:#f92672>.</span>maxsockbuf<span style=color:#f92672>=</span><span style=color:#ae81ff>33554432</span>
</span></span><span style=display:flex><span>net<span style=color:#f92672>.</span>inet<span style=color:#f92672>.</span>udp<span style=color:#f92672>.</span>recvspace<span style=color:#f92672>=</span><span style=color:#ae81ff>8388608</span>
</span></span><span style=display:flex><span>net<span style=color:#f92672>.</span>inet<span style=color:#f92672>.</span>udp<span style=color:#f92672>.</span>maxdgram<span style=color:#f92672>=</span><span style=color:#ae81ff>65535</span>
</span></span><span style=display:flex><span>net<span style=color:#f92672>.</span>route<span style=color:#f92672>.</span>netisr_maxqlen<span style=color:#f92672>=</span><span style=color:#ae81ff>2048</span>
</span></span><span style=display:flex><span>net<span style=color:#f92672>.</span>inet<span style=color:#f92672>.</span>udp<span style=color:#f92672>.</span>blackhole<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> 
</span></span><span style=display:flex><span>EOF
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. å°†åªè¯»å˜é‡å†™å…¥ /boot/loader.conf</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;net.link.ifqmaxlen=&#34;2048&#34;&#39;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#f92672>/</span>boot<span style=color:#f92672>/</span>loader<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># çƒ­åŠ è½½ sysctl å¹¶é‡å¯ hysteria</span>
</span></span><span style=display:flex><span>sysctl <span style=color:#f92672>-</span>f <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>sysctl<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span>service hysteria restart
</span></span></code></pre></div><h3 id=å®Œäº‹>å®Œäº‹ï¼</h3><div id=utterances-comments><script src=https://utteranc.es/client.js repo=hanigege/blog-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><span class=about__logo role=img>ğŸš</span>&nbsp;<h1 class=about__title>root</h1><p class=about__description>å€‹äººè‡ªç•™åœ°ï¼Œå¦‚æœèƒ½å¹«åˆ°ä½ ï¼Œæˆ‘ä¹Ÿæœƒå¾ˆé«˜èˆˆã€‚</p></div><ul class=aside__social-links><li><a href=mailto:purodn@gmail.com rel=me aria-label=Email title=Email><i class="fa-solid fa-envelope" aria-hidden=true></i></a>&nbsp;</li></ul></div><hr><div class=aside__content><p>2025-05-12</p><hr>On this page:<nav id=TableOfContents><ol><li><a href=#freebsd15ä¸‹é…ç½®æœåŠ¡å™¨ç«¯hysteria2>FreeBSD15ä¸‹é…ç½®æœåŠ¡å™¨ç«¯Hysteria2</a></li><li><a href=#1-å®‰è£…hysteria>1. å®‰è£…hysteria</a></li><li><a href=#2-è‡ªç­¾è¯ä¹¦>2. è‡ªç­¾è¯ä¹¦ï¼š</a><ol><li><a href=#hysteria-æœåŠ¡é…ç½®æç¤º>Hysteria æœåŠ¡é…ç½®æç¤º</a></li></ol></li><li><a href=#3-åˆ›å»ºå¯åŠ¨è„šæœ¬>3. åˆ›å»ºå¯åŠ¨è„šæœ¬</a><ol><li><a href=#èµ‹äºˆæƒé™ä¸åˆ›å»ºæ—¥å¿—>èµ‹äºˆæƒé™ä¸åˆ›å»ºæ—¥å¿—</a></li></ol></li><li><a href=#4-æ·»åŠ é…ç½®æ–‡ä»¶configyaml>4. æ·»åŠ é…ç½®æ–‡ä»¶config.yaml</a><ol><li><a href=#1å›å®¶é…ç½®>ï¼ˆ1ï¼‰å›å®¶é…ç½®</a></li><li><a href=#2æ ‡å‡†é…ç½®>ï¼ˆ2ï¼‰æ ‡å‡†é…ç½®</a></li><li><a href=#3ä¼˜åŒ–é…ç½®æ¨è>ï¼ˆ3ï¼‰ä¼˜åŒ–é…ç½®ï¼šï¼ˆæ¨èï¼‰</a></li></ol></li><li><a href=#5-å¯åŠ¨>5. å¯åŠ¨</a></li><li><a href=#6-æ·»åŠ rcconf-é‡Œè‡ªå¯åŠ¨é¡¹>6. æ·»åŠ rc.conf é‡Œè‡ªå¯åŠ¨é¡¹</a></li><li><a href=#7-æŸ¥çœ‹æ—¥å¿—>7. æŸ¥çœ‹æ—¥å¿—ï¼š</a></li><li><a href=#8-æœåŠ¡ç«¯ç³»ç»Ÿä¼˜åŒ–>8. æœåŠ¡ç«¯ç³»ç»Ÿä¼˜åŒ–</a><ol><li><a href=#å®Œäº‹>å®Œäº‹ï¼</a></li></ol></li></ol></nav></div></section><footer class=page__footer><p class=copyright>Â© <strong>mana</strong>.</p><p class=advertisement>Powered by <a>bash&sh</a>.</p></footer></div></body></html>