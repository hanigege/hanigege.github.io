<!doctype html><html lang=zh><head><title>Freebsd-Packet-Filterï¼ˆPFï¼‰é˜²ç«å¢™ä»‹ç» &ndash; bash</title><meta name=description content="å€‹äººè‡ªç•™åœ°ï¼Œå¦‚æœèƒ½å¹«åˆ°ä½ ï¼Œæˆ‘ä¹Ÿæœƒå¾ˆé«˜èˆˆã€‚"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://hanigege.github.io/css/palettes/base16-dark.css><link rel=stylesheet href=https://hanigege.github.io/css/risotto.css><link rel=stylesheet href=https://hanigege.github.io/css/custom.css><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js></script><style>.page__aside hr,.aside__content hr{display:none!important}.aside__content p{margin-bottom:.5rem!important}pre{position:relative;padding-top:40px!important;background-color:#1e1e1e!important;border:1px solid #333!important;border-radius:10px!important;box-shadow:0 4px 15px rgba(0,0,0,.4);overflow-x:auto!important;overflow-y:hidden!important;margin:1.5em 0}pre::-webkit-scrollbar{height:8px}pre::-webkit-scrollbar-thumb{background:#4a4a4a;border-radius:4px}pre::-webkit-scrollbar-track{background:0 0}code{font-family:jetbrains mono,fira code,Menlo,monospace!important;font-size:.92em!important;line-height:1.6!important;color:#d4d4d4!important;background:0 0!important;white-space:pre!important}.copy-code-button{position:absolute;top:10px;right:12px;padding:5px 12px;background:rgba(255,255,255,8%);color:#aaa;border:1px solid rgba(255,255,255,.15);border-radius:6px;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);cursor:pointer;font-size:11px;font-weight:500;z-index:100;transition:all .25s ease}.copy-code-button:hover{background:rgba(102,217,239,.2);color:#66d9ef;border-color:#66d9ef;transform:translateY(-1px)}.copy-code-button:active{transform:translateY(0)}p img{cursor:zoom-in;transition:opacity .3s;border-radius:4px;max-width:100%}p img:hover{opacity:.9}.medium-zoom-overlay{z-index:999998!important}.medium-zoom-image--opened{z-index:999999!important}</style><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre").forEach(e=>{if(e.querySelector(".copy-code-button"))return;const t=document.createElement("button");t.className="copy-code-button",t.type="button",t.innerText="Copy",t.addEventListener("click",()=>{const n=e.querySelector("code"),s=n?n.innerText:e.innerText;navigator.clipboard.writeText(s).then(()=>{t.innerText="Copied!",t.style.background="rgba(166, 226, 46, 0.2)",t.style.color="#a6e22e",setTimeout(()=>{t.innerText="Copy",t.style.background="",t.style.color=""},2e3)})}),e.appendChild(t)});const e=document.querySelectorAll("p img");e.length>0&&mediumZoom(e,{margin:24,background:"#1e1e1ecf",scrollOffset:40})})</script></head><body><div class=page><header class=page__header><nav class="page__nav main-nav"><link rel=stylesheet href=/css/custom.css><ul><li class=nomarker><h1 class=page__logo><a href=https://hanigege.github.io/ class=page__logo-inner>bash</a></h1></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/freebsd/ title>FreeBSD</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/linux/ title>Linux</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/routers/ title>Routers</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/categories/other/ title>Other</a></li><li class=main-nav__item><a class=nav-main-item href=https://hanigege.github.io/about/ title>About</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>Freebsd-Packet-Filterï¼ˆPFï¼‰é˜²ç«å¢™ä»‹ç»</h1></header><div class=content__body><h4 id=åœ¨-pfconf-ä¸­pf-è§„åˆ™çš„é¡ºåºæ˜¯éå¸¸ä¸¥æ ¼çš„æ­£ç¡®çš„é¡ºåºåº”è¯¥æ˜¯>åœ¨ pf.conf ä¸­ï¼ŒPF è§„åˆ™çš„é¡ºåºæ˜¯éå¸¸ä¸¥æ ¼çš„ã€‚æ­£ç¡®çš„é¡ºåºåº”è¯¥æ˜¯ï¼š</h4><p><code>options â€” è®¾ç½® PF çš„å…¨å±€é€‰é¡¹ã€‚</code></p><p><code>ethernet â€” è®¾ç½®ç½‘ç»œæ¥å£ã€‚</code></p><p><code>normalization â€” è®¾ç½®æ•°æ®åŒ…çš„è§„èŒƒåŒ–ã€‚</code></p><p><code>queueing â€” è®¾ç½®é˜Ÿåˆ—ï¼ˆå¯é€‰ï¼‰ã€‚</code></p><p><code>translation â€” NAT æˆ– RDR è®¾ç½®ã€‚</code></p><p><code>filtering â€” åŒ…è¿‡æ»¤è§„åˆ™ã€‚</code></p><h4 id=pfpacket-filteråŒ…è¿‡æ»¤å™¨æ˜¯ä¸€æ¬¾ç”±-openbsd-ç§»æ¤è€Œæ¥çš„é˜²ç«å¢™æä¾›äº†å¤§é‡åŠŸèƒ½åŒ…æ‹¬-altq-alternate-queuingäº¤é”™é˜Ÿåˆ—-ç­‰>PFï¼ˆPacket Filterï¼ŒåŒ…è¿‡æ»¤å™¨ï¼‰æ˜¯ä¸€æ¬¾ç”± OpenBSD ç§»æ¤è€Œæ¥çš„é˜²ç«å¢™ï¼Œæä¾›äº†å¤§é‡åŠŸèƒ½ï¼ŒåŒ…æ‹¬ ALTQ (Alternate Queuingï¼Œäº¤é”™é˜Ÿåˆ—) ç­‰ã€‚</h4><p>å¯ç”¨ PF</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># kldload pf # â‘  åŠ è½½å†…æ ¸æ¨¡å—</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ç¤ºä¾‹æ–‡ä»¶ä½œä¸ºé»˜è®¤é…ç½®è§„åˆ™é›†æ–‡ä»¶ï¼Œå¦åˆ™ pf æ— æ³•å¯åŠ¨ â‘¡</span>
</span></span><span style=display:flex><span><span style=color:#75715e># cp /usr/share/examples/pf/pf.conf /etc/</span>
</span></span><span style=display:flex><span><span style=color:#75715e># service pf enable # è®¾ç½® pf å¼€æœºå¯åŠ¨</span>
</span></span><span style=display:flex><span><span style=color:#75715e># service pf start  # å¯åŠ¨ pf</span>
</span></span></code></pre></div><p>â‘  å¦‚ä¸åšï¼Œåˆ™æç¤º pfctl: /dev/pf: No such file or directoryã€‚æˆ–è€…ä½ é‡å¯å† service pf startã€‚</p><p>â‘¡ å¦åˆ™æç¤ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/etc/rc.d/pf: WARNING: /etc/pf.conf is not readable.
</span></span></code></pre></div><h2 id=pfctlå‘½ä»¤è¯¦è§£>pfctlå‘½ä»¤è¯¦è§£</h2><p>pf çš„ç®¡ç†å‘½ä»¤ä¸º pfctlï¼Œå¸¸ç”¨æ“ä½œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># å¯åŠ¨ pfï¼Œç›¸å½“äº service pf start</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pfctl -e</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å³ç¦æ­¢è§„åˆ™ã€‚å‡ ä¹ç›¸å½“äº service pf stopï¼ˆåœæ­¢é˜²ç«å¢™ï¼‰</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pfctl -d</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># åŠ è½½è§„åˆ™é›†æ–‡ä»¶ä¸­çš„è§„åˆ™</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pfctl -f /etc/pf.conf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è§£æè§„åˆ™ï¼Œä½†ä¸åŠ è½½ã€‚-f å‚æ•°è¿˜å¯ä»¥ä¸å…¶ä»–å‚æ•°é…åˆï¼Œå¦‚ -N è¡¨ç¤ºåªè½½å…¥ NAT è§„åˆ™ï¼Œ-R è¡¨ç¤ºåªè½½å…¥è¿‡æ»¤è§„åˆ™ï¼Œ-A åªè½½å…¥é˜Ÿåˆ—è§„åˆ™ï¼Œ-O åªè½½å…¥é€‰é¡¹è§„åˆ™</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pfctl -nf /etc/pf.conf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹ pf æ‰€æœ‰å¯¹è±¡ä¿¡æ¯ã€‚å¦‚æœæƒ³æŸ¥çœ‹ç‰¹å®šå¯¹è±¡ä¿¡æ¯ï¼Œå¯ä»¥ç”¨ natã€queueã€rulesã€Anchorsã€statesã€Sourcesã€infoã€Runningã€labelsã€timeoutsã€memoryã€Tablesã€osfpã€Interfaces æ›¿æ¢ all</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pfctl -s all</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ¸…ç† pf æ‰€æœ‰è§„åˆ™</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pfctl -F all</span>
</span></span></code></pre></div><p>å¦‚æœæƒ³æŸ¥çœ‹ç‰¹å®šè§„åˆ™ï¼Œå¯ä»¥ç”¨ natã€queueã€rulesã€statesã€Sourcesã€infoã€Tablesã€osfp æ›¿æ¢ allã€‚</p><p>ä¸è¿‡ä»¥ä¸Šæ“ä½œå¹¶æ²¡æœ‰å¯¹è§„åˆ™çš„ç®¡ç†ï¼Œå› æ­¤è¿˜éœ€è¦ä¿®æ”¹è§„åˆ™é›†æ–‡ä»¶ï¼Œå¸¸ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># æ•´ç†æ‰€æœ‰è¾“å…¥çš„æ•°æ®</span>
</span></span><span style=display:flex><span>scrub in all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ‹’ç»æ‰€æœ‰è®¿é—®</span>
</span></span><span style=display:flex><span>block all  <span style=color:#75715e># é»˜è®¤æ˜ç¤ºç¦æ­¢æ‰€æœ‰è®¿é—®ã€‚block æ˜¯åŠ¨ä½œï¼Œall æ˜¯ä»ä»»ä½•æºåˆ°ä»»ä½•ç›®æ ‡çš„ç®€å†™ï¼Œè¡¨ç¤ºä»æºåœ°å€åˆ°ç›®æ ‡åœ°å€ã€‚ </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ”¾å¼€å›ç¯æ¥å£çš„è®¿é—®æƒé™ï¼Œå›ç¯æ¥å£ä¸å¯¹å¤–éƒ¨</span>
</span></span><span style=display:flex><span>pass quick on lo0 all  <span style=color:#75715e># quick å…³é”®å­—è¡¨ç¤ºè‹¥è§„åˆ™åŒ¹é…ï¼Œå°±åœæ­¢æ‰§è¡Œï¼Œä¸ä¼šå†æ‰§è¡Œåç»­è§„åˆ™</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¢åŠ  TCP åè®®è®¿é—® 80 ç«¯å£çš„è§„åˆ™ï¼Œå…è®¸ä»»ä½•è®¾å¤‡ä»¥ TCP åè®®è®¿é—®æœ¬æœº 80 ç«¯å£</span>
</span></span><span style=display:flex><span>pass in quick proto tcp from any to 192.168.1.184 port <span style=color:#ae81ff>80</span>  <span style=color:#75715e># proto tcp æ˜¯è®¿é—®åè®®ï¼Œport 80 æ˜¯ç›®æ ‡ç«¯å£</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å…è®¸å›æ˜¾ä¿¡æ¯ç»™ä»»ä½•è®¿é—®çš„è®¾å¤‡</span>
</span></span><span style=display:flex><span>pass out quick proto tcp from 192.168.1.184 port <span style=color:#ae81ff>80</span> to any  <span style=color:#75715e># å…è®¸æœ¬æœºå‘å¤–å‘é€ 80 ç«¯å£çš„å“åº”</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¢åŠ  80 ç«¯å£åˆ° 8080 ç«¯å£æµé‡è½¬å‘çš„è§„åˆ™</span>
</span></span><span style=display:flex><span>rdr pass on em0 inet proto tcp from any to 192.168.1.184 port <span style=color:#ae81ff>80</span> -&gt; 192.168.1.166 port <span style=color:#ae81ff>8080</span>  <span style=color:#75715e># è½¬å‘æµé‡åˆ°å†…ç½‘åœ°å€ 192.168.1.166 ç«¯å£ 8080</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å…è®¸æœ¬æœºä¸å¤–éƒ¨è®¾å¤‡äº’ ping</span>
</span></span><span style=display:flex><span>pass quick inet proto icmp all icmp-type <span style=color:#ae81ff>8</span> code <span style=color:#ae81ff>0</span>  <span style=color:#75715e># icmp-type 8 æ˜¯æŸ¥è¯¢è¯·æ±‚ï¼Œcode 0 è¡¨ç¤ºè¿”å›ç ä¸º 0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å…è®¸ traceroute å‘½ä»¤ä»¥ ICMP åè®®æ‰§è¡Œ</span>
</span></span><span style=display:flex><span>pass out quick inet proto icmp from 192.168.1.184 to any icmp-type <span style=color:#ae81ff>11</span> code <span style=color:#ae81ff>0</span>  <span style=color:#75715e># icmp-type 11 ç”¨äºæ—¶é—´è¶…æ—¶</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å…è®¸ traceroute ä½¿ç”¨ UDP åè®®æ‰§è¡Œï¼Œç«¯å£å·ä» 33434 å¼€å§‹</span>
</span></span><span style=display:flex><span>pass out quick proto udp from 192.168.1.184 to any port <span style=color:#ae81ff>33434</span> &gt;&lt; <span style=color:#ae81ff>34500</span>  <span style=color:#75715e># é»˜è®¤ UDP åè®®ï¼Œç«¯å£å·ä» 33434 å¼€å§‹ï¼Œæ¯è½¬å‘ä¸€æ¬¡ç«¯å£å·åŠ  1</span>
</span></span><span style=display:flex><span>å¯èƒ½ç”¨åˆ°çš„è§„åˆ™é›†æ–‡ä»¶ /etc/pf.conf å¦‚ä¸‹ï¼š
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æµé‡æ•´å½¢</span>
</span></span><span style=display:flex><span>scrub in all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è½¬å‘è§„åˆ™</span>
</span></span><span style=display:flex><span>rdr pass on em0 inet proto tcp from any to 192.168.1.184 port <span style=color:#ae81ff>8080</span> -&gt; 192.168.1.184 port <span style=color:#ae81ff>80</span>  <span style=color:#75715e># æ³¨æ„è§„åˆ™æ¬¡åºï¼Œæ ¹æ® pf.conf è§„åˆ™ï¼Œè½¬å‘è§„åˆ™åº”ä½äºè¿‡æ»¤è§„åˆ™ä¹‹å‰ï¼Œç›¸å…³å†…å®¹è¯·å‚è€ƒå¸®åŠ©</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è¿‡æ»¤è§„åˆ™</span>
</span></span><span style=display:flex><span>block all pass quick on lo0 all  <span style=color:#75715e># é˜»æ­¢æ‰€æœ‰æµé‡ï¼Œä½†å…è®¸å›ç¯æ¥å£ï¼ˆlo0ï¼‰ä¸Šçš„æµé‡</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¾ç½®ä»»ä½•è®¾å¤‡å¯ä»¥è®¿é—®æœåŠ¡å™¨çš„ 22ã€80ã€443ã€4200ã€10000 ç«¯å£</span>
</span></span><span style=display:flex><span>pass in quick proto tcp from any to 192.168.1.184 port <span style=color:#f92672>{</span> 22, 80, 443, 4200, <span style=color:#ae81ff>10000</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¾ç½®æœåŠ¡å™¨å¯ä»¥è®¿é—®å¤–éƒ¨è®¾å¤‡çš„ 22ã€80ã€443ã€4200ã€10000 ç«¯å£</span>
</span></span><span style=display:flex><span>pass out quick proto tcp from 192.168.1.184 port <span style=color:#f92672>{</span> 22, 80, 443, 4200, <span style=color:#ae81ff>10000</span> <span style=color:#f92672>}</span> to any
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¾ç½®æœåŠ¡å™¨è®¿é—®ä»»ä½•ç½‘ç»œè®¾å¤‡çš„ 80ã€443 ç«¯å£ï¼Œå¹¶ä¿æŒçŠ¶æ€</span>
</span></span><span style=display:flex><span>pass out quick proto tcp from 192.168.1.184 to any port <span style=color:#f92672>{</span> 80, <span style=color:#ae81ff>443</span> <span style=color:#f92672>}</span> keep state
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¾ç½®æœåŠ¡å™¨è®¿é—® DNS æœåŠ¡å™¨ï¼ˆUDP ç«¯å£ 53ï¼‰</span>
</span></span><span style=display:flex><span>pass out quick proto udp from any to any port <span style=color:#ae81ff>53</span> keep state
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># è®¾ç½®æœåŠ¡å™¨è®¿é—® DHCP æœåŠ¡å™¨ï¼ˆUDP ç«¯å£ 67ï¼‰</span>
</span></span><span style=display:flex><span>pass out quick proto udp from any to any port <span style=color:#ae81ff>67</span> keep state
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å…è®¸æœåŠ¡å™¨å‘é€ ICMP è¯·æ±‚</span>
</span></span><span style=display:flex><span>pass quick inet proto icmp all icmp-type <span style=color:#ae81ff>8</span> code <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å…è®¸æœåŠ¡å™¨å‘é€ ICMP è¶…æ—¶æ¶ˆæ¯ï¼ˆTTL è¶…è¿‡ï¼‰</span>
</span></span><span style=display:flex><span>pass out quick inet proto icmp from 192.168.1.184 to any icmp-type <span style=color:#ae81ff>11</span> code <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å…è®¸æœåŠ¡å™¨è®¿é—® UDP èŒƒå›´ç«¯å£ 33434 åˆ° 34500</span>
</span></span><span style=display:flex><span>pass out quick proto udp from 192.168.1.184 to any port <span style=color:#ae81ff>33434</span> &gt;&lt; <span style=color:#ae81ff>34500</span>
</span></span></code></pre></div><p>ä¿å­˜æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># åŠ è½½è§„åˆ™é›†æ–‡ä»¶ä¸­çš„è§„åˆ™ å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ã€‚</span>
</span></span><span style=display:flex><span><span style=color:#75715e># pfctl -Fa -f /etc/pf.conf </span>
</span></span></code></pre></div><p><code>----------------------------------------------------------------</code></p><h2 id=è¦å–æ¶ˆå¸è½½å·²ç»åŠ è½½çš„å†…æ ¸æ¨¡å—-pfå¯ä»¥ä½¿ç”¨-kldunload-å‘½ä»¤å…·ä½“æ“ä½œå¦‚ä¸‹>è¦å–æ¶ˆï¼ˆå¸è½½ï¼‰å·²ç»åŠ è½½çš„å†…æ ¸æ¨¡å— pfï¼Œå¯ä»¥ä½¿ç”¨ kldunload å‘½ä»¤ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kldunload pf
</span></span></code></pre></div><p>è§£é‡Šï¼š
kldunload pf ä¼šå¸è½½å·²åŠ è½½çš„ pfï¼ˆPacket Filterï¼‰å†…æ ¸æ¨¡å—ã€‚å¦‚æœè¿™ä¸ªæ¨¡å—æ­£åœ¨è¢«ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œé…ç½®äº†é˜²ç«å¢™è§„åˆ™ï¼‰ï¼Œå¸è½½æ—¶å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›å½±å“ã€‚</p><p>è¯·ç¡®ä¿åœ¨å¸è½½æ¨¡å—å‰æ²¡æœ‰ç›¸å…³æœåŠ¡æˆ–è§„åˆ™åœ¨è¿è¡Œã€‚</p><p>æŸ¥çœ‹å½“å‰åŠ è½½çš„å†…æ ¸æ¨¡å—ï¼š
ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰åŠ è½½çš„å†…æ ¸æ¨¡å—ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kldstat
</span></span></code></pre></div><p>è¿™ä¼šåˆ—å‡ºå½“å‰åŠ è½½çš„æ‰€æœ‰å†…æ ¸æ¨¡å—ï¼ŒåŒ…æ‹¬ pfã€‚</p><h2 id=æ³¨æ„>æ³¨æ„ï¼š</h2><p>å¦‚æœä½ å¸Œæœ›åœ¨ç³»ç»Ÿé‡å¯åä¸å†åŠ è½½ pf æ¨¡å—ï¼Œå¯ä»¥ç§»é™¤ç›¸å…³çš„é…ç½®æ–‡ä»¶ä¸­çš„ kldload pf æŒ‡ä»¤ï¼Œä¾‹å¦‚ /etc/rc.conf æ–‡ä»¶ä¸­çš„è®¾ç½®ã€‚</p><div id=utterances-comments><script src=https://utteranc.es/client.js repo=hanigege/blog-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><span class=about__logo role=img>ğŸš</span>&nbsp;<h1 class=about__title>root</h1><p class=about__description>å€‹äººè‡ªç•™åœ°ï¼Œå¦‚æœèƒ½å¹«åˆ°ä½ ï¼Œæˆ‘ä¹Ÿæœƒå¾ˆé«˜èˆˆã€‚</p></div><ul class=aside__social-links><li><a href=mailto:purodn@gmail.com rel=me aria-label=Email title=Email><i class="fa-solid fa-envelope" aria-hidden=true></i></a>&nbsp;</li></ul></div><hr><div class=aside__content><p>2025-05-12</p><hr>On this page:<nav id=TableOfContents><ol><li><ol><li></li></ol></li><li><a href=#pfctlå‘½ä»¤è¯¦è§£>pfctlå‘½ä»¤è¯¦è§£</a></li><li><a href=#è¦å–æ¶ˆå¸è½½å·²ç»åŠ è½½çš„å†…æ ¸æ¨¡å—-pfå¯ä»¥ä½¿ç”¨-kldunload-å‘½ä»¤å…·ä½“æ“ä½œå¦‚ä¸‹>è¦å–æ¶ˆï¼ˆå¸è½½ï¼‰å·²ç»åŠ è½½çš„å†…æ ¸æ¨¡å— pfï¼Œå¯ä»¥ä½¿ç”¨ kldunload å‘½ä»¤ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</a></li><li><a href=#æ³¨æ„>æ³¨æ„ï¼š</a></li></ol></nav></div></section><footer class=page__footer><p class=copyright>Â© <strong>felix</strong>.</p><p class=advertisement>Powered by <a>bash&sh</a>.</p></footer></div></body></html>