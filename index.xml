<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ä»£ç ä»“åº“ on bash</title><link>https://hanigege.github.io/</link><description>Recent content in ä»£ç ä»“åº“ on bash</description><generator>Hugo</generator><language>zh-CN</language><copyright>Â© **Gary**.</copyright><lastBuildDate>Sun, 01 Mar 2026 20:44:50 +0800</lastBuildDate><atom:link href="https://hanigege.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Freebsdä¸“ç”¨ç‰ˆæ‹‰å–githubå…¬é’¥åšä¸ºè‡ªå·±æœåŠ¡å™¨çš„å…¬é’¥çš„è„šæœ¬</title><link>https://hanigege.github.io/posts/freebsd/freebsd%E4%B8%93%E7%94%A8%E7%89%88%E6%8B%89%E5%8F%96github%E5%85%AC%E9%92%A5%E5%81%9A%E4%B8%BA%E8%87%AA%E5%B7%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%85%AC%E9%92%A5%E7%9A%84%E8%84%9A%E6%9C%AC/</link><pubDate>Sun, 01 Mar 2026 20:44:50 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd%E4%B8%93%E7%94%A8%E7%89%88%E6%8B%89%E5%8F%96github%E5%85%AC%E9%92%A5%E5%81%9A%E4%B8%BA%E8%87%AA%E5%B7%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%85%AC%E9%92%A5%E7%9A%84%E8%84%9A%E6%9C%AC/</guid><description>&lt;h2 id="è„šæœ¬åªèƒ½æ˜¯rootç”¨æˆ·è¿è¡Œ"&gt;è„šæœ¬åªèƒ½æ˜¯&lt;code&gt;rootç”¨æˆ·&lt;/code&gt;è¿è¡Œï½&lt;/h2&gt;
&lt;h2 id="ä¸€é”®æ‰§è¡Œå‘½ä»¤freebsd"&gt;ä¸€é”®æ‰§è¡Œå‘½ä»¤ï¼ˆFreeBSDï¼‰&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://raw.githubusercontent.com/hanigege/scripts/main/freebsd_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-o freebsd_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod +x freebsd_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sh freebsd_ssh_key_manage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-å¦‚æœä½ æƒ³å¢åŠ å®‰å…¨æ£€æŸ¥å¯é€‰"&gt;ğŸ’¡ å¦‚æœä½ æƒ³å¢åŠ å®‰å…¨æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ä½ ä¹Ÿå¯ä»¥åœ¨æ‰§è¡Œå‰å¼ºåˆ¶æ£€æŸ¥æ˜¯å¦ä¸º &lt;code&gt;rootï¼š&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://raw.githubusercontent.com/hanigege/scripts/main/freebsd_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-o freebsd_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod +x freebsd_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;id -u&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; -eq &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sh freebsd_ssh_key_manage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¿™æ ·å¯ä»¥ç¡®ä¿åªæœ‰ root æ‰èƒ½è¿è¡Œã€‚&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>æ‹‰å–githubå…¬é’¥åšä¸ºè‡ªå·±æœåŠ¡å™¨çš„å…¬é’¥çš„è„šæœ¬</title><link>https://hanigege.github.io/posts/linux/%E6%8B%89%E5%8F%96github%E5%85%AC%E9%92%A5%E5%81%9A%E4%B8%BA%E8%87%AA%E5%B7%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%85%AC%E9%92%A5%E7%9A%84%E8%84%9A%E6%9C%AC/</link><pubDate>Sun, 01 Mar 2026 20:29:39 +0800</pubDate><guid>https://hanigege.github.io/posts/linux/%E6%8B%89%E5%8F%96github%E5%85%AC%E9%92%A5%E5%81%9A%E4%B8%BA%E8%87%AA%E5%B7%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%85%AC%E9%92%A5%E7%9A%84%E8%84%9A%E6%9C%AC/</guid><description>&lt;h2 id="é€‚ç”¨äºubuntudebianalpineè¯·å¯¹åº”å®‰è£…"&gt;é€‚ç”¨äºubuntu&amp;amp;debian&amp;amp;alpine,è¯·å¯¹åº”å®‰è£…&lt;/h2&gt;
&lt;h2 id="è¯´æ˜"&gt;è¯´æ˜ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æå¤§ç®€åŒ–äº†æœåŠ¡å™¨å®‰è£…&lt;code&gt;sshå¯†é’¥&lt;/code&gt;çš„å·¥ä½œï¼Œä¸€é”®å¯¼å…¥ï¼Œå¯¼å…¥åï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ä¿®æ”¹sshd_configçš„é…ç½®å‚æ•°ï¼Œçœå¿ƒçœåŠ›ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ç”Ÿæˆæ–°è¯ä¹¦ä½¿ç”¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="-ubuntuubuntu_ssh_key_manageshä¸€é”®"&gt;âœ… Ubuntuï¼šubuntu_ssh_key_manage.shï¼ˆä¸€é”®ï¼‰&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://raw.githubusercontent.com/hanigege/scripts/main/ubuntu_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-o ubuntu_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod +x ubuntu_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; bash ubuntu_ssh_key_manage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="-alpinerootalpine_root_ssh_key_manageshä¸€é”®"&gt;âœ… Alpineï¼ˆrootï¼‰ï¼šalpine_root_ssh_key_manage.shï¼ˆä¸€é”®ï¼‰&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://raw.githubusercontent.com/hanigege/scripts/main/alpine_root_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-o alpine_root_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod +x alpine_root_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sh alpine_root_ssh_key_manage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="-alpineæ™®é€šç”¨æˆ·alpine_user_ssh_key_manageshä¸€é”®"&gt;âœ… Alpineï¼ˆæ™®é€šç”¨æˆ·ï¼‰ï¼šalpine_user_ssh_key_manage.shï¼ˆä¸€é”®ï¼‰&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://raw.githubusercontent.com/hanigege/scripts/main/alpine_user_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-o alpine_user_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod +x alpine_user_ssh_key_manage.sh &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sh alpine_user_ssh_key_manage.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>FreeBSD15ç°ä»£åŒ–Neovimç”Ÿäº§åŠ›ç¯å¢ƒéƒ¨ç½²æŒ‡å—</title><link>https://hanigege.github.io/posts/freebsd/freebsd15%E7%8E%B0%E4%BB%A3%E5%8C%96neovim%E7%94%9F%E4%BA%A7%E5%8A%9B%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/</link><pubDate>Sun, 01 Mar 2026 09:42:19 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd15%E7%8E%B0%E4%BB%A3%E5%8C%96neovim%E7%94%9F%E4%BA%A7%E5%8A%9B%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/</guid><description>&lt;h2 id="ç¬¬ä¸€æ­¥å®‰è£…ç³»ç»Ÿä¾èµ–ä¸æºç ç¼–è¯‘-neovim-010"&gt;ç¬¬ä¸€æ­¥ï¼šå®‰è£…ç³»ç»Ÿä¾èµ–ä¸æºç ç¼–è¯‘ Neovim 0.10+&lt;/h2&gt;
&lt;p&gt;FreeBSD ä½¿ç”¨ pkg ç®¡ç†äºŒè¿›åˆ¶åŒ…ï¼Œç¼–è¯‘ Neovim éœ€è¦é¢å¤–çš„ gmakeã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 1. å®‰è£…ç¼–è¯‘æ‰€éœ€çš„å·¥å…·å’Œä¾èµ–&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ³¨æ„ï¼šFreeBSD ä¸‹ç¼–è¯‘ Neovim å»ºè®®ä½¿ç”¨ gmake&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¼ºåˆ¶åŒæ­¥å¹¶æ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ…ï¼Œè¿™æ˜¯è§£å†³ ld-elf.so.1 é”™è¯¯æœ€ç›´æ¥çš„æ–¹æ³•ï¼Œç¡®ä¿æ‰€æœ‰ä¾èµ–åº“ç‰ˆæœ¬ä¸€è‡´ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;pkg update -f&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;pkg upgrade -y&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;pkg install -y ninja cmake gettext-tools gmake unzip curl git gcc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 2. æ‹‰å– Neovim æºç &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;git clone https://github.com/neovim/neovim.git ~/neovim-src&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;cd ~/neovim-src&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;git checkout stable&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 3. ç¼–è¯‘å¹¶å…¨å±€å®‰è£…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# FreeBSD ç¯å¢ƒä¸‹å¿…é¡»æ˜ç¡®ä½¿ç”¨ gmake&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;gmake CMAKE_BUILD_TYPE=Release -j$(sysctl -n hw.ncpu)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;sudo gmake install&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 4. éªŒè¯ç‰ˆæœ¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;hash -r&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;nvim -v&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç¬¬äºŒæ­¥å®‰è£…æ ¼å¼åŒ–æ‰€éœ€çš„ç¯å¢ƒä¾èµ–"&gt;ç¬¬äºŒæ­¥ï¼šå®‰è£…æ ¼å¼åŒ–æ‰€éœ€çš„ç¯å¢ƒä¾èµ–&lt;/h2&gt;
&lt;p&gt;FreeBSD çš„ Node.js åŒ…åé€šå¸¸å¸¦æœ‰ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸»æµçš„ LTS ç‰ˆæœ¬ã€‚&lt;/p&gt;</description></item><item><title>05.RouterOSå¦‚ä½•natå›æµåŠåŒ…å«é…å¥—é˜²ç«å¢™è§„åˆ™</title><link>https://hanigege.github.io/posts/routers/05.routeros%E5%A6%82%E4%BD%95nat%E5%9B%9E%E6%B5%81/</link><pubDate>Fri, 27 Feb 2026 17:20:17 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/05.routeros%E5%A6%82%E4%BD%95nat%E5%9B%9E%E6%B5%81/</guid><description>&lt;h2 id="å†…ç½‘çš„dst-natè¦åŠ å¤–ç½‘æ¥å£å¦‚pppoe-out1"&gt;å†…ç½‘çš„dst-natè¦åŠ å¤–ç½‘æ¥å£å¦‚pppoe-out1&lt;/h2&gt;
&lt;h2 id="1-ä¸ºä»€ä¹ˆéœ€è¦å›æµ"&gt;1. ä¸ºä»€ä¹ˆéœ€è¦å›æµï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å½“ä½ ä»å†…ç½‘è¯·æ±‚å…¬ç½‘ IP æ—¶ï¼ŒROS æ”¶åˆ°åŒ…åè½¬å‘ç»™å†…ç½‘æœåŠ¡å™¨ï¼Œä½†æœåŠ¡å™¨å‘ç°è¯·æ±‚æ–¹å’Œè‡ªå·±åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œä¼šç›´æ¥æŠŠå›åŒ…ä¼ ç»™æ‰‹æœºã€‚æ‰‹æœºå‘ç°è‡ªå·±å‘ç»™å…¬ç½‘ IP çš„è¯·æ±‚å´æ”¶åˆ°äº†æ¥è‡ªå†…ç½‘ç§æœ‰ IP çš„å“åº”ï¼Œä¼šå› ä¸ºå®‰å…¨æœºåˆ¶ç›´æ¥ä¸¢å¼ƒè¯¥åŒ…ã€‚å›æµè§„åˆ™é€šè¿‡è®© ROS ä¸­è½¬è¿™ä¸ªâ€œå›å¤´åŒ…â€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="2-å®Œæ•´çš„-ros-nat-è„šæœ¬åŒ…å«-web-å›æµ"&gt;2. å®Œæ•´çš„ ROS NAT è„šæœ¬ï¼ˆåŒ…å« Web å›æµï¼‰&lt;/h2&gt;
&lt;h4 id="è¯·æ ¹æ®ä½ çš„å®é™…ç«¯å£ä¿®æ”¹-12335-web-å’Œ-21-ftp-ç­‰"&gt;è¯·æ ¹æ®ä½ çš„å®é™…ç«¯å£ä¿®æ”¹ 12335 (Web) å’Œ 21 (FTP) ç­‰ã€‚&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall nat
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# --- åŸºç¡€è§„åˆ™ ---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 1. æ ¸å¿ƒä¸Šç½‘ä¼ªè£…ï¼ˆå¿…é¡»é™åˆ¶åœ¨ WAN å£ï¼Œé˜²æ­¢å¹²æ‰°å…¶ä»–è½¬å‘ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=srcnat action=masquerade out-interface=pppoe-out1 comment=&amp;#34;Standard Internet Access&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# --- ç«¯å£è½¬å‘ (DST-NAT) ---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 2. DERP è½¬å‘
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=dstnat protocol=tcp dst-port=12340 action=dst-nat to-addresses=10.20.20.4 to-ports=12340 comment=&amp;#34;DERP TCP&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=dstnat protocol=udp dst-port=3478 action=dst-nat to-addresses=10.20.20.4 to-ports=3478 comment=&amp;#34;DERP STUN&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 3. Web æœåŠ¡è½¬å‘ (ç¤ºä¾‹)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=dstnat protocol=tcp dst-port=12335 action=dst-nat to-addresses=10.20.20.x to-ports=12335 comment=&amp;#34;web&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 4. FTP æœåŠ¡è½¬å‘ (ç¤ºä¾‹)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=dstnat protocol=tcp dst-port=21 action=dst-nat to-addresses=10.20.20.x to-ports=21 comment=&amp;#34;vsftpd&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# --- å›æµè§„åˆ™ (Hairpin NAT) ---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# åªæœ‰å½“å†…ç½‘è®¿é—®å†…ç½‘æœåŠ¡å™¨æ—¶æ‰è§¦å‘ã€‚å»ºè®®å°†æ‰€æœ‰å†…ç½‘æœåŠ¡å™¨æ”¾åœ¨ä¸€ä¸ªè§„åˆ™é‡Œï¼Œæˆ–è€…é€ä¸ªæ·»åŠ ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# ç»™ DERP æ·»åŠ å›æµ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=srcnat src-address=10.20.20.0/24 dst-address=10.20.20.4 protocol=tcp dst-port=12340 action=masquerade comment=&amp;#34;Hairpin DERP TCP&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=srcnat src-address=10.20.20.0/24 dst-address=10.20.20.4 protocol=udp dst-port=3478 action=masquerade comment=&amp;#34;Hairpin DERP STUN&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# ç»™ Web æœåŠ¡æ·»åŠ å›æµ (å‡è®¾å†…ç½‘ IP ä¸º 10.20.20.5)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;add chain=srcnat src-address=10.20.20.0/24 dst-address=10.20.20.5 protocol=tcp dst-port=12335 action=masquerade comment=&amp;#34;Hairpin Web&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="3-æ“ä½œå»ºè®®ä½¿ç”¨åœ°å€åˆ—è¡¨ç®€åŒ–å›æµ"&gt;3. æ“ä½œå»ºè®®ï¼šä½¿ç”¨â€œåœ°å€åˆ—è¡¨â€ç®€åŒ–å›æµ&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æœ‰å¾ˆå¤šå†…ç½‘æœåŠ¡å™¨éœ€è¦å›æµï¼Œä¸€æ¡æ¡åŠ  srcnat å¾ˆéº»çƒ¦ã€‚ä½ å¯ä»¥è¿™æ ·åšï¼š&lt;/p&gt;</description></item><item><title>04.RouterOSä½¿ç”¨queue_treeé…ç½®æµé‡æ•´å½¢</title><link>https://hanigege.github.io/posts/routers/04.routeros%E4%BD%BF%E7%94%A8queue_tree%E9%85%8D%E7%BD%AE%E6%B5%81%E9%87%8F%E6%95%B4%E5%BD%A2/</link><pubDate>Fri, 27 Feb 2026 16:59:27 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/04.routeros%E4%BD%BF%E7%94%A8queue_tree%E9%85%8D%E7%BD%AE%E6%B5%81%E9%87%8F%E6%95%B4%E5%BD%A2/</guid><description>&lt;h1 id="æœ¬æ•™ç¨‹ä»‹ç»ä½¿ç”¨-queue-tree-å¼€å¯-ros-çš„æµæ§åŠŸèƒ½"&gt;æœ¬æ•™ç¨‹ä»‹ç»ä½¿ç”¨ queue tree å¼€å¯ ROS çš„æµæ§åŠŸèƒ½&lt;/h1&gt;
&lt;p&gt;æœ¬æ•™ç¨‹ä»‹ç»å¦‚ä½•ä½¿ç”¨ RouterOS çš„ &lt;code&gt;queue tree&lt;/code&gt; å®ç°æµé‡æ•´å½¢ã€‚
æ–‡ç« åˆ†æˆä¸¤ç§æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸º DNSã€Web ç­‰å°åŒ…æµé‡è®¾ç½®æ›´é«˜ä¼˜å…ˆçº§&lt;/strong&gt;ï¼Œæé«˜ç½‘é¡µå“åº”é€Ÿåº¦ï¼Œé€‚åˆä¸€èˆ¬ç”¨æˆ·ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºå®½å¸¦åŠç‰¹å®šæœåŠ¡è®¾å®šä¸Šä¼ /ä¸‹è½½é™é€Ÿï¼Œå¹¶æŒ‰æœåŠ¡è®¾å®šä¼˜å…ˆçº§&lt;/strong&gt;ï¼Œé€‚åˆ BT/PT ç­‰å¤§æµé‡åº”ç”¨ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="1ä¸º-dnsweb-ç­‰å°åŒ…æµé‡è®¾ç½®æ›´é«˜ä¼˜å…ˆçº§æé«˜ç½‘é¡µå“åº”é€Ÿåº¦é€‚åˆä¸€èˆ¬ç”¨æˆ·ä½¿ç”¨"&gt;1ã€ä¸º DNSã€Web ç­‰å°åŒ…æµé‡è®¾ç½®æ›´é«˜ä¼˜å…ˆçº§ï¼Œæé«˜ç½‘é¡µå“åº”é€Ÿåº¦ï¼Œé€‚åˆä¸€èˆ¬ç”¨æˆ·ä½¿ç”¨ã€‚&lt;/h2&gt;
&lt;h3 id="æ·»åŠ queue-type"&gt;æ·»åŠ queue type&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;128&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;30ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;128&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;4096.0KiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;3ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Dns_Up
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;256&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;30ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;128&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;8.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;3ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Dns_Down
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;50ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;8.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;5ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Small_Up
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;50ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;16.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;5ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Small_Down
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;50ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;2048&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;64.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1400&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;5ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Web_Up
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1024&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;50ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;4096&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;128.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1500&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;5ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Web_Down
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1024&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;100ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;8192&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;128.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1400&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;8ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Stream_Up
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;2048&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;100ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;10240&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;256.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1500&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;8ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Stream_Down
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;2048&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;100ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;10240&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;128.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1400&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;20ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Nomark_Up
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/queue type add fq-codel-flows&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;4096&lt;/span&gt; fq-codel-interval&lt;span style="color:#f92672"&gt;=&lt;/span&gt;100ms fq-codel-limit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;10240&lt;/span&gt; fq-codel-memlimit&lt;span style="color:#f92672"&gt;=&lt;/span&gt;256.0MiB fq-codel-quantum&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1500&lt;/span&gt; fq-codel-target&lt;span style="color:#f92672"&gt;=&lt;/span&gt;15ms kind&lt;span style="color:#f92672"&gt;=&lt;/span&gt;fq-codel name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Fq_Codel_Nomark_Down
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="é…ç½®-queue-tree"&gt;é…ç½® queue tree&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;è‡ªè¡Œä¿®æ”¹æ¡¥çš„åç§°ï¼ˆbridge1ï¼‰åŠpppoeæ‹¨å·å£ï¼ˆpppoe-out1ï¼‰çš„åç§°&lt;/p&gt;</description></item><item><title>03.RouterOSé…ç½®FakeIP</title><link>https://hanigege.github.io/posts/routers/03.routeros%E9%85%8D%E7%BD%AEfakeip/</link><pubDate>Fri, 27 Feb 2026 16:41:22 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/03.routeros%E9%85%8D%E7%BD%AEfakeip/</guid><description>&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;æœ¬æ–‡ä»‹ç»ä½¿ç”¨ FakeIP åˆ†æµæ³•å®ç°å±€åŸŸç½‘å†…è®¾å¤‡é€æ˜ä»£ç†æ—¶ï¼Œä¸»è·¯ç”± RouterOS éƒ¨åˆ†çš„è®¾ç½®ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;æ³¨æ„ï¼šsing-box åŠ mosdns çš„å…·ä½“é…ç½®ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ä½œè€…ï¼šTom
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ç¯å¢ƒè®¾å®š"&gt;ç¯å¢ƒè®¾å®š&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;sing-box IP&lt;/strong&gt;: IPv4 &lt;code&gt;10.0.0.2&lt;/code&gt;, IPv6 &lt;code&gt;dc00::2222&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FakeIP ç½‘æ®µ&lt;/strong&gt;: IPv4 &lt;code&gt;28.0.0.0/8&lt;/code&gt;, IPv6 &lt;code&gt;f2b0::/18&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;: å¼€å¯ FastTrack å Mangle ä¼šå¤±æ•ˆï¼Œå»ºè®®ä½¿ç”¨ Route æˆ– Routing Rules æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="æ–¹æ¡ˆ-1ä½¿ç”¨-mangle-æ‰“æ ‡ç­¾æ–¹å¼"&gt;æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Mangle æ‰“æ ‡ç­¾æ–¹å¼&lt;/h2&gt;
&lt;h3 id="ipv4-éƒ¨åˆ†"&gt;IPv4 éƒ¨åˆ†&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ·»åŠ sing-box-v4è·¯ç”±è¡¨&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; /routing table add name=sing-box-v4 fib
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®åœ°å€åˆ—è¡¨&lt;/strong&gt;ï¼ˆåœ°å€åˆ—è¡¨ä¸­æ–°å¢proxy_ipv4åˆ—è¡¨ï¼Œå¡«å…¥fakeipç½‘æ®µã€tg v4ç½‘æ®µã€å¥ˆè²v4ç½‘æ®µï¼‰ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=28.0.0.0/8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=1.1.1.1/32
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=1.0.0.1/32
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=8.8.8.8/32
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=8.8.4.4/32
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=8.41.4.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=23.23.189.144/28
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=23.246.0.0/18
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=34.195.253.0/25
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=37.77.184.0/21
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=38.72.126.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=45.57.0.0/17
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=52.24.178.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=52.35.140.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=54.204.25.0/28
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=54.213.167.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=64.120.128.0/17
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=66.197.128.0/17
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=69.53.224.0/19
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=103.87.204.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=108.175.32.0/20
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=185.2.220.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=185.9.188.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=192.173.64.0/18
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=198.38.96.0/19
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=198.45.48.0/20
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=203.75.84.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=203.198.13.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=203.198.80.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=207.45.72.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=208.75.76.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=210.0.153.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=91.108.56.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=91.108.4.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=91.108.8.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=91.108.16.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=91.108.12.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=149.154.160.0/20
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=91.105.192.0/23
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=91.108.20.0/22
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=185.76.151.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall address-list add list=proxy_ipv4 address=95.161.64.0/20
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºç›®çš„ipä¸ºproxy_ipv4åœ°å€åˆ—è¡¨çš„è¿æ¥æ‰“ä¸Šâ€œsing-box-v4â€æ ‡è®°&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip firewall mangle add action=mark-routing chain=prerouting dst-address-list=proxy_ipv4 new-routing-mark=sing-box-v4 passthrough=yes
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="4"&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®è·¯ç”±è¡¨sing-box-v4çš„ä¸‹ä¸€è·³ç½‘å…³ä¸ºsing-box&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip route add dst-address=0.0.0.0/0 gateway=10.0.0.2 routing-table=sing-box-v4
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ipv6-éƒ¨åˆ†"&gt;IPv6 éƒ¨åˆ†&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ·»åŠ sing-box-v6è·¯ç”±è¡¨&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/routing table add name=sing-box-v6 fib
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€åˆ—è¡¨æ·»åŠ æ·»åŠ fakev6åŠtg v6ç½‘æ®µ&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall address-list add address=f2b0::/18 list=proxy_ipv6
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall address-list add address=2001:b28:f23d::/48 list=proxy_ipv6
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall address-list add address=2001:b28:f23f::/48 list=proxy_ipv6
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall address-list add address=2001:67c:4e8::/48 list=proxy_ipv6
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall address-list add address=2001:b28:f23c::/48 list=proxy_ipv6
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall address-list add address=2a0a:f280::/32 list=proxy_ipv6
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºç›®çš„ipä¸ºproxy_ipv6çš„è¿æ¥æ‰“æ ‡è®°&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall mangle add action=mark-routing chain=prerouting dst-address-list=proxy_ipv6 new-routing-mark=sing-box-v6
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è®¾ç½®è·¯ç”±è¡¨sing-box-v6çš„ä¸‹ä¸€è·³ç½‘å…³ä¸ºsing-boxã€‚æ³¨æ„gatewayä¸ºsing-boxçš„IPv6&lt;/strong&gt;ï¼š&lt;/p&gt;</description></item><item><title>02.RouterOSå¼€å¯IPv6å¹¶é…ç½®é˜²ç«å¢™</title><link>https://hanigege.github.io/posts/routers/02.routeros%E5%BC%80%E5%90%AFipv6%E5%B9%B6%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99/</link><pubDate>Fri, 27 Feb 2026 16:32:31 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/02.routeros%E5%BC%80%E5%90%AFipv6%E5%B9%B6%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99/</guid><description>&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;æœ¬æ–‡ä»‹ç» RouterOS å¦‚ä½•å¼€å¯ IPv6ã€‚ä»¥ &lt;span style="font-weight:bold"&gt;**NAT6**&lt;/span&gt; æ¨¡å¼ä¸ºä¾‹ï¼ŒIPv6 å†…ç½‘ç½‘æ®µé»˜è®¤ä¸º
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;`dc00::/64`&lt;/span&gt;ï¼ŒRouterOS &lt;span style="color:#e6db74"&gt;`bridge1`&lt;/span&gt; çš„ IPv6 å†…ç½‘åœ°å€ä¸º &lt;span style="color:#e6db74"&gt;`dc00::1111/64`&lt;/span&gt;ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; æ¡¥æ¥æ¥å£ &lt;span style="color:#e6db74"&gt;`bridge1`&lt;/span&gt;ã€æ‹¨å·æ¥å£ &lt;span style="color:#e6db74"&gt;`pppoe-out1`&lt;/span&gt; åç§°è‹¥ä¸åŒåˆ™è‡ªè¡Œæ›¿æ¢ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ä½œè€…ï¼šTom
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="1-å¼€å¯-ipv6-æ¨¡å—"&gt;1. å¼€å¯ IPv6 æ¨¡å—&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 settings set disable-ipv6=no
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="2-è·å–-ipv6-å‰ç¼€-prefix"&gt;2. è·å– IPv6 å‰ç¼€ (Prefix)&lt;/h2&gt;
&lt;p&gt;ä»è¿è¥å•†å¤„è·å– IPv6 PDï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 dhcp-client add interface=pppoe-out1 pool-name=dhcpv6-gua-pool1 pool-prefix-length=60 request=prefix
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="3-æ·»åŠ å±€åŸŸç½‘-ula-åœ°å€æ± "&gt;3. æ·»åŠ å±€åŸŸç½‘ ULA åœ°å€æ± &lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 pool add name=dhcpv6-ula-pool1 prefix=dc00::/64 prefix-length=64
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="4-é…ç½®æ¥å£åœ°å€"&gt;4. é…ç½®æ¥å£åœ°å€&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®— EUI-64 åœ°å€&lt;/strong&gt;ï¼šå¯ä½¿ç”¨ &lt;a href="https://eui64-calc.princelle.org/"&gt;EUI-64 è®¡ç®—å™¨&lt;/a&gt;ï¼Œæˆ–ç›´æ¥ä½¿ç”¨ &lt;code&gt;::1&lt;/code&gt;,æˆ–ä½¿ç”¨ä¸Šé¢è®¡ç®—å¾—åˆ°çš„åç¼€ï¼ˆä¾‹å¦‚::BF24:12FF:FEE1:E81Bï¼‰é…ç½®pppoe-out1çš„GUAåœ°å€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½® PPPoE æ¥å£ GUA åœ°å€&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 address add address=::BF24:12FF:FEE1:E81B/64 from-pool=dhcpv6-gua-pool1 interface=pppoe-out1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é…ç½® Bridge æ¥å£ ULA åœ°å€ï¼Œé»˜è®¤dc00::1111ï¼ˆå¯è‡ªè¡Œä¿®æ”¹ï¼‰&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 address add address=dc00::1111/64 from-pool=dhcpv6-ula-pool1 interface=bridge1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="5-å¼€å¯-nat6-æºåœ°å€ä¼ªè£…"&gt;5. å¼€å¯ NAT6 (æºåœ°å€ä¼ªè£…)&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ipv6 firewall nat add action=masquerade chain=srcnat src-address=dc00::/64
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="6-é…ç½®é‚»å±…å‘ç°-nd"&gt;6. é…ç½®é‚»å±…å‘ç° (ND)&lt;/h2&gt;
&lt;p&gt;ç¦ç”¨é»˜è®¤ ND é…ç½®ï¼Œå¹¶æ–°å»ºé…ç½®ã€‚å»ºè®®ä¸å¹¿æ’­ IPv6 DNSã€‚&lt;/p&gt;</description></item><item><title>01.RouterOSè”ç½‘åŸºæœ¬é…ç½®åŠIPv4é˜²ç«å¢™</title><link>https://hanigege.github.io/posts/routers/01.routeros%E8%81%94%E7%BD%91%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8Aipv4%E9%98%B2%E7%81%AB%E5%A2%99/</link><pubDate>Fri, 27 Feb 2026 16:19:29 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/01.routeros%E8%81%94%E7%BD%91%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8Aipv4%E9%98%B2%E7%81%AB%E5%A2%99/</guid><description>&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;æœ¬æ–‡ä»‹ç» RouterOS æ‹¨å·ã€é…ç½® DHCP æœåŠ¡å™¨ã€é…ç½® DNSã€å¼€å¯ IPv4 é˜²ç«å¢™ç­‰é€šç½‘çš„åŸºç¡€é…ç½®ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;æ¡¥æ¥æ¥å£ &lt;span style="color:#e6db74"&gt;`bridge1`&lt;/span&gt;ã€æ‹¨å·æ¥å£ &lt;span style="color:#e6db74"&gt;`pppoe-out1`&lt;/span&gt; åç§°è‹¥ä¸åŒåˆ™è‡ªè¡Œæ›¿æ¢ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ä½œè€…ï¼šTom
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="1-pppoe-æ‹¨å·é…ç½®"&gt;1. PPPoE æ‹¨å·é…ç½®&lt;/h2&gt;
&lt;p&gt;æ‰‹åŠ¨é…ç½® &lt;code&gt;pppoe-out1&lt;/code&gt; æ¥å£æ‹¨å·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;User&lt;/strong&gt;: å¡«å…¥å®½å¸¦è´¦å·&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Password&lt;/strong&gt;: å¡«å…¥å®½å¸¦å¯†ç &lt;/li&gt;
&lt;li&gt;å¦‚æœä¸ä½¿ç”¨è¿è¥å•†æä¾›çš„ DNSï¼Œå¯ä¸å‹¾é€‰ &lt;strong&gt;Use Peer DNS&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="assets/0.png" alt="0"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨&lt;/strong&gt;ï¼šæ¥å£å‰å‡ºç° â€œRâ€ ä»£è¡¨æ‹¨å·æˆåŠŸã€‚æ‹¨å·æˆåŠŸåå»ºè®®å…ˆç¦ç”¨ï¼Œå¾…é˜²ç«å¢™é…ç½®å®Œæ¯•åå†å¼€å¯ï¼
&lt;img src="assets/2.png" alt="2"&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="2-é…ç½®-dhcp-æœåŠ¡å™¨"&gt;2. é…ç½® DHCP æœåŠ¡å™¨&lt;/h2&gt;
&lt;p&gt;DHCP IP èŒƒå›´ä¸º &lt;code&gt;10.0.0.100-10.0.0.250&lt;/code&gt;ï¼Œç½‘å…³å’Œ DNS é»˜è®¤ä¸º ROSã€‚å¦‚æœå¸Œæœ›å…¨å±€é…ç½®é€æ˜ä»£ç†ï¼Œ&lt;code&gt;dns-server&lt;/code&gt; å¯é…ç½®ä¸º mosdnsã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip pool add name=dhcpv4-pool1 ranges=10.0.0.100-10.0.0.250
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip dhcp-server add name=dhcpv4-server1 interface=bridge1 address-pool=dhcpv4-pool1 lease-time=1d
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip dhcp-server network add address=10.0.0.0/24 gateway=10.0.0.1 dns-server=10.0.0.1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="assets/3.png" alt="3"&gt;
&lt;img src="assets/4.png" alt="4"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="assets/5.png" alt="5"&gt;&lt;/p&gt;
&lt;h2 id="3-é…ç½®-dns"&gt;3. é…ç½® DNS&lt;/h2&gt;
&lt;p&gt;è®¾ç½® ROS çš„ä¸Šæ¸¸ DNSï¼Œæ­¤å¤„å…ˆè®¾ç½® &lt;code&gt;223.5.5.5&lt;/code&gt;ï¼Œä¹Ÿå¯è‡ªå®šä¹‰å¡«å…¥è¿è¥å•†åˆ†é…çš„ DNSã€‚&lt;/p&gt;</description></item><item><title>00.RouterOSåˆå§‹åŒ–åŠåŸºç¡€é…ç½®</title><link>https://hanigege.github.io/posts/routers/00.routeros%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</link><pubDate>Fri, 27 Feb 2026 15:52:26 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/00.routeros%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</guid><description>&lt;hr&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 00.RouterOS åˆå§‹åŒ–åŠåŸºç¡€é…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ä½œè€…ï¼šTom
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç¬¬ä¸€æ¬¡è¿›å…¥-routeros"&gt;ç¬¬ä¸€æ¬¡è¿›å…¥ RouterOS&lt;/h2&gt;
&lt;p&gt;å…ˆæ¢å¤åŸå‚è®¾ç½®ï¼Œä½¿ç”¨ &lt;strong&gt;Winbox&lt;/strong&gt; ç™»å½•ï¼ˆé€šè¿‡ MAC åœ°å€è®¿é—®åå°é…ç½®ï¼‰ã€‚&lt;br&gt;
å»ºè®®å…ˆé…ç½®é˜²ç«å¢™ï¼Œå†å¼€å¯ PPPoE æ¥å£è®¾ç½®å¸å·å¯†ç è”ç½‘ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/system reset-configuration
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç¡®è®¤æ¥å£å¹¶ä¿®æ”¹åç§°"&gt;ç¡®è®¤æ¥å£å¹¶ä¿®æ”¹åç§°&lt;/h2&gt;
&lt;p&gt;ç¡®è®¤ç½‘å£åŠŸèƒ½ï¼ˆåŒºåˆ† lanã€wanï¼‰ï¼Œå¹¶é‡å‘½åä¸ºæ–¹ä¾¿åç»­æ“ä½œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/interface set ether1 name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;lan
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/interface set ether2 name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;wan
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="assets/0.png" alt="å›¾ä¾‹"&gt;&lt;/p&gt;
&lt;h2 id="å»ºç«‹ç½‘æ¡¥bridge"&gt;å»ºç«‹ç½‘æ¡¥ï¼ˆBridgeï¼‰&lt;/h2&gt;
&lt;p&gt;å°†æ‰€æœ‰ LAN æ¥å£æ·»åŠ è¿›æ¡¥ï¼ˆbridgeï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/interface bridge add name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;bridge1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/interface bridge port add bridge&lt;span style="color:#f92672"&gt;=&lt;/span&gt;bridge1 interface&lt;span style="color:#f92672"&gt;=&lt;/span&gt;lan
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="assets/1.png" alt="1"&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šå¦‚æœåŒç½‘å£ï¼Œå¯ä¸å»ºbridgeï¼Œç›´æ¥ä½¿ç”¨lanå£ï¼Œå¹¶æ¥å…¥ç‰©ç†äº¤æ¢æœºã€‚ä½†ä¸ºæ–¹ä¾¿ç®¡ç†
å¹¶ä¸ºåæœŸvlanç­‰è™šæ‹Ÿæ¥å£å¹¶å…¥bridgeåšå‡†å¤‡ï¼Œå»ºè®®å»ºç«‹bridgeã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="ä¸º-bridge1-å’Œ-wan-è®¾ç½®-ip"&gt;ä¸º bridge1 å’Œ wan è®¾ç½® IP&lt;/h2&gt;
&lt;p&gt;ä¸ºbridge1è®¾ç½®IPã€‚æœ¬æ•™ç¨‹ä»¥bridge1ä¸ºä¾‹ï¼Œå³rosæœ¬æœºipä¸º10.0.0.1/24
ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip address add interface&lt;span style="color:#f92672"&gt;=&lt;/span&gt;bridge1 address&lt;span style="color:#f92672"&gt;=&lt;/span&gt;10.0.0.1/24 network&lt;span style="color:#f92672"&gt;=&lt;/span&gt;10.0.0.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="assets/2.png" alt="2"&gt;&lt;/p&gt;
&lt;h2 id="è®¾ç½®æ—¶åŒºä¸-ntp-æœåŠ¡å™¨"&gt;è®¾ç½®æ—¶åŒºä¸ NTP æœåŠ¡å™¨&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/system clock set time-zone-name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Asia/Shanghai&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/system clock manual set time-zone&lt;span style="color:#f92672"&gt;=&lt;/span&gt;+08:00
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/system ntp client set enabled&lt;span style="color:#f92672"&gt;=&lt;/span&gt;yes servers&lt;span style="color:#f92672"&gt;=&lt;/span&gt;cn.pool.ntp.org,ntp1.aliyun.com,time1.cloud.tencent.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="å…³é—­æ‰€æœ‰ä¸éœ€è¦çš„æœåŠ¡åŠç«¯å£æ›´æ”¹winboxç™»é™†ç«¯å£ä¸º5391å¯è‡ªå®šä¹‰å¹¶å¼€å¯ä»…å…è®¸å†…ç½‘è®¿é—®æ³¨æ„ä¸‹æ–¹address1000024ä¿®æ”¹ä¸ºè‡ªå·±çš„å†…ç½‘ç½‘æ®µ"&gt;å…³é—­æ‰€æœ‰ä¸éœ€è¦çš„æœåŠ¡åŠç«¯å£ï¼Œæ›´æ”¹Winboxç™»é™†ç«¯å£ä¸º5391ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ï¼Œå¹¶å¼€å¯ä»…å…è®¸å†…ç½‘è®¿é—®ï¼Œæ³¨æ„ä¸‹æ–¹address=10.0.0.0/24ä¿®æ”¹ä¸ºè‡ªå·±çš„å†…ç½‘ç½‘æ®µ&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip smb set enabled&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip smb shares disable numbers&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip ssh set forwarding-enabled&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip socks set enabled&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip upnp set enabled&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip proxy set enabled&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service disable api
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service disable api-ssl
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service disable ftp
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service disable ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service disable telnet
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service disable www
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service disable www-ssl
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/ip service set winbox port&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;5391&lt;/span&gt; address&lt;span style="color:#f92672"&gt;=&lt;/span&gt;10.0.0.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/tool bandwidth-server set enabled&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="åˆ›å»ºç®¡ç†å‘˜å¸å·å¹¶ç¦ç”¨é»˜è®¤è´¦å·"&gt;åˆ›å»ºç®¡ç†å‘˜å¸å·å¹¶ç¦ç”¨é»˜è®¤è´¦å·&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/user add name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;ç”¨æˆ·å password&lt;span style="color:#f92672"&gt;=&lt;/span&gt;å¯†ç  group&lt;span style="color:#f92672"&gt;=&lt;/span&gt;full address&lt;span style="color:#f92672"&gt;=&lt;/span&gt;10.0.0.0/24
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç¦ç”¨é»˜è®¤è´¦æˆ·"&gt;ç¦ç”¨é»˜è®¤è´¦æˆ·&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/user disable admin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šè¯·å…ˆç¡®è®¤æ–°åˆ›å»ºçš„ç”¨æˆ·åå’Œå¯†ç å¯ä»¥æ­£å¸¸ç™»å½•ï¼Œå†ç¦ç”¨é»˜è®¤ç®¡ç†å‘˜å¸å·ã€‚&lt;/p&gt;</description></item><item><title>2026ç‰ˆUbuntu&amp;Debianä¸‹iptables+mssé˜²ç«å¢™ç®¡ç†ä¸€é”®è„šæœ¬</title><link>https://hanigege.github.io/posts/linux/ubuntu2026iptables+mss%E9%98%B2%E7%81%AB%E5%A2%99%E7%AE%A1%E7%90%86%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC/</link><pubDate>Fri, 27 Feb 2026 14:27:51 +0800</pubDate><guid>https://hanigege.github.io/posts/linux/ubuntu2026iptables+mss%E9%98%B2%E7%81%AB%E5%A2%99%E7%AE%A1%E7%90%86%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC/</guid><description>&lt;h3 id="è¯´æ˜æ”¯æŒipv4ipv6è‡ªåŠ¨æ£€æµ‹æœ‰æ— ipv6æ·»åŠ mssè‡ªåŠ¨æ£€æµ‹sshç«¯å£ç­‰å¾ˆæ–¹ä¾¿"&gt;è¯´æ˜ï¼šæ”¯æŒipv4&amp;amp;ipv6,è‡ªåŠ¨æ£€æµ‹æœ‰æ— ipv6ï¼Œæ·»åŠ mss.è‡ªåŠ¨æ£€æµ‹sshç«¯å£ç­‰ï¼Œå¾ˆæ–¹ä¾¿&lt;/h3&gt;
&lt;h2 id="æˆåŠŸçš„æ­¥éª¤ä¸æ–¹æ³•"&gt;æˆåŠŸçš„æ­¥éª¤ä¸æ–¹æ³•&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nano iptables_manager.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç›´æ¥å¤åˆ¶å¹¶æ‰§è¡Œä»¥ä¸‹å®Œæ•´ä»£ç è¦†ç›–åŸè„šæœ¬"&gt;ç›´æ¥å¤åˆ¶å¹¶æ‰§è¡Œä»¥ä¸‹å®Œæ•´ä»£ç è¦†ç›–åŸè„šæœ¬ï¼š&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cat &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt; &amp;#39;EOF&amp;#39; &amp;gt; iptables_manager.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;# ==========================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;# è„šæœ¬åç§°ï¼šé«˜çº§é˜²ç«å¢™ç®¡ç†å·¥å…· (Debian/Ubuntu ä¸“å±è‡ªé€‚åº”ç‰ˆ V4.1)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;# æ ¸å¿ƒå‡çº§ï¼šåŸºäºè½¯ä»¶å’Œå†…æ ¸æ¨¡å—çš„æ·±åº¦æ™ºèƒ½æ£€æµ‹ï¼Œæ¶ˆé™¤å†—ä½™è§„åˆ™
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;# ==========================================================
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;gl_lv=&amp;#39;\033[32m&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;gl_huang=&amp;#39;\033[33m&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;gl_hong=&amp;#39;\033[31m&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;gl_bai=&amp;#39;\033[0m&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;root_use() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ &amp;#34;$EUID&amp;#34; -ne 0 ] &amp;amp;&amp;amp; echo -e &amp;#34;${gl_huang}æç¤º: ${gl_bai}éœ€ root æƒé™è¿è¡Œï¼&amp;#34; &amp;amp;&amp;amp; exit 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;check_deps() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if ! dpkg -l | grep -qw iptables-persistent; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_huang}æ£€æµ‹åˆ°æœªå®‰è£…æŒä¹…åŒ–ç»„ä»¶ï¼Œæ­£åœ¨è‡ªåŠ¨å®‰è£…...${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; DEBIAN_FRONTEND=noninteractive apt-get install -y iptables iptables-persistent netfilter-persistent
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_lv}ä¾èµ–å®‰è£…å®Œæˆï¼${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; sleep 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;root_use
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;check_deps
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;if command -v ip6tables &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; ip addr 2&amp;gt;/dev/null | grep -q &amp;#34;inet6 .* global&amp;#34;; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; CMDS=&amp;#34;iptables ip6tables&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; HAS_IPV6=true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; CMDS=&amp;#34;iptables&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; HAS_IPV6=false
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;save_rules() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_huang}æ­£åœ¨æŒä¹…åŒ–è§„åˆ™...${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; mkdir -p /etc/iptables
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; netfilter-persistent save &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 || {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; iptables-save &amp;gt; /etc/iptables/rules.v4
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ &amp;#34;$HAS_IPV6&amp;#34; == true ] &amp;amp;&amp;amp; ip6tables-save &amp;gt; /etc/iptables/rules.v6
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_lv}è§„åˆ™ä¿å­˜æˆåŠŸã€‚${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;get_ssh_port() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; local port=$(grep -i &amp;#34;^Port&amp;#34; /etc/ssh/sshd_config 2&amp;gt;/dev/null | awk &amp;#39;{print $2}&amp;#39; | head -n 1)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ -z &amp;#34;$port&amp;#34; ] &amp;amp;&amp;amp; port=22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34;$port&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;view_rules() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; for cmd in $CMDS; do
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;\n${gl_lv}=== $cmd filter è¡¨çŠ¶æ€ ===${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -L INPUT -n -v --line-numbers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_huang}--- FORWARD è½¬å‘çŠ¶æ€ ---${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -L FORWARD -n -v --line-numbers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_huang}--- MSS é’³åˆ¶çŠ¶æ€ (mangle è¡¨) ---${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -t mangle -L FORWARD -n -v --line-numbers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; done
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; read -p &amp;#34;æŒ‰å›è½¦ç»§ç»­...&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;allow_port_flexible() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; read -e -p &amp;#34;è¯·è¾“å…¥è¦æ”¾è¡Œçš„ç«¯å£å·: &amp;#34; port
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ -z &amp;#34;$port&amp;#34; ] &amp;amp;&amp;amp; return
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;1. TCP 2. UDP 3. åŒæ—¶æ”¾è¡Œ&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; read -p &amp;#34;é€‰æ‹© (1-3): &amp;#34; p_choice
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; for cmd in $CMDS; do
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; case $p_choice in
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 1) $cmd -I INPUT 4 -p tcp --dport &amp;#34;$port&amp;#34; -j ACCEPT ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 2) $cmd -I INPUT 4 -p udp --dport &amp;#34;$port&amp;#34; -j ACCEPT ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 3) 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -I INPUT 4 -p tcp --dport &amp;#34;$port&amp;#34; -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -I INPUT 4 -p udp --dport &amp;#34;$port&amp;#34; -j ACCEPT 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; esac
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; done
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; save_rules
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;block_ip() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; read -e -p &amp;#34;è¾“å…¥è¦å±è”½çš„ IP: &amp;#34; tip
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ -z &amp;#34;$tip&amp;#34; ] &amp;amp;&amp;amp; return
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if [[ &amp;#34;$tip&amp;#34; == *&amp;#34;:&amp;#34;* ]]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if [ &amp;#34;$HAS_IPV6&amp;#34; == true ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ip6tables -I INPUT 1 -s &amp;#34;$tip&amp;#34; -j DROP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_hong}ç³»ç»Ÿæœªå¼€å¯ IPv6ï¼Œæ— æ³•æ·»åŠ è¯¥è§„åˆ™ã€‚${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; sleep 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; return
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; iptables -I INPUT 1 -s &amp;#34;$tip&amp;#34; -j DROP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; save_rules
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;delete_rule() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;1. IPv4 (iptables)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ &amp;#34;$HAS_IPV6&amp;#34; == true ] &amp;amp;&amp;amp; echo &amp;#34;2. IPv6 (ip6tables)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; read -p &amp;#34;é€‰æ‹©åè®®: &amp;#34; p_choice
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; local cmd=&amp;#34;iptables&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if [ &amp;#34;$p_choice&amp;#34; == &amp;#34;2&amp;#34; ] &amp;amp;&amp;amp; [ &amp;#34;$HAS_IPV6&amp;#34; == true ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cmd=&amp;#34;ip6tables&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; elif [ &amp;#34;$p_choice&amp;#34; == &amp;#34;2&amp;#34; ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_hong}ç³»ç»Ÿä¸æ”¯æŒ IPv6ã€‚${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; sleep 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; return
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -L INPUT -n --line-numbers
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; read -p &amp;#34;è¾“å…¥è¦åˆ é™¤çš„ filter/INPUT è§„åˆ™ç¼–å·: &amp;#34; num
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ -n &amp;#34;$num&amp;#34; ] &amp;amp;&amp;amp; $cmd -D INPUT &amp;#34;$num&amp;#34; &amp;amp;&amp;amp; save_rules
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;close_all_but_ssh() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; local ssh_p=$(get_ssh_port)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_huang}å¼€å§‹æ‰§è¡Œè‡ªé€‚åº”æ·±åº¦åŠ å›º...${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; sysctl -w net.ipv4.ip_forward=1 &amp;gt;/dev/null 2&amp;gt;&amp;amp;1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; [ &amp;#34;$HAS_IPV6&amp;#34; == true ] &amp;amp;&amp;amp; sysctl -w net.ipv6.conf.all.forwarding=1 &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 || true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; for cmd in $CMDS; do
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -P INPUT ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -P FORWARD ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -L INPUT --line-numbers | grep -vE &amp;#34;ts-|DOCKER&amp;#34; | awk &amp;#39;/^[0-9]/ {print $1}&amp;#39; | sort -nr | xargs -r -I{} $cmd -D INPUT {} 2&amp;gt;/dev/null
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -F FORWARD
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -i lo -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if $cmd -L ts-input &amp;gt;/dev/null 2&amp;gt;&amp;amp;1; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -D INPUT -j ts-input 2&amp;gt;/dev/null || true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -I INPUT 3 -j ts-input
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p tcp --dport &amp;#34;$ssh_p&amp;#34; -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; # è§„èŒƒ ICMP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if [ &amp;#34;$cmd&amp;#34; == &amp;#34;iptables&amp;#34; ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/s --limit-burst 5 -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p icmp --icmp-type 3 -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p icmp --icmp-type 11 -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p icmp -j DROP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; for type in 2 133 134 135 136 137; do
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p ipv6-icmp --icmpv6-type $type -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; done
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p ipv6-icmp --icmpv6-type echo-request -m limit --limit 1/s --limit-burst 5 -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A INPUT -p ipv6-icmp -j DROP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if $cmd -L ts-forward &amp;gt;/dev/null 2&amp;gt;&amp;amp;1; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -D FORWARD -j ts-forward 2&amp;gt;/dev/null || true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -I FORWARD 1 -j ts-forward
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; # æ ¸å¿ƒä¼˜åŒ–ï¼šæ™ºèƒ½ç¯å¢ƒæ£€æµ‹ (æ£€æµ‹è½¯ä»¶å®‰è£…çŠ¶æ€è€Œéç½‘å¡çŠ¶æ€)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if command -v docker &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 || command -v dockerd &amp;gt;/dev/null 2&amp;gt;&amp;amp;1; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -i docker+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -o docker+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if command -v tailscaled &amp;gt;/dev/null 2&amp;gt;&amp;amp;1; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -i tailscale+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -o tailscale+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if command -v wg &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 || lsmod | grep -q wireguard; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -i wg+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -o wg+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if command -v openvpn &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 || [ -c /dev/net/tun ]; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -i tun+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -o tun+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if command -v pppd &amp;gt;/dev/null 2&amp;gt;&amp;amp;1; then
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -i ppp+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -o ppp+ -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -P INPUT DROP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -P FORWARD DROP
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; # åŒæ ˆ MSS é’³åˆ¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -t mangle -F FORWARD
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -t mangle -A FORWARD -p tcp --tcp-flags SYN,RST SYN -j TCPMSS --clamp-mss-to-pmtu 2&amp;gt;/dev/null || true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; done
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; save_rules
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_lv}æ·±åº¦åŠ å›ºåŠ MSS ç½‘ç»œä¼˜åŒ–å®Œæˆï¼å†—ä½™è§„åˆ™å·²æ¸…ç†ã€‚${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; sleep 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;open_all_ports() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; for cmd in iptables ip6tables; do
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; command -v $cmd &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 || continue
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -P INPUT ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -P FORWARD ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -P OUTPUT ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -F
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -X 2&amp;gt;/dev/null || true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; $cmd -t mangle -F FORWARD 2&amp;gt;/dev/null || true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; done
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; save_rules
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_lv}é˜²ç«å¢™å·²é‡ç½®å…¨å¼€æ¨¡å¼ï¼ŒMSS é’³åˆ¶å·²æ¸…é™¤ã€‚${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; sleep 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;iptables_panel() {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; while true; do
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; clear
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_lv}===========================================${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34; é«˜çº§é˜²ç«å¢™ç®¡ç† (Debian/Ubuntu è‡ªé€‚åº”ç‰ˆ V4.1) &amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34; å½“å‰ IPv6 çŠ¶æ€: \c&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if [ &amp;#34;$HAS_IPV6&amp;#34; == true ]; then echo -e &amp;#34;${gl_lv}å·²å¯ç”¨${gl_bai}&amp;#34;; else echo -e &amp;#34;${gl_huang}æœªå¯ç”¨${gl_bai}&amp;#34;; fi
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34;${gl_lv}===========================================${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34; 1. æŸ¥çœ‹è§„åˆ™ (å« MSS é’³åˆ¶çŠ¶æ€)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34; 2. æ”¾è¡Œç«¯å£&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34; 3. å±è”½åœ°å€&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34; 4. åˆ é™¤è§„åˆ™&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34; 5. ${gl_hong}æ‰§è¡Œæ·±åº¦åŠ å›º (æ™ºèƒ½æ£€æµ‹ç¯å¢ƒï¼Œæ‹’ç»å†—ä½™è§„åˆ™)${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo -e &amp;#34; 6. ${gl_huang}ç´§æ€¥æ¢å¤å…¨å¼€ (é‡ç½®æ‰€æœ‰ç­–ç•¥)${gl_bai}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34; 7. æ‰‹åŠ¨æŒä¹…åŒ–ä¿å­˜&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34; 0. é€€å‡ºè„šæœ¬&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; echo &amp;#34;-------------------------------------------&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; read -e -p &amp;#34;è¯·é€‰æ‹©: &amp;#34; choice
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; case $choice in
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 1) view_rules ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 2) allow_port_flexible ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 3) block_ip ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 4) delete_rule ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 5) close_all_but_ssh ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 6) open_all_ports ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 7) save_rules; sleep 2 ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; 0) exit 0 ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; *) echo &amp;#34;æ— æ•ˆé€‰æ‹©&amp;#34;; sleep 1 ;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; esac
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; done
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;iptables_panel
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod +x iptables_manager.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./iptables_manager.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä½¿ç”¨æ³¨æ„"&gt;ä½¿ç”¨æ³¨æ„&lt;/h2&gt;
&lt;h4 id="æ‰§è¡Œåé€‰æ‹©-5ç³»ç»Ÿå°†åªæ ¹æ®ä½ çœŸå®å®‰è£…çš„ç»„ä»¶å†™å…¥å¿…éœ€çš„è½¬å‘è§„åˆ™"&gt;æ‰§è¡Œåé€‰æ‹© 5ï¼Œç³»ç»Ÿå°†åªæ ¹æ®ä½ çœŸå®å®‰è£…çš„ç»„ä»¶å†™å…¥å¿…éœ€çš„è½¬å‘è§„åˆ™ã€‚&lt;/h4&gt;</description></item><item><title>Debianä¸‹nvimæ ¼å¼åŒ–å…¨å®¶æ¡¶å®‰è£…</title><link>https://hanigege.github.io/posts/linux/debianmac%E4%B8%8Bnvim%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%85%A8%E5%AE%B6%E6%A1%B6%E5%AE%89%E8%A3%85/</link><pubDate>Fri, 27 Feb 2026 13:04:22 +0800</pubDate><guid>https://hanigege.github.io/posts/linux/debianmac%E4%B8%8Bnvim%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%85%A8%E5%AE%B6%E6%A1%B6%E5%AE%89%E8%A3%85/</guid><description>&lt;br&gt;
å®‰è£… Neovim (&gt;= 0.10.0)
&lt;h2 id="1-å®‰è£…neovim-debian13ubuntu2510è‡ªåŠ¨è·å–æœ€æ–°ç‰ˆå¿…é¡»æ˜¯é»˜è®¤--010x"&gt;1. å®‰è£…neovim (Debian13&amp;amp;Ubuntu25.10+)(è‡ªåŠ¨è·å–æœ€æ–°ç‰ˆï¼Œå¿…é¡»æ˜¯é»˜è®¤ &amp;gt;= 0.10.x)&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt update &amp;amp;&amp;amp; apt install neovim
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="éªŒè¯ç‰ˆæœ¬ä¿¡æ¯"&gt;éªŒè¯ç‰ˆæœ¬ä¿¡æ¯&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nvim --version | grep ^NVIM
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="å¦‚æœæ˜¯ä½ç‰ˆæœ¬ç³»ç»Ÿä¹Ÿå¯è‡ªè¡Œç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆ"&gt;å¦‚æœæ˜¯ä½ç‰ˆæœ¬ç³»ç»Ÿï¼Œä¹Ÿå¯è‡ªè¡Œç¼–è¯‘å®‰è£…ï¼ˆæœ€æ–°ç‰ˆï¼‰&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 1. å®‰è£…ç¼–è¯‘æ‰€å¿…é¡»çš„åŸºç¡€å·¥å…·å’Œç³»ç»Ÿä¾èµ–
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install ninja-build gettext cmake unzip curl build-essential git -y
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 2. æ‹‰å– Neovim æºç å¹¶åˆ‡æ¢åˆ°ç¨³å®šç‰ˆåˆ†æ”¯ (è§„é¿å¼€å‘ç‰ˆçš„æ½œåœ¨ bug)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/neovim/neovim.git ~/neovim-src
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd ~/neovim-src
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git checkout stable
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 3. ç¼–è¯‘å¹¶å…¨å±€å®‰è£… (åˆ©ç”¨å¤šæ ¸åŠ é€Ÿ)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;make CMAKE_BUILD_TYPE=Release -j$(nproc)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo make install
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# 4. æ¸…ç†è·¯å¾„ç¼“å­˜å¹¶éªŒè¯ç‰ˆæœ¬
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;hash -r
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nvim -v
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="å®‰è£…æ ¼å¼åŒ–ä¸å‰ªè´´æ¿ä¾èµ–ç¯å¢ƒ"&gt;å®‰è£…æ ¼å¼åŒ–ä¸å‰ªè´´æ¿ä¾èµ–ç¯å¢ƒ&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;è¦è®© conform.nvim æˆåŠŸè°ƒç”¨ prettierï¼Œä»¥åŠä¿è¯ç³»ç»Ÿä¸ Neovim ä¹‹é—´çš„å‰ªè´´æ¿äº¤äº’é¡ºç•…ï¼Œå¿…é¡»åœ¨æ“ä½œç³»ç»Ÿå±‚é¢å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>FreeBSD 15 PF ç»ˆæäº¤äº’å¼ç®¡ç†è„šæœ¬</title><link>https://hanigege.github.io/posts/freebsd/freebsd15-pf-js/</link><pubDate>Fri, 27 Feb 2026 08:44:18 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd15-pf-js/</guid><description>&lt;br&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202026-02-27%20at%2009.05.03@2x.png" alt="åˆ—è¡¨"&gt;&lt;/p&gt;
&lt;h2 id="ä¸€é”®æ‰§è¡Œè„šæœ¬"&gt;ä¸€é”®æ‰§è¡Œè„šæœ¬&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://raw.githubusercontent.com/hanigege/scripts/main/pf_manager.sh -o pf_manager.sh &amp;amp;&amp;amp; sh pf_manager.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Vyos Wireguard Ipv4</title><link>https://hanigege.github.io/posts/routers/vyos-wireguard-ipv4/</link><pubDate>Sun, 01 Jun 2025 20:42:39 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/vyos-wireguard-ipv4/</guid><description>&lt;h1 id="vyosä¸Šé…ç½®wireguard-ipv4"&gt;vyosä¸Šé…ç½®wireguard ï¼ˆIPV4ï¼‰&lt;/h1&gt;
&lt;h2 id="1-ç”Ÿæˆ-wireguard-å¯†é’¥"&gt;1. ç”Ÿæˆ WireGuard å¯†é’¥&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wg genkey | tee privatekey | wg pubkey &amp;gt; publickey
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;â€¢ privatekey æ–‡ä»¶ä¸­å­˜å‚¨ ç§é’¥&lt;/p&gt;
&lt;p&gt;â€¢ publickey æ–‡ä»¶ä¸­å­˜å‚¨ å…¬é’¥&lt;/p&gt;
&lt;p&gt;ç„¶åä½¿ç”¨ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cat privatekey
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŠŠç§é’¥å¡«å…¥ ç¬¬ä¸€æ­¥ çš„ &amp;lt;æœåŠ¡å™¨ç§é’¥&amp;gt; ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;é…ç½®wireguard:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set interfaces wireguard wg0 address &amp;#39;10.20.30.1/24&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set interfaces wireguard wg0 port &amp;#39;11133&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set interfaces wireguard wg0 private-key &amp;#39;private-key&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set interfaces wireguard wg0 peer iphone allowed-ips &amp;#39;10.20.30.2/32&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set interfaces wireguard wg0 peer iphone public-key &amp;#39;public-key&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set interfaces wireguard wg0 peer iphone preshared-key &amp;#39;preshared-key&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢è¿™æ˜¯æ·»åŠ è¿‡peerçš„ã€‚&lt;/p&gt;</description></item><item><title>wg-Easyï¼ˆwireguardå¯è§†ç®¡ç†ï¼‰ç¨‹åº</title><link>https://hanigege.github.io/posts/linux/ck%E4%BD%AC%E7%9A%84wg-easy%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E7%A8%8B%E5%BA%8F/</link><pubDate>Mon, 12 May 2025 16:09:56 +0800</pubDate><guid>https://hanigege.github.io/posts/linux/ck%E4%BD%AC%E7%9A%84wg-easy%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E7%A8%8B%E5%BA%8F/</guid><description>&lt;p&gt;&lt;img src="assets/1.png" alt="å›¾ç¤º"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…è¿™ä¸ªç¨‹åºä¸»è¦æ˜¯æ–¹ä¾¿äººåœ¨å¤–é¢ï¼Œè¿æ¥è‡ªå·±æœåŠ¡å™¨ä½¿ç”¨ï½&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç†è§£ä¸ºwireguardå¸¦webç®¡ç†é¡µé¢çš„ã€‚&lt;/li&gt;
&lt;li&gt;pveä¸‹å®‰è£…ubuntuæˆ–è€…debian&lt;/li&gt;
&lt;li&gt;ä¸‹è½½ä¸‹é¢çš„ä¸»ç¨‹åºç„¶åæ ¹æ®æ•™ç¨‹æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://drive.google.com/file/d/1ETrZhXvuLgmXs_-6rdMwsPHz0QJ2JmqY/view?usp=sharing"&gt;wg-easy.zip&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="å®‰è£…æ•™ç¨‹"&gt;å®‰è£…æ•™ç¨‹&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# vm ubuntu22.04æµ‹è¯•é€šè¿‡ï¼Œæ–°ç‰ˆæœ¬æ³¨æ„ä¸‹é¢æ”¹äº†ä¸ªç»„ä»¶ï¼Œå³ï¼šnpm@11.6.2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;1ã€è¿ç§»ä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;å¤åˆ¶appæ–‡ä»¶å¤¹åˆ° /app
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd /app
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2ã€å®‰è£…ä¾èµ–
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt install -y wireguard iptables
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://deb.nodesource.com/setup_22.x | sudo bash -
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt-get install -y nodejs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo npm install -g npm@11.6.2 bcryptjs debug express-session h3 qrcode
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;3ã€é…ç½®ç¯å¢ƒ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export NODE_PATH&lt;span style="color:#f92672"&gt;=&lt;/span&gt;/usr/lib/node_modules
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#34;export NODE_PATH=/usr/lib/node_modules&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bashrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;source ~/.bashrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;npm audit fix
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;4ã€å¯ç”¨ IPv4 å’Œ IPv6 è½¬å‘
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo sysctl -w net.ipv4.ip_forward&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo sysctl -w net.ipv6.conf.all.forwarding&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo bash -c &lt;span style="color:#e6db74"&gt;&amp;#39;echo &amp;#34;net.ipv4.ip_forward = 1&amp;#34; &amp;gt;&amp;gt; /etc/sysctl.conf&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo bash -c &lt;span style="color:#e6db74"&gt;&amp;#39;echo &amp;#34;net.ipv6.conf.all.forwarding = 1&amp;#34; &amp;gt;&amp;gt; /etc/sysctl.conf&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo sysctl -p
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;5ã€é…ç½® systemd æœåŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;å¤åˆ¶wg-easy.serviceåˆ° /etc/systemd/system/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod +x /etc/systemd/system/wg-easy.service
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;systemctl enable wg-easy.service
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;systemctl start wg-easy.service
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;systemctl status wg-easy.service
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ç™»å½•WebUIï¼š http://ip:51821/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;è¯¦ç»†å‚æ•°è¯·ä¿®æ”¹ /app/config.js
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¦‚æœæŠ¥500é”™è¯¯çš„è¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd /app
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;npm audit fix
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="assets/CleanShot%202026-02-27%20at%2021.34.48@2x.png" alt="CleanShot 2026-02-27 at 21.34.48@2x"&gt;&lt;/p&gt;</description></item><item><title>Freebsdå®‰è£…Hysteria2æœåŠ¡ç«¯</title><link>https://hanigege.github.io/posts/freebsd/freebsd%E5%AE%89%E8%A3%85hysteria2%E6%9C%8D%E5%8A%A1%E7%AB%AF/</link><pubDate>Mon, 12 May 2025 14:31:26 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd%E5%AE%89%E8%A3%85hysteria2%E6%9C%8D%E5%8A%A1%E7%AB%AF/</guid><description>&lt;h2 id="freebsd15ä¸‹é…ç½®æœåŠ¡å™¨ç«¯hysteria2"&gt;FreeBSD15ä¸‹é…ç½®æœåŠ¡å™¨ç«¯Hysteria2&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å»ºè®®ç”¨rootç”¨æˆ·è¿è¡Œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç‰¹æƒç«¯å£é™åˆ¶ï¼šé root ç”¨æˆ·æ— æ³•ç›‘å¬ 1024 ä»¥ä¸‹çš„ç«¯å£ï¼ˆå¦‚ 443ï¼‰ã€‚
Hysteria2è®¾ç½®ç®€å•ï¼Œæ€§èƒ½å¼ºåŠ²ï¼Œå¼ºåŠ›æ¨èï¼Œåªè‡ªå·±ç”¨ï¼Œå¾ˆæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆåˆ°å®˜ç½‘ä¸‹è½½æœ€æ–°çš„for freebsdç‰ˆ &lt;a href="https://github.com/apernet/hysteria/releases"&gt;å®˜ç½‘ä¸‹è½½&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="1-å®‰è£…hysteria"&gt;1. å®‰è£…hysteria&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-gdscript3" data-lang="gdscript3"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fetch https:&lt;span style="color:#f92672"&gt;//&lt;/span&gt;github&lt;span style="color:#f92672"&gt;.&lt;/span&gt;com&lt;span style="color:#f92672"&gt;/&lt;/span&gt;apernet&lt;span style="color:#f92672"&gt;/&lt;/span&gt;hysteria&lt;span style="color:#f92672"&gt;/&lt;/span&gt;releases&lt;span style="color:#f92672"&gt;/&lt;/span&gt;download&lt;span style="color:#f92672"&gt;/&lt;/span&gt;app&lt;span style="color:#f92672"&gt;%&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;Fv2&lt;span style="color:#f92672"&gt;.&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;7.0&lt;/span&gt;&lt;span style="color:#f92672"&gt;/&lt;/span&gt;hysteria&lt;span style="color:#f92672"&gt;-&lt;/span&gt;freebsd&lt;span style="color:#f92672"&gt;-&lt;/span&gt;amd64 &lt;span style="color:#75715e"&gt;#ä¸‹è½½ç›®å‰æœ€æ–°çš„2.7.0ç‰ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mv hysteria&lt;span style="color:#f92672"&gt;-&lt;/span&gt;freebsd&lt;span style="color:#f92672"&gt;-&lt;/span&gt;amd64 hysteria &lt;span style="color:#75715e"&gt;#æŠŠæ–‡ä»¶æ”¹åæˆhysteria&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod &lt;span style="color:#f92672"&gt;+&lt;/span&gt;x hysteria &lt;span style="color:#75715e"&gt;#è®©æ–‡ä»¶å¯æ‰§è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mv hysteria &lt;span style="color:#f92672"&gt;/&lt;/span&gt;usr&lt;span style="color:#f92672"&gt;/&lt;/span&gt;local&lt;span style="color:#f92672"&gt;/&lt;/span&gt;bin &lt;span style="color:#75715e"&gt;#å°†æ–‡ä»¶ç§»åˆ°ç›¸åº”ç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sysrc hysteria_enable&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;YES&amp;#34;&lt;/span&gt; &lt;span style="color:#75715e"&gt;#è®¾ç½®å¼€æœºå¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="2-è‡ªç­¾è¯ä¹¦"&gt;2. è‡ªç­¾è¯ä¹¦ï¼š&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯é€‚é… FreeBSD çš„é«˜æ•ˆæ‰§è¡Œæ­¥éª¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p /usr/local/etc/hysteria
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# ç”Ÿæˆç§é’¥ä¸è¯ä¹¦ bing.comä¹Ÿå¯ä»¥æ”¹ä¸ºå…¶å®ƒçš„
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;openssl req -x509 -nodes -newkey ec -pkeyopt ec_paramgen_curve:prime256v1 \
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-keyout /usr/local/etc/hysteria/server.key \
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-out /usr/local/etc/hysteria/server.crt \
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-subj &amp;#34;/CN=bing.com&amp;#34; -days 36500
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# ä¿®æ­£æƒé™ (FreeBSD ä¸­ hysteria ç”¨æˆ·ç»„åé€šå¸¸ä¹Ÿæ˜¯ hysteria) rootç”¨æˆ·ç™»å½•ä¸‹é¢å‘½ä»¤æ²¡æœ‰å¿…è¦
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# chown hysteria:hysteria /usr/local/etc/hysteria/server.key /usr/local/etc/hysteria/server.crt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# æ‰€æœ‰ç”¨æˆ·å¿…é¡»æ‰§è¡ŒåŒ…æ‹¬root,ç»™è¯ä¹¦æƒé™
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod 644 /usr/local/etc/hysteria/server.crt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod 600 /usr/local/etc/hysteria/server.key
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="hysteria-æœåŠ¡é…ç½®æç¤º"&gt;Hysteria æœåŠ¡é…ç½®æç¤º&lt;/h3&gt;
&lt;p&gt;åœ¨ FreeBSD ä¸Šè¿è¡Œ Hysteria æ—¶ï¼Œè¯·ç¡®ä¿ /usr/local/etc/hysteria/config.yamlï¼ˆæˆ–ä½ çš„é…ç½®æ–‡ä»¶ï¼‰å¼•ç”¨äº†æ­£ç¡®çš„è·¯å¾„ï¼š&lt;/p&gt;</description></item><item><title>Freebsdæ›´æ”¹é»˜è®¤ç¼–è¾‘å™¨vi</title><link>https://hanigege.github.io/posts/freebsd/freebsd%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BC%96%E8%BE%91%E5%99%A8vi/</link><pubDate>Mon, 12 May 2025 12:52:04 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BC%96%E8%BE%91%E5%99%A8vi/</guid><description>&lt;h2 id="å‰ææ˜¯æ–°ç¼–è¾‘å™¨å·²ç»å®‰è£…"&gt;å‰ææ˜¯æ–°ç¼–è¾‘å™¨å·²ç»å®‰è£…&lt;/h2&gt;
&lt;p&gt;FreeBSD ä¸‹ä½ å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ EDITOR æ¥æ›´æ”¹ crontab -e ä½¿ç”¨çš„é»˜è®¤ç¼–è¾‘å™¨ã€‚ä¸‹é¢æ˜¯å‡ ç§å¸¸è§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;h2 id="-ä¸´æ—¶æ›´æ”¹å½“å‰-shell-æœ‰æ•ˆ"&gt;âœ… ä¸´æ—¶æ›´æ”¹ï¼ˆå½“å‰ shell æœ‰æ•ˆï¼‰&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;EDITOR&lt;span style="color:#f92672"&gt;=&lt;/span&gt;nano crontab -e
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…ç”¨å…¶ä»–ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;EDITOR&lt;span style="color:#f92672"&gt;=&lt;/span&gt;micro crontab -e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;EDITOR&lt;span style="color:#f92672"&gt;=&lt;/span&gt;ee crontab -e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;EDITOR&lt;span style="color:#f92672"&gt;=&lt;/span&gt;vim crontab -e
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-æ°¸ä¹…æ›´æ”¹åŠ åˆ°-shell-å¯åŠ¨æ–‡ä»¶"&gt;âœ… æ°¸ä¹…æ›´æ”¹ï¼ˆåŠ åˆ° shell å¯åŠ¨æ–‡ä»¶ï¼‰&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ sh æˆ– bashï¼Œå¯ä»¥å°†ä»¥ä¸‹å†…å®¹åŠ åˆ° &lt;code&gt;~/.profile&lt;/code&gt; æˆ– &lt;code&gt;~/.bashrc&lt;/code&gt;æˆ– &lt;code&gt;~/bash_profile&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export EDITOR&lt;span style="color:#f92672"&gt;=&lt;/span&gt;nano
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ tcshï¼ˆFreeBSD é»˜è®¤ï¼‰ï¼Œè¯·åŠ åˆ° ~/.cshrc æ–‡ä»¶ä¸­ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;setenv EDITOR nano
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;source ~/.cshrc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-è¡¥å……æç¤ºå®‰è£…ç®€æ˜“ç¼–è¾‘å™¨"&gt;ğŸ“¦ è¡¥å……æç¤ºï¼šå®‰è£…ç®€æ˜“ç¼–è¾‘å™¨&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æƒ³ç”¨ nano ä½†ç³»ç»Ÿæ²¡æœ‰ï¼Œå¯ä»¥ç”¨ pkg å®‰è£…ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo pkg install nano
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Freebsd-Ipfirewall(IPFW)é˜²ç«å¢™ä»‹ç»</title><link>https://hanigege.github.io/posts/freebsd/freebsd-ipfirewallipfw/</link><pubDate>Mon, 12 May 2025 10:32:24 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd-ipfirewallipfw/</guid><description>&lt;h4 id="ipfirewall-ipfwip-é˜²ç«å¢™-æ˜¯ä¸€æ¬¾ç”±-freebsd-å‘èµ·çš„é˜²ç«å¢™åº”ç”¨è½¯ä»¶å®ƒç”±-freebsd-é¡¹ç›®ç¼–å†™å’Œç»´æŠ¤"&gt;IPFIREWALL (IPFWï¼ŒIP é˜²ç«å¢™) æ˜¯ä¸€æ¬¾ç”± FreeBSD å‘èµ·çš„é˜²ç«å¢™åº”ç”¨è½¯ä»¶ï¼Œå®ƒç”± FreeBSD é¡¹ç›®ç¼–å†™å’Œç»´æŠ¤ã€‚&lt;/h4&gt;
&lt;p&gt;ipfw åœ¨åŸºæœ¬ç³»ç»Ÿçš„å†…æ ¸ï¼ˆGENERICï¼‰ä½œä¸ºå¯åŠ è½½æ¨¡å—è€Œå­˜åœ¨ã€‚&lt;/p&gt;
&lt;h1 id="è­¦å‘Š"&gt;&lt;code&gt;è­¦å‘Š&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;IPFW é»˜è®¤ä¼šæœ‰ä¸€æ¡è§„åˆ™ï¼Œè§„åˆ™å·ä¸º &lt;code&gt;65535&lt;/code&gt;ï¼Œæ˜¯ä¸å¯ä»¥åˆ é™¤çš„ï¼šè¿™æ¡è§„åˆ™ä¼šæŠŠæ‰€æœ‰æµé‡éƒ½åˆ‡æ–­ã€‚æ•…åœ¨æœªé…ç½®å¥½é˜²ç«å¢™å‰ï¼Œè¯·å‹¿å¯åŠ¨ IPFWï¼Œå¦åˆ™å°±ä¼šé¢ä¸´è¢«é˜»æŒ¡åœ¨é˜²ç«å¢™ä¹‹å¤–çš„éº»çƒ¦ã€‚&lt;/p&gt;
&lt;h2 id="æœåŠ¡é¡¹"&gt;æœåŠ¡é¡¹&lt;/h2&gt;
&lt;p&gt;å¼€æœºè‡ªåŠ¨å¯åŠ¨é˜²ç«å¢™ç›¸åº”çš„å†…æ ¸æ¨¡å—ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# sysrc firewall_enable=&amp;#34;YES&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‚è§ &lt;a href="https://github.com/freebsd/freebsd-src/blob/main/libexec/rc/rc.d/routing#L387"&gt;å®˜æ–¹ç½‘å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ–è€…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# service ipfw enable # é¡»é‡å¯åç”Ÿæ•ˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¿å­˜æ‰€éœ€ç¼–è¾‘åï¼Œå¯åŠ¨é˜²ç«å¢™ã€‚è¦ç«‹å³å¯ç”¨æ—¥å¿—è®°å½•é™åˆ¶ï¼Œè¿˜è¯·è®¾ç½®sysctlä¸Šé¢æŒ‡å®šçš„å€¼ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# service ipfw start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯åŠ¨ ipfwï¼šï¼ˆå¯åŠ¨å‰éœ€è¦å…ˆæ·»åŠ æ”¾å¼€22ç«¯å£çš„è§„åˆ™ï¼Œå…ˆæ‰§è¡Œä¸‹é¢çš„ï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# service ipfw start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Firewall rules loaded.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Firewall logging enabled.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ifconfig: interface ipfw0 already exists
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Firewall logging pseudo-interface &lt;span style="color:#f92672"&gt;(&lt;/span&gt;ipfw0&lt;span style="color:#f92672"&gt;)&lt;/span&gt; created.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹ ipfw çŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# service ipfw status&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ipfw is enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¶ä»– RC é…ç½®&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# sysrc firewall_type=&amp;#34;open&amp;#34; # å…è®¸ä»»ä½•è®¿é—®ã€‚å¦‚æœä¸è¿™ä¹ˆåšï¼Œä¼šè°ƒç”¨é»˜è®¤è§„åˆ™ 65535â€”â€”deny ip from any to anyï¼Œæ‹’ç»æ‰€æœ‰ IPã€‚ä½ å°±åªèƒ½å»ç‰©ç†æœºä¸Šå†æ“ä½œäº†ã€‚åŸºæœ¬ç­‰åŒäº net.inet.ip.fw.default_to_accept=&amp;#34;1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# sysrc firewall_script=&amp;#34;/usr/local/etc/ipfw.rules&amp;#34; # æŒ‡å®š ipfw è§„åˆ™çš„è·¯å¾„ï¼Œåœ¨æ­¤å¤„ç¼–è¾‘è§„åˆ™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# sysrc firewall_logging=&amp;#34;YES&amp;#34; # è¿™æ · ipfw å°±å¯ä»¥æ‰“å°æ—¥å¿—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# sysrc firewall_logif=&amp;#34;YES&amp;#34; # æŠŠæ—¥å¿—æ‰“å°åˆ° `ipfw0` è¿™ä¸ªè®¾å¤‡é‡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;sysrc firewall_type=&amp;quot;open&amp;quot;&lt;/code&gt; è®¾ç½®åä¸ä¼šç›´æ¥å†™å…¥ allow ip from any to any åˆ°é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;</description></item><item><title>Freebsd-Packet-Filterï¼ˆPFï¼‰é˜²ç«å¢™ä»‹ç»</title><link>https://hanigege.github.io/posts/freebsd/freebsd-packet-filterpf%E9%98%B2%E7%81%AB%E5%A2%99%E4%BB%8B%E7%BB%8D/</link><pubDate>Mon, 12 May 2025 10:25:50 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd-packet-filterpf%E9%98%B2%E7%81%AB%E5%A2%99%E4%BB%8B%E7%BB%8D/</guid><description>&lt;h4 id="åœ¨-pfconf-ä¸­pf-è§„åˆ™çš„é¡ºåºæ˜¯éå¸¸ä¸¥æ ¼çš„æ­£ç¡®çš„é¡ºåºåº”è¯¥æ˜¯"&gt;åœ¨ pf.conf ä¸­ï¼ŒPF è§„åˆ™çš„é¡ºåºæ˜¯éå¸¸ä¸¥æ ¼çš„ã€‚æ­£ç¡®çš„é¡ºåºåº”è¯¥æ˜¯ï¼š&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;options â€” è®¾ç½® PF çš„å…¨å±€é€‰é¡¹ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ethernet â€” è®¾ç½®ç½‘ç»œæ¥å£ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;normalization â€” è®¾ç½®æ•°æ®åŒ…çš„è§„èŒƒåŒ–ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;queueing â€” è®¾ç½®é˜Ÿåˆ—ï¼ˆå¯é€‰ï¼‰ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;translation â€” NAT æˆ– RDR è®¾ç½®ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;filtering â€” åŒ…è¿‡æ»¤è§„åˆ™ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="pfpacket-filteråŒ…è¿‡æ»¤å™¨æ˜¯ä¸€æ¬¾ç”±-openbsd-ç§»æ¤è€Œæ¥çš„é˜²ç«å¢™æä¾›äº†å¤§é‡åŠŸèƒ½åŒ…æ‹¬-altq-alternate-queuingäº¤é”™é˜Ÿåˆ—-ç­‰"&gt;PFï¼ˆPacket Filterï¼ŒåŒ…è¿‡æ»¤å™¨ï¼‰æ˜¯ä¸€æ¬¾ç”± OpenBSD ç§»æ¤è€Œæ¥çš„é˜²ç«å¢™ï¼Œæä¾›äº†å¤§é‡åŠŸèƒ½ï¼ŒåŒ…æ‹¬ ALTQ (Alternate Queuingï¼Œäº¤é”™é˜Ÿåˆ—) ç­‰ã€‚&lt;/h4&gt;
&lt;p&gt;å¯ç”¨ PF&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# kldload pf # â‘  åŠ è½½å†…æ ¸æ¨¡å—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ç¤ºä¾‹æ–‡ä»¶ä½œä¸ºé»˜è®¤é…ç½®è§„åˆ™é›†æ–‡ä»¶ï¼Œå¦åˆ™ pf æ— æ³•å¯åŠ¨ â‘¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# cp /usr/share/examples/pf/pf.conf /etc/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# service pf enable # è®¾ç½® pf å¼€æœºå¯åŠ¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# service pf start # å¯åŠ¨ pf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;â‘  å¦‚ä¸åšï¼Œåˆ™æç¤º pfctl: /dev/pf: No such file or directoryã€‚æˆ–è€…ä½ é‡å¯å† service pf startã€‚&lt;/p&gt;</description></item><item><title>Freebsd14.2æ‹‰å–æºç å®‰è£…sing-Box(åŒ…å«pfé˜²ç«å¢™é…ç½®)</title><link>https://hanigege.github.io/posts/freebsd/freebsd14.2%E6%8B%89%E5%8F%96%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85sing-box/</link><pubDate>Mon, 12 May 2025 09:18:31 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd14.2%E6%8B%89%E5%8F%96%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85sing-box/</guid><description>&lt;h4 id="åœ¨-freebsd-ä¸Šç¼–è¯‘å¹¶å®‰è£…-sing-boxå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œæˆ‘ä»¬å°†ä½¿ç”¨-git-æ‹‰å–æºä»£ç å¹¶ç¼–è¯‘ä»¥ä¸‹æ˜¯è¯¦ç»†æ­¥éª¤"&gt;åœ¨ FreeBSD ä¸Šç¼–è¯‘å¹¶å®‰è£… sing-boxï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œã€‚æˆ‘ä»¬å°†ä½¿ç”¨ git æ‹‰å–æºä»£ç å¹¶ç¼–è¯‘ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†æ­¥éª¤ï¼š&lt;/h4&gt;
&lt;h2 id="1-å®‰è£…ä¾èµ–å·¥å…·"&gt;1. å®‰è£…ä¾èµ–å·¥å…·&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£…ä¸€äº›åŸºç¡€å·¥å…·ï¼Œä¾‹å¦‚ git å’Œ goï¼ˆGo è¯­è¨€ç¯å¢ƒï¼‰ï¼Œä»¥ä¾¿èƒ½ç¼–è¯‘å’Œæ„å»º sing-boxã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pkg update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pkg install git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç‚¹å‡»å®‰è£…æœ€æ–°ç‰ˆæœ¬go1.23.1&lt;/p&gt;
&lt;h2 id="2-è·å–-sing-box-æºä»£ç "&gt;2. è·å– Sing-Box æºä»£ç &lt;/h2&gt;
&lt;p&gt;ç„¶åï¼Œä½¿ç”¨ git å…‹éš† sing-box çš„æºç åº“ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ä¸‹é¢æ˜¯rootç”¨æˆ·å®‰è£…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir /usr/local/opt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/SagerNet/sing-box.git /usr/local/opt/sing-box
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd /usr/local/opt/sing-box
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ä¸‹é¢æ˜¯æ™®é€šç”¨æˆ·å®‰è£…ï¼Œåªèƒ½å®‰è£…æœ¬çº§ç›®å½•ä¸‹~/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir .usr/local/opt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/SagerNet/sing-box.git .usr/local/opt/sing-box
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd .usr/local/opt/sing-box
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="3-ç¼–è¯‘-sing-box"&gt;3. ç¼–è¯‘ Sing-Box&lt;/h2&gt;
&lt;p&gt;ç¡®ä¿ä½ çš„ç³»ç»Ÿä¸Šå®‰è£…äº† Go è¯­è¨€ç¯å¢ƒåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¼–è¯‘ sing-boxï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ‰§è¡Œæ„å»ºï¼Œæ²¡æœ‰ä»»ä½•è¾“å‡ºå°±æ˜¯æ„å»ºå®Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;go build -tags &lt;span style="color:#e6db74"&gt;&amp;#34;with_quic with_dhcp with_wireguard with_utls with_acme with_clash_api with_gvisor with_grpc with_v2ray_api&amp;#34;&lt;/span&gt; ./cmd/sing-box
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è¿™ä¼šç¼–è¯‘ sing-box å¹¶å¯ç”¨ QUICåè®®æ”¯æŒã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ä½ ç°åœ¨åº”è¯¥å¯ä»¥åœ¨å½“å‰ç›®å½•çœ‹åˆ°å¯æ‰§è¡Œæ–‡ä»¶äº†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ls -lh sing-box
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¦‚æœä½ è¿˜æƒ³æŠŠå®ƒå®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œå¯ä»¥æ‰§è¡Œï¼ˆéœ€è¦ root æƒé™ï¼‰ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo install -m &lt;span style="color:#ae81ff"&gt;755&lt;/span&gt; sing-box /usr/local/bin/sing-box 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ™®é€šç”¨æˆ·æ‰§è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;go build -tags &lt;span style="color:#e6db74"&gt;&amp;#34;with_quic with_dhcp with_wireguard with_utls with_acme with_clash_api with_gvisor with_grpc with_v2ray_api&amp;#34;&lt;/span&gt; ./cmd/sing-box
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è¿™ä¼šç¼–è¯‘ sing-box å¹¶å¯ç”¨ QUICåè®®æ”¯æŒã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ä½ ç°åœ¨åº”è¯¥å¯ä»¥åœ¨å½“å‰ç›®å½•çœ‹åˆ°å¯æ‰§è¡Œæ–‡ä»¶äº†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ls -lh sing-box
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æˆ‘è£…åœ¨äº†ä¹‹å‰goçš„binæ–‡ä»¶å¤¹é‡Œï¼Œå¯ä»¥æ‰§è¡Œï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;install -m &lt;span style="color:#ae81ff"&gt;755&lt;/span&gt; sing-box ~/.usr/local/opt/go/bin/sing-box 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æˆ–è€…æ˜ç™½åŸç†è£…å“ªé‡Œå°±éšå¿ƒæ‰€æ¬²äº†"&gt;æˆ–è€…ï¼šï¼ˆæ˜ç™½åŸç†ï¼Œè£…å“ªé‡Œå°±éšå¿ƒæ‰€æ¬²äº†ï¼‰&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æ˜¯ æ™®é€šç”¨æˆ·ï¼ˆé rootï¼‰å¹¶æƒ³ä¸ä½¿ç”¨ sudo å®‰è£… sing-boxï¼Œå¯ä»¥å°†å…¶å®‰è£…åˆ°ä½ è‡ªå·±çš„ $HOME ç›®å½•ä¸‹çš„ bin/ å­ç›®å½•ä¸­ï¼Œè¿™æ˜¯ Unix ç³»ç»Ÿå¸¸ç”¨çš„åšæ³•ä¹‹ä¸€ã€‚&lt;/p&gt;</description></item><item><title>Freebsd Install Goæœ€æ–°ç‰ˆ</title><link>https://hanigege.github.io/posts/freebsd/freebsd-install-go1231/</link><pubDate>Mon, 12 May 2025 09:12:59 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd-install-go1231/</guid><description>&lt;h2 id="æ‰‹åŠ¨å®‰è£…æœ€æ–°ç‰ˆæœ¬-go"&gt;æ‰‹åŠ¨å®‰è£…æœ€æ–°ç‰ˆæœ¬ Go&lt;/h2&gt;
&lt;p&gt;ä» Go &lt;a href="https://go.dev/dl/"&gt;å®˜æ–¹ç½‘ç«™&lt;/a&gt;ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ Go è¯­è¨€ï¼š&lt;/p&gt;
&lt;p&gt;è®¿é—® Go è¯­è¨€å®˜ç½‘ ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ Goã€‚é€‰æ‹©é€‚åˆ FreeBSD çš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚ go1.23.1.freebsd-amd64.tar.gzï¼Œåé¢å¦‚éœ€ç‰ˆæœ¬æ›´æ–°ï¼Œè¯·è‡ªè¡Œä¿®æ”¹æ–°ç‰ˆæœ¬ä¸‹è½½é“¾æ¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªä¿®æ”¹ç‰ˆæœ¬å·å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;h2 id="rootç”¨æˆ·å®‰è£…æ–¹æ³•"&gt;rootç”¨æˆ·å®‰è£…æ–¹æ³•ï¼š&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fetch https://golang.org/dl/go1.26.0.freebsd-amd64.tar.gz 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tar -C /usr/local -xzf go1.26.0.freebsd-amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚éœ€ä¿®æ”¹å®‰è£…è·¯å¾„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p /usr/local/opt/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fetch -o /usr/local/opt/go1.26.0.freebsd-amd64.tar.gz https://golang.org/dl/go1.26.0.freebsd-amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd /usr/local/opt/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tar -C /usr/local/opt/ -xzf go1.26.0.freebsd-amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æ™®é€šç”¨æˆ·çš„å®‰è£…æ–¹æ³•åªèƒ½åœ¨è‡ªå·±ç›®å½•ä¸­æ“ä½œå¥½å¤„å®‰å…¨éš”ç¦»æ¨è"&gt;æ™®é€šç”¨æˆ·çš„å®‰è£…æ–¹æ³•ï¼š(åªèƒ½åœ¨è‡ªå·±ç›®å½•ä¸­æ“ä½œï¼Œå¥½å¤„:å®‰å…¨ï¼Œéš”ç¦»ï¼‰{æ¨è}&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p .usr/local/opt/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fetch -o .usr/local/opt/go1.26.0.freebsd-amd64.tar.gz https://golang.org/dl/go1.26.0.freebsd-amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd .usr/local/opt/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tar -C ~/.usr/local/opt/ -xzf go1.26.0.freebsd-amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è®¾ç½® Go ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;
&lt;p&gt;æ‰“å¼€&lt;code&gt;~/.profile&lt;/code&gt; æ–‡ä»¶ï¼Œæ·»åŠ  Go çš„ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;
&lt;p&gt;åŸæ–¹å¼ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export PATH&lt;span style="color:#f92672"&gt;=&lt;/span&gt;$PATH:/usr/local/go/bin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ”¹è·¯å¾„åï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export PATH&lt;span style="color:#f92672"&gt;=&lt;/span&gt;$PATH:/usr/local/opt/go/bin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æ™®é€šç”¨æˆ·ä¸‹åœ¨bash_profile-æ–‡ä»¶ä¸­æ·»åŠ å˜é‡æ™®é€šç”¨æˆ·å·²æ”¹ä¸ºbashæŒ‡ä»¤å¦‚ç”¨æshæŒ‡ä»¤é‚£å°±åœ¨profileæ–‡ä»¶ä¸­æ”¹"&gt;æ™®é€šç”¨æˆ·ä¸‹ï¼šåœ¨.bash_profile æ–‡ä»¶ä¸­æ·»åŠ å˜é‡ï¼ˆæ™®é€šç”¨æˆ·å·²æ”¹ä¸ºbashæŒ‡ä»¤ï¼‰å¦‚ç”¨æshæŒ‡ä»¤ï¼Œé‚£å°±åœ¨.profileæ–‡ä»¶ä¸­æ”¹ï¼š&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export PATH&lt;span style="color:#f92672"&gt;=&lt;/span&gt;$PATH:~/.usr/local/opt/go/bin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ·æ–°é…ç½®æˆ–é‡å¯ç»ˆç«¯ï¼šåœ¨ FreeBSD ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„ shell æ˜¯ shï¼Œè€Œ sh ä¸æ”¯æŒ source å‘½ä»¤ã€‚ç›¸åï¼Œsh ä½¿ç”¨ . æ¥ä»£æ›¿ sourceã€‚å› æ­¤ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ shï¼Œéœ€è¦æ”¹ä¸ºä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥åŠ è½½é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;</description></item><item><title>æ‰‹åŠ¨ç”³è¯·åŸŸåsslè¯ä¹¦</title><link>https://hanigege.github.io/posts/linux/%E6%89%8B%E5%8A%A8%E7%94%B3%E8%AF%B7%E5%9F%9F%E5%90%8Dssl%E8%AF%81%E4%B9%A6/</link><pubDate>Mon, 12 May 2025 08:22:29 +0800</pubDate><guid>https://hanigege.github.io/posts/linux/%E6%89%8B%E5%8A%A8%E7%94%B3%E8%AF%B7%E5%9F%9F%E5%90%8Dssl%E8%AF%81%E4%B9%A6/</guid><description>&lt;h1 id="acmeshè„šæœ¬ç”³è¯·cloudflareçš„è¯ä¹¦-æ”¯æŒæ³›åŸŸå"&gt;acme.shè„šæœ¬ç”³è¯·cloudflareçš„è¯ä¹¦ æ”¯æŒæ³›åŸŸå&lt;/h1&gt;
&lt;p&gt;å‰è¨€ï¼š&lt;code&gt;acme.sh&lt;/code&gt;æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ç”¨äºç”³è¯·è¯ä¹¦çš„è„šæœ¬ï¼Œå®ƒå¼€æºåœ¨Githubï¼Œå®ƒæå¤§åœ°é™ä½äº†ç”³è¯·è¯ä¹¦çš„éš¾åº¦ï¼Œæ”¯æŒä½¿ç”¨cloudflare apiç­‰å¤šç§apiæ¥ç”³è¯·è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»ä½¿ç”¨æ­¤è„šæœ¬æ¥ç”³è¯· ssl è¯ä¹¦ï¼Œç»™ä½ çš„httpè¯·æ±‚åŠ æŠŠé”ï¼Œå…·ä½“å¯ä»¥ç”¨æ¥cloudflare apiä»‹ç»ã€‚&lt;/p&gt;
&lt;h2 id="å‡†å¤‡æ¡ä»¶"&gt;å‡†å¤‡æ¡ä»¶ï¼š&lt;/h2&gt;
&lt;p&gt;ä¸€å°è¢«åˆ†é…äº†å…¬ç½‘IPçš„ä¸»æœº&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªåŸŸå(å»ºè®®è´­ä¹°æ”¶è´¹åŸŸå)&lt;/p&gt;
&lt;p&gt;ç”µè„‘sshå®¢æˆ·ç«¯&lt;/p&gt;
&lt;p&gt;èƒ½è§£å†³ä¸ªä½“çš„é—®é¢˜&lt;/p&gt;
&lt;h2 id="ä¸€å…¨çƒapiç”³è¯·è¯ä¹¦"&gt;ä¸€ã€å…¨çƒAPIç”³è¯·è¯ä¹¦&lt;/h2&gt;
&lt;p&gt;1.1ã€å®‰è£…è„šæœ¬æ–‡ä»¶
ä»¥rootç”¨æˆ·sshè¿æ¥åˆ°ä¸»æœºï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…è„šæœ¬ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt update &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt -y install socat //æ›´æ–°æºå¹¶å®‰è£…socat
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wget -qO- get.acme.sh | bash //å®‰è£…æ­¤è„šæœ¬
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;source ~/.bashrc //è®©åˆ«åç”Ÿæ•ˆï¼Œæ­¤åæ— è®ºåœ¨å“ªé‡Œç›´æ¥ä½¿ç”¨acme.shï¼Œä¸ç”¨è¾“ç»å¯¹è·¯å¾„
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ç”±äºæœ€æ–°acme.shè„šæœ¬é»˜è®¤caå˜æˆäº†zerosslï¼Œç°## æ‰§è¡Œä¸‹é¢å‘½ä»¤ä¿®æ”¹è„šæœ¬é»˜è®¤caä¸ºletsencrypt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --set-default-ca --server letsencrypt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;1.2ã€è¯ä¹¦é…ç½®
1.2.1 è·å–Cloudflare api key
æ³¨å†Œå¥½cloudflareè´¦å·ï¼ŒæŠŠåŸŸåè§£æçš„è§£ææƒé™é”å®šcloudflareå¤„ç†ï¼Œè¿™æ ·ä»¥ååªéœ€è¦åœ¨cloudflareè¿™é‡Œé…ç½®è§£æè®°å½•ã€‚æŒ‰ç…§å›¾æ ‡è·å–cloudflare api keyã€‚
&lt;img src="assets/CleanShot%202025-05-12%20at%2008.24.26@2x.png" alt="CleanShot 2025-05-12 at 08.24.26@2x"&gt;
1.2.2 ç”³è¯·è¯ä¹¦ï¼ˆäºŒé€‰ä¸€ï¼‰
è¿™é‡Œå‡è®¾æ‚¨çš„åŸŸåæ˜¯yourdomain.comï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ç”³è¯·è¯ä¹¦ï¼š&lt;/p&gt;
&lt;p&gt;1.2.2.1 dnsæ–¹å¼éªŒè¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export CF_Key&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;slfjksjffjfhfhkjhfksjf&amp;#34;&lt;/span&gt; //æ­¤å¤„æ›¿æ¢æˆä½ è‡ªå·±çš„Key
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;export CF_Email&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;yourcloudflare@gmail.com&amp;#34;&lt;/span&gt; //æ­¤å¤„å¡«å†™ä½ ç»™Cloudflareç»‘å®šçš„é‚®ç®±è´¦å·
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;acme.sh --issue --dns dns_cf -d yourdomain.com -d www.yourdomain.com -k ec-256
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯´æ˜ï¼šCloudflare ç›®å‰ä¸æ”¯æŒ.tk .cf .mlç­‰å…è´¹ç”³è¯·æ¥çš„åŸŸååç¼€ä½¿ç”¨æ­¤ DNS éªŒè¯æ–¹å¼ï¼Œä»˜è´¹åŸŸåæ‰å—æ”¯æŒï¼Œå…è´¹åŸŸåä½¿ç”¨ä½äº 2.2.2 æ–¹å¼ã€‚è„šæœ¬ç”³è¯·åˆ°çš„è¯ä¹¦å’Œå¯†é’¥éƒ½æ”¾åœ¨ç›®å½•ä¸‹~/.acme.sh/yourdomain.com_eccã€‚&lt;/p&gt;</description></item><item><title>å‡ºå›½è‡ªå»ºvoip(ä¸€.2)FreePBXå¯¹æ¥SMG4004ç½‘å…³å®ç°SIPç½‘ç»œç”µè¯</title><link>https://hanigege.github.io/posts/other/voip-0/</link><pubDate>Sun, 11 May 2025 20:19:19 +0800</pubDate><guid>https://hanigege.github.io/posts/other/voip-0/</guid><description>&lt;h2 id="å‰è¨€"&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æˆ‘ä¸ªäººæ­å»ºSIPçš„ä¸»è¦ç›®çš„æ˜¯å› ä¸ºæˆ‘ä¸ªäººæœ‰å¾ˆå¤šæ‰‹æœºå¡ï¼Œè€Œæ‰‹æœºåªæœ‰2ä¸ªå¡æ§½ï¼Œå¹¶ä¸”æ¯å¹´å‡ºå›½ç©çš„æ—¶å€™æ‰‹æœºå¸¦å‡ºå»å°±æ˜¯å…¨çƒæ¼«æ¸¸ï¼Œé‚£åŸºæœ¬ä¸æ•¢æ‰“ç”µè¯ã€‚æ‰€ä»¥å†³å®šæ­å»ºä¸€å¥—è‡ªå·±çš„SIP Serveræ¥è¿›è¡Œæ‹¨æ‰“æ¥å¬ç”µè¯ï¼Œæ‰‹æœºé‡Œåªæ”¾ä¸€å¼ æµé‡å¡ï¼Œè€Œä¸”åœ¨ä¸åŒåœ°ç‚¹å¯ä»¥åœ¨æ‰‹æœºåŸç†èº«è¾¹çš„æ—¶å€™åœ¨å…¶ä»–ç»ˆç«¯æ¥å¬ç”µè¯ã€‚è¿˜èƒ½ç ”ç©¶å­¦ä¹ ä¸€é¡¹æ–°æŠ€æœ¯ï¼ˆç¬‘ï¼‰&lt;/p&gt;
&lt;p&gt;ç»è¿‡å¤šæ”¾è€ƒè™‘æœ€åæˆ‘é€‰æ‹©äº†Synwayå‡ºå“çš„SMG4004-4LCè¿™æ¬¾GOIPæœºå™¨ï¼Œæ”¯æŒå…¨ç½‘é€šï¼Œ4ä¸ªå¡æ§½ï¼ˆé•¿æœŸåº”è¯¥æ˜¯å¤Ÿç”¨äº†ï¼‰ï¼ŒSMS Over Emailï¼ˆè™½ç„¶ä»–ä¹Ÿæ”¯æŒSMS Over SIPï¼Œä½†ç”±äºFreePBXå®˜æ–¹ä¸æ”¯æŒï¼Œè€Œä¸”æœ¬æ¬¡æˆ‘åˆ†æœºä¸»è¦åˆ›å»ºçš„æ˜¯PJSIPï¼Œè€Œè¿™æ¬¾æœºå™¨çš„SMSæ˜¯é€šè¿‡Chan SIPå‘é€çš„ï¼Œå¤„ç†èµ·æ¥å¾ˆéº»çƒ¦ï¼Œæœ€åé€‰æ‹©äº†ä½¿ç”¨Emailæ¥æ”¶çš„æ–¹å¼ã€ç¨³å®šä¸€äº›ã€‘ï¼Œå½“ç„¶å®˜æ–¹æä¾›äº†å¤§é‡APIæ¥å£ï¼Œåº”è¯¥æ˜¯å¯ä»¥å†™ä¸€äº›æœºå™¨äººå‘é€åˆ°å¦‚Telegramä¹‹ç±»çš„ã€å·²è§£å†³ï¼Œæœ¬ç«™æœ‰æä¾›ã€‘ï¼‰ï¼Œè€Œä¸”å›½å†…è¿˜æœ‰ä»£ç†å•†ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¹°åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2020.21.31@2x.png" alt="CleanShot 2025-05-11 at 20.21.31@2x"&gt;
å¡æ§½ç•Œé¢
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.21.57@2x.png" alt="CleanShot 2025-05-11 at 20.21.57@2x"&gt;&lt;/p&gt;
&lt;h2 id="æ­å»ºfreepbx"&gt;æ­å»ºFreePBX&lt;/h2&gt;
&lt;p&gt;æˆ‘ç›´æ¥ä½¿ç”¨äº†å®˜æ–¹ISOé•œåƒï¼ˆåŸºäºCentOSï¼‰è¿›è¡Œé»˜è®¤æ­å»ºï¼Œæ­å®Œè¿˜å‡äº†ä¸ªçº§ï¼Œå…³äºFreePBXè®¾ç½®çš„æ•™ç¨‹ç½‘ä¸Šå¾ˆå¤šï¼Œä¸Šå‡ ä¸ªå›¾å¤§å®¶ä¹Ÿå¯ä»¥å‚ç…§æˆ‘å›¾é‡Œçš„è¿›è¡Œè®¾ç½®ã€‚
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.23.06@2x.png" alt="CleanShot 2025-05-11 at 20.23.06@2x"&gt;&lt;/p&gt;
&lt;h2 id="è¿˜è¦è®¾ç½®-pjsipçš„udptcpåè®®å¼€å¯"&gt;è¿˜è¦è®¾ç½® PJSIPçš„UDP,TCPåè®®å¼€å¯&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2020.23.46@2x.png" alt="CleanShot 2025-05-11 at 20.23.46@2x"&gt;&lt;/p&gt;
&lt;h2 id="è½¯è·¯ç”±å¼€å¯ç«¯å£"&gt;è½¯è·¯ç”±å¼€å¯ç«¯å£&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2020.24.22@2x.png" alt="CleanShot 2025-05-11 at 20.24.22@2x"&gt;&lt;/p&gt;
&lt;h2 id="å¯¹æ¥ç½‘å…³"&gt;å¯¹æ¥ç½‘å…³&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆè¦å°†ç½‘å…³æ•´æœºæ³¨å†Œåˆ°FreePBXå®ç°SIPäº’é€š&lt;/p&gt;
&lt;h2 id="åˆ›å»ºä¸­ç»§è´¦å·"&gt;åˆ›å»ºä¸­ç»§è´¦å·&lt;/h2&gt;
&lt;p&gt;é€‰æ‹©åˆ›å»ºä¸€ä¸ª &lt;code&gt;chan_sip&lt;/code&gt; ä¸­ç»§
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.25.14@2x.png" alt="CleanShot 2025-05-11 at 20.25.14@2x"&gt;
é¦–å…ˆä»…å¡«å†™ä¸­ç»§å
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.25.36@2x.png" alt="CleanShot 2025-05-11 at 20.25.36@2x"&gt;
è·¯ç”±è§„åˆ™å†™ X.
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.25.54@2x.png" alt="CleanShot 2025-05-11 at 20.25.54@2x"&gt;
SIPè®¾ç½®é¡µé¢å¡«å†™ä¸­ç»§åã€å’Œä¸­ç»§é…ç½®ï¼ˆå¯å‚è€ƒä¸‹æ–¹æˆ‘çš„é…ç½®ï¼‰
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.26.17@2x.png" alt="CleanShot 2025-05-11 at 20.26.17@2x"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;host&lt;span style="color:#f92672"&gt;=&lt;/span&gt;dynamic
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;port&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;5160&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;type&lt;span style="color:#f92672"&gt;=&lt;/span&gt;peer
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;secret&lt;span style="color:#f92672"&gt;=&lt;/span&gt;da*********************éšä¾¿è®¾ç½®ä¸ªå¯†ç 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;context&lt;span style="color:#f92672"&gt;=&lt;/span&gt;from-pstn
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dtmfmode&lt;span style="color:#f92672"&gt;=&lt;/span&gt;rfc2833
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;insecure&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;qualify&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;3000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="è®¾ç½®å‡ºå±€çº¿è·¯"&gt;è®¾ç½®å‡ºå±€çº¿è·¯&lt;/h2&gt;
&lt;p&gt;è®¾ç½®å®Œä¸­ç»§ä¹‹åæˆ‘ä»¬è¿˜éœ€è¦è®¾ç½®ä¸€ä¸‹å‡ºå±€çº¿è·¯è®©FreePBXçš„åˆ†æœºå¯ä»¥æˆåŠŸèµ°ç½‘å…³è¿›è¡Œæ‹¨æ‰“
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.27.15@2x.png" alt="CleanShot 2025-05-11 at 20.27.15@2x"&gt;
è®¾ç½®ä¸€ä¸‹åŒ¹é…ä¸­ç»§
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.27.32@2x.png" alt="CleanShot 2025-05-11 at 20.27.32@2x"&gt;
è®¾ç½®åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ä¸º X.
&lt;img src="assets/CleanShot%202025-05-11%20at%2020.27.49@2x.png" alt="CleanShot 2025-05-11 at 20.27.49@2x"&gt;&lt;/p&gt;</description></item><item><title>è‡ªç”¨ROSçš„MANGLEå°åŒ…è§„åˆ™</title><link>https://hanigege.github.io/posts/routers/ros%E7%9A%84mangle%E5%B0%8F%E5%8C%85%E8%A7%84%E5%88%99/</link><pubDate>Sun, 11 May 2025 19:23:13 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/ros%E7%9A%84mangle%E5%B0%8F%E5%8C%85%E8%A7%84%E5%88%99/</guid><description>&lt;h2 id="ä¸ºäº†è®©ç½‘ç»œä½å»¶è¿Ÿå°åŒ…ä¼˜å…ˆçœŸæ­£ç”Ÿæ•ˆç§‘å­¦çš„åšæ³•æ˜¯ç¦ç”¨-fasttrack"&gt;ä¸ºäº†è®©ç½‘ç»œä½å»¶è¿Ÿã€å°åŒ…ä¼˜å…ˆçœŸæ­£ç”Ÿæ•ˆï¼Œç§‘å­¦çš„åšæ³•æ˜¯ï¼š&lt;code&gt;ç¦ç”¨ Fasttrackã€‚&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œæ‰¾åˆ°å¹¶ç¦ç”¨ Fasttrack è§„åˆ™ï¼š&lt;/p&gt;
&lt;p&gt;ä»£ç æ®µ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;/ip firewall filter&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æŸ¥æ‰¾å¸¦æœ‰ fasttrack-connection åŠ¨ä½œçš„è§„åˆ™å¹¶ç¦ç”¨å®ƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;disable [find action=fasttrack-connection]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šç¦ç”¨åï¼Œæ‰€æœ‰æµé‡å°†äº¤ç”± CPU è¿›è¡Œ Mangle æ ‡è®°å’Œ Queue æ ‘æ’é˜Ÿã€‚ä½ çš„å°åŒ…ä¼˜å…ˆå’Œé™é€Ÿæœºåˆ¶å°†ç«‹åˆ» 100% ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;h2 id="ä¾‹å¤–ç½‘ä¸‹è¡Œæ˜¯300mä¸Šè¡Œæ˜¯30mçš„å¸¦å®½"&gt;ä¾‹ï¼šå¤–ç½‘ä¸‹è¡Œæ˜¯300mï¼Œä¸Šè¡Œæ˜¯30mçš„å¸¦å®½&lt;/h2&gt;
&lt;p&gt;ä¸‹è¡Œé˜Ÿåˆ—çš„æŒ‚è½½æ¥å£ç²¾å‡†æ›¿æ¢ä¸º bridge1ï¼Œä¸Šè¡Œæ¥å£ä¿æŒ pppoe-out1&lt;/p&gt;
&lt;p&gt;æˆåŠŸçš„æ­¥éª¤ä¸ç§‘å­¦è®¡ç®—
é¢„ç•™ç¼“å†²é¿å…å…‰çŒ«æ’é˜Ÿï¼š å¿…é¡»æ‰£é™¤è¿è¥å•†æ ‡ç§°å¸¦å®½çš„ 5% åˆ° 10%ï¼Œå°†æ’é˜Ÿæœºåˆ¶å¼ºè¡Œæ‹‰å›åˆ° RouterOS æœ¬åœ°å¤„ç†ï¼Œä»¥å½»åº•æ¶ˆé™¤ç¼“å†²è†¨èƒ€ï¼ˆBufferbloatï¼‰å¸¦æ¥çš„é«˜å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸Šè¡Œä¸¥æ ¼é˜ˆå€¼ï¼š 30M Ã— 0.95 = 28M&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸‹è¡Œä¸¥æ ¼é˜ˆå€¼ï¼š 300M Ã— 0.95 = 285M&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é‡æ„æŒ‚è½½ç‚¹ï¼š å°†ä¸Šè¡Œé˜Ÿåˆ—æŒ‚è½½åœ¨æ‹¨å·æ¥å£ï¼Œä¸‹è¡Œé˜Ÿåˆ—æŒ‚è½½åœ¨å†…ç½‘æ¥å£ã€‚Mangle æ ‡è®°åªéœ€åœ¨ prerouting å’Œ postrouting æŠ“å–ä¸€æ¬¡ï¼Œå³å¯è¢«ä¸Šä¸‹è¡Œé˜Ÿåˆ—åŒæ—¶è°ƒç”¨ã€‚&lt;/p&gt;
&lt;h2 id="1ä»£ç å¯¼å…¥çš„æ–¹æ³•"&gt;1ã€ä»£ç å¯¼å…¥çš„æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;å¯¼å…¥ä»£ç ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;/ip firewall mangle&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 1. ä¼˜å…ˆ DNS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add action=mark-packet chain=prerouting protocol=udp dst-port=53 new-packet-mark=dns passthrough=no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add action=mark-packet chain=prerouting protocol=tcp dst-port=53 new-packet-mark=dns passthrough=no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 2. ä¼˜å…ˆ ICMP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add action=mark-packet chain=prerouting protocol=icmp new-packet-mark=small-packet passthrough=no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 3. æ ¹æ®åŒ…å¤§å°æ ‡è®°ä¸­å°åŒ… (è¦†ç›– TCP ACK å’Œæ¸¸æˆæ•°æ®)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add action=mark-packet chain=prerouting packet-size=0-128 new-packet-mark=small-packet passthrough=no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add action=mark-packet chain=prerouting packet-size=129-512 new-packet-mark=medium-packet passthrough=no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 4. å‰©ä½™å¤§åŒ…å…œåº• (ä¸‹è½½ã€è§†é¢‘ç­‰)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add action=mark-packet chain=prerouting new-packet-mark=large-packet passthrough=no&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 5. MSS é’³åˆ¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add action=change-mss chain=forward protocol=tcp tcp-flags=syn new-mss=clamp-to-pmtu passthrough=yes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;/queue tree&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ¸…ç†æ—§é˜Ÿåˆ—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;remove [find]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ================= ä¸Šè¡Œé˜Ÿåˆ— (Upload) =================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æŒ‚è½½åˆ°å¤–ç½‘æ‹¨å·æ¥å£ pppoe-out1ï¼Œæ€»å¸¦å®½ 28M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=Upload-Total parent=pppoe-out1 max-limit=28M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=U1-Dns parent=Upload-Total packet-mark=dns priority=1 queue=default-small limit-at=2M max-limit=28M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=U2-Small parent=Upload-Total packet-mark=small-packet priority=2 queue=default-small limit-at=5M max-limit=28M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=U3-Medium parent=Upload-Total packet-mark=medium-packet priority=3 queue=default-small limit-at=10M max-limit=28M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=U4-Large parent=Upload-Total packet-mark=large-packet priority=8 queue=default-small limit-at=11M max-limit=28M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ================= ä¸‹è¡Œé˜Ÿåˆ— (Download) =================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æŒ‚è½½åˆ°å†…ç½‘æ¡¥æ¥æ¥å£ bridge1ï¼Œæ€»å¸¦å®½ 285M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=Download-Total parent=bridge1 max-limit=285M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=D1-Dns parent=Download-Total packet-mark=dns priority=1 queue=default-small limit-at=5M max-limit=285M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=D2-Small parent=Download-Total packet-mark=small-packet priority=2 queue=default-small limit-at=20M max-limit=285M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=D3-Medium parent=Download-Total packet-mark=medium-packet priority=3 queue=default-small limit-at=50M max-limit=285M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;add name=D4-Large parent=Download-Total packet-mark=large-packet priority=8 queue=default-small limit-at=210M max-limit=285M&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¦è®©ä»¥ä¸Š QoS è§„åˆ™çœŸæ­£ç”Ÿæ•ˆï¼Œå¿…é¡»å¤„ç†ï¼ˆç¦ç”¨ï¼‰é˜²ç«å¢™ä¸­çš„ Fasttrackï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰è§„åˆ™ï¼Œå¦åˆ™æ‰€æœ‰æ•°æ®åŒ…éƒ½ä¼šç›´æ¥ç»•è¿‡ Mangle å’Œ Queue æ ‘ã€‚&lt;/p&gt;</description></item><item><title>Freebsdæ™®é€šç”¨æˆ·å¦‚ä½•ä½¿ç”¨sudo</title><link>https://hanigege.github.io/posts/freebsd/freebsd%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8sudo/</link><pubDate>Sun, 11 May 2025 17:44:04 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8sudo/</guid><description>&lt;h3 id="æˆ‘ä¸ªäººä¸å»ºè®®å®‰è£…å¼€å¯sudoå› ä¸ºæ™®é€šç”¨æˆ·ç”¨è‡ªå·±çš„å¯†ç å°±å¯ä»¥æå‡ç®¡ç†æƒé™ä¸ªäººç†è§£è¿˜æ˜¯å®Œå…¨éš”ç¦»çš„å¥½"&gt;æˆ‘ä¸ªäººä¸å»ºè®®å®‰è£…å¼€å¯sudo,å› ä¸ºæ™®é€šç”¨æˆ·ç”¨è‡ªå·±çš„å¯†ç å°±å¯ä»¥æå‡ç®¡ç†æƒé™ã€‚ä¸ªäººç†è§£è¿˜æ˜¯å®Œå…¨éš”ç¦»çš„å¥½&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;**ä¸‹é¢åªæä¾›çŸ¥è¯†ç‚¹å‚è€ƒ**ï½&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="å®‰è£…freebsdæ—¶å·²ç»æ·»åŠ å¥½æ™®é€šç”¨æˆ·çš„å¯ä»¥ç›´æ¥ä»ä¸‹é¢å¯ä»¥ç”¨-visudo-æ‰“å¼€-sudo-é…ç½®æ–‡ä»¶-è¿™é‡Œç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†"&gt;å®‰è£…freebsdæ—¶å·²ç»æ·»åŠ å¥½æ™®é€šç”¨æˆ·çš„ï¼Œå¯ä»¥ç›´æ¥ä»ä¸‹é¢&lt;code&gt;å¯ä»¥ç”¨ visudo æ‰“å¼€ sudo é…ç½®æ–‡ä»¶&lt;/code&gt; è¿™é‡Œç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ã€‚&lt;/h3&gt;
&lt;p&gt;ä½ çœ‹åˆ°çš„æç¤ºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gary is not in the sudoers file.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;This incident has been reported to the administrator.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ„æ€æ˜¯ï¼šå½“å‰ç”¨æˆ· gary æ²¡æœ‰æƒé™ä½¿ç”¨ sudoï¼Œå› æ­¤ä¸èƒ½å®‰è£…è½¯ä»¶æˆ–æ‰§è¡Œéœ€è¦ç®¡ç†å‘˜æƒé™çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³åŠæ³•ï¼ˆéœ€è¦ root ç”¨æˆ·æ“ä½œï¼‰
ä½ éœ€è¦åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œç„¶åæŠŠ gary æ·»åŠ åˆ° sudo æƒé™ç»„ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;âœ… 1. ç”¨ root ç”¨æˆ·ç™»å½•ï¼Œæˆ–è€…ç”¨ su åˆ‡æ¢åˆ° rootï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;su -
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç³»ç»Ÿä¼šæç¤ºä½ è¾“å…¥ root çš„å¯†ç ï¼Œä¸æ˜¯ gary çš„å¯†ç ã€‚&lt;/p&gt;
&lt;p&gt;âœ… 2. å®‰è£… sudoï¼ˆå¦‚æœè¿˜æ²¡è£…ï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pkg install sudo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;âœ… 3. æŠŠ gary ç”¨æˆ·æ·»åŠ åˆ° wheel ç»„ï¼š(å¦‚æœå®‰è£…ç³»ç»Ÿæ—¶å·²åŠ å…¥wheelç»„å°±ä¸éœ€è¦ä¸‹é¢çš„å†æ¬¡æ“ä½œï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pw usermod gary -G wheel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é»˜è®¤ FreeBSD çš„ sudoers æ–‡ä»¶å…è®¸ wheel ç»„çš„ç”¨æˆ·ä½¿ç”¨ sudoã€‚&lt;/p&gt;</description></item><item><title>å®¶åº­èŠå¤©æœåŠ¡å™¨ç³»åˆ—ï¼ˆ3ï¼‰coturnæœåŠ¡æ­å»º</title><link>https://hanigege.github.io/posts/other/%E5%AE%B6%E5%BA%AD%E8%81%8A%E5%A4%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%973coturn%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</link><pubDate>Sun, 11 May 2025 16:42:06 +0800</pubDate><guid>https://hanigege.github.io/posts/other/%E5%AE%B6%E5%BA%AD%E8%81%8A%E5%A4%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%973coturn%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</guid><description>&lt;h2 id="dockeræ­å»ºcoturn-turnæœåŠ¡å™¨"&gt;dockeræ­å»ºCoturn TURNæœåŠ¡å™¨&lt;/h2&gt;
&lt;h2 id="å…±ä¸¤ç§æ–¹æ¡ˆ"&gt;å…±ä¸¤ç§æ–¹æ¡ˆï¼š&lt;/h2&gt;
&lt;h2 id="ç¬¬ä¸€ç§æ–¹æ¡ˆè¦äº†è§£"&gt;ç¬¬ä¸€ç§æ–¹æ¡ˆï¼ˆè¦äº†è§£ï¼‰&lt;/h2&gt;
&lt;h4 id="å…ˆå»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹"&gt;å…ˆå»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p ~/data/docker_data/coturn/etc/coturn
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p ~/data/docker_data/coturn/var/run
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p ~/data/docker_data/coturn/var/log &lt;span style="color:#75715e"&gt;#å¦‚æœç”¨ä¸‹é¢ç¬¬ä¸€ç§æ–¹æ¡ˆè¿™ä¸ªæ‰éœ€è¦å»ºç«‹ï¼Œç¬¬äºŒç§ä¸éœ€è¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd ~/data/docker_data/coturn/etc/coturn
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;touch turnserver.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd ~/data/docker_data/coturn/var/run
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;touch turnserver.pid
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd ../../
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod &lt;span style="color:#ae81ff"&gt;777&lt;/span&gt; -R var
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‹‰å–é•œåƒ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; docker pull coturn/coturn
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç›´æ¥hostæ–¹å¼è¿è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; docker run -d --network&lt;span style="color:#f92672"&gt;=&lt;/span&gt;host &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -v /root/data/docker_data/coturn/etc/coturn/turnserver.conf:/etc/coturn/turnserver.conf &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -v /root/data/docker_data/coturn/etc/:/etc/ &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -v /root/data/docker_data/coturn/var:/var &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; coturn/coturn
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿è¡Œæ—¶ä¸åŠ  -d å…ˆçœ‹è¾“å…¥æœ‰é”™è¯¯å—ï¼
åŒæ—¶æŸ¥çœ‹varä¸‹çš„logçœ‹ç›¸å…³çš„é—®é¢˜
è°ƒè¯•å¯åŠ¨å‘½ä»¤ï¼šåœæ­¢å®¹å™¨åä¼šè‡ªåŠ¨å›¾åˆ é™¤å®¹å™¨ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run --network&lt;span style="color:#f92672"&gt;=&lt;/span&gt;host &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -v /root/data/docker_data/coturn/etc/coturn/turnserver.conf:/etc/coturn/turnserver.conf &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -v /root/data/docker_data/coturn/etc/:/etc/ &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -v /root/data/docker_data/coturn/var:/var &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --rm &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; coturn/coturn
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å“ªæœå»æ‰äº†é…ç½®æ–‡ä»¶é‡Œçš„æŒ‡å®šlogï¼Œåœç”¨cliåŠŸèƒ½ï¼Œä¸‹é¢æœ‰è¯´æ˜ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å¯åŠ¨å‘½ä»¤ï¼š&lt;/p&gt;</description></item><item><title>å®¶åº­èŠå¤©æœåŠ¡å™¨ç³»åˆ—ï¼ˆ2ï¼‰ntfyæœåŠ¡æ­å»º</title><link>https://hanigege.github.io/posts/other/%E5%AE%B6%E5%BA%AD%E8%81%8A%E5%A4%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%972ntfy%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</link><pubDate>Sun, 11 May 2025 16:34:01 +0800</pubDate><guid>https://hanigege.github.io/posts/other/%E5%AE%B6%E5%BA%AD%E8%81%8A%E5%A4%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%972ntfy%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</guid><description>&lt;br&gt;
&lt;h3 id="ntfy-æ— éœ€æ³¨å†Œçš„é€šçŸ¥æœåŠ¡"&gt;ntfy æ— éœ€æ³¨å†Œçš„é€šçŸ¥æœåŠ¡&lt;/h3&gt;
&lt;h4 id="æœ€ä¸‹é¢æ˜¯æ¢å¤å¤‡ä»½çš„æ–¹æ¡ˆ"&gt;æœ€ä¸‹é¢æ˜¯æ¢å¤å¤‡ä»½çš„æ–¹æ¡ˆï¼š&lt;/h4&gt;
&lt;p&gt;##â€‹â€‹ ä»€ä¹ˆæ˜¯ ntfy ï¼Ÿ
â€‹ntfyâ€‹â€‹â€‹ï¼ˆå‘éŸ³ï¼šnotifyâ€‹â€‹â€‹ï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„åŸºäº HTTPâ€‹â€‹â€‹ çš„ pub-subâ€‹â€‹â€‹ é€šçŸ¥æœåŠ¡ã€‚å®ƒå…è®¸æ‚¨é€šè¿‡ä»»ä½•è®¡ç®—æœºä¸Šçš„è„šæœ¬å‘æ‚¨çš„æ‰‹æœºæˆ–æ¡Œé¢å‘é€é€šçŸ¥ï¼Œå®Œå…¨æ— éœ€æ³¨å†Œæˆ–è´¹ç”¨ã€‚&lt;/p&gt;
&lt;h4 id="å®˜æ–¹æä¾›äº†å…è´¹çš„ç‰ˆæœ¬httpsntfyshapp"&gt;å®˜æ–¹æä¾›äº†å…è´¹çš„ç‰ˆæœ¬ï¼šhttps://ntfy.sh/app&lt;/h4&gt;
&lt;h2 id="å®‰è£…"&gt;å®‰è£…&lt;/h2&gt;
&lt;p&gt;æ–°å»ºæ–‡ä»¶ï¼šdocker-compose.yml
è„šæœ¬å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;services:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ntfy:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; image: binwiederhier/ntfy:latest
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; container_name: ntfy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; command:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - serve
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; environment:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - TZ&lt;span style="color:#f92672"&gt;=&lt;/span&gt;Asia/Shanghai
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; volumes:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - /root/data/docker_data/ntfy/data/cache:/var/cache/ntfy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - /root/data/docker_data/ntfy/data/config:/etc/ntfy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ports:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - 12332:80
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; restart: unless-stopped
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; networks:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - matrix
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;networks:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; matrix:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; name: matrix
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»£ç ä¸­çš„åå‘ä»£ç†npmè½¬å‘å¤–å‡ºç«¯å£12332 ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç ä¸­ä¼šè‡ªå»º ç½‘ç»œmatrix.&lt;/p&gt;
&lt;h2 id="å¦‚æœå…ˆè¡Œè‡ªå·±å»ºç«‹ç½‘ç»œå¦‚"&gt;å¦‚æœå…ˆè¡Œè‡ªå·±å»ºç«‹ç½‘ç»œï¼Œå¦‚ï¼š&lt;/h2&gt;
&lt;p&gt;å»ºç«‹ä¸€ä¸ª docker networkï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker network create matrix
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£ä¹ˆæ‚¨å¯ä»¥æŒ‰ç…§ä¹‹å‰æåˆ°çš„å»ºè®®åœ¨ Docker Compose æ–‡ä»¶ä¸­å°†ç½‘ç»œå®šä¹‰æ ‡è®°ä¸ºå¤–éƒ¨ç½‘ç»œï¼Œå¹¶ä¸”æŒ‡å®šæ­£ç¡®çš„ç½‘ç»œåç§°ã€‚åœ¨æ‚¨çš„ Docker Compose æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥å°†ç½‘ç»œå®šä¹‰ä¿®æ”¹ä¸ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;</description></item><item><title>å®¶åº­èŠå¤©æœåŠ¡å™¨ç³»åˆ—ï¼ˆ1ï¼‰synapseæ­å»º</title><link>https://hanigege.github.io/posts/other/%E5%AE%B6%E5%BA%AD%E8%81%8A%E5%A4%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%971synapse%E6%90%AD%E5%BB%BA/</link><pubDate>Sun, 11 May 2025 16:24:14 +0800</pubDate><guid>https://hanigege.github.io/posts/other/%E5%AE%B6%E5%BA%AD%E8%81%8A%E5%A4%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%971synapse%E6%90%AD%E5%BB%BA/</guid><description>&lt;br&gt;
&lt;h2 id="è®¾è®¡æ€è·¯"&gt;è®¾è®¡æ€è·¯&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2016.27.38@2x.png" alt="CleanShot 2025-05-11 at 16.27.38@2x"&gt;&lt;/p&gt;
&lt;h3 id="æœåŠ¡å™¨éœ€è¦2å°å¤–ç½‘ä¸€å°vpså³å¯æ­å»ºcoturnæœåŠ¡æœ¬åœ°ä¸€å°æ­å»ºsynapseåŠntfyæœåŠ¡æ‰€æœ‰æœåŠ¡å‡ä»¥dockerçš„æ–¹å¼æ¥æ­å»º"&gt;æœåŠ¡å™¨éœ€è¦2å°ï¼Œå¤–ç½‘ä¸€å°vpså³å¯ï¼Œæ­å»ºcoturnæœåŠ¡ã€‚æœ¬åœ°ä¸€å°ï¼Œæ­å»ºsynapseåŠntfyæœåŠ¡ï¼Œæ‰€æœ‰æœåŠ¡å‡ä»¥dockerçš„æ–¹å¼æ¥æ­å»º&lt;/h3&gt;
&lt;h4 id="1-ntfyæœåŠ¡å› ä¸ºå¾ˆå¤šçš„é™åˆ¶å¯¼è‡´æ¶ˆæ¯æ— æ³•ä¼ è¾¾ç±»ä¼¼äºä½ æ¶ˆæ¯æ¥äº†ç¡®æ”¶ä¸åˆ°é€šçŸ¥æé†’"&gt;1. ntfyæœåŠ¡ï¼šå› ä¸ºå¾ˆå¤šçš„é™åˆ¶å¯¼è‡´æ¶ˆæ¯æ— æ³•ä¼ è¾¾ï¼Œç±»ä¼¼äºä½ æ¶ˆæ¯æ¥äº†ï¼Œç¡®æ”¶ä¸åˆ°é€šçŸ¥æé†’.&lt;/h4&gt;
&lt;h4 id="2-coturn-æ˜¯ä¸€ä¸ª-stunturn-æœåŠ¡å™¨-å®ç°ä¸»è¦ç”¨äº-webrtcvoipè§†é¢‘ä¼šè®®ç­‰å®æ—¶é€šä¿¡åº”ç”¨ä¸­è§£å†³nat-ç©¿é€é—®é¢˜coturn-åŒæ—¶å®ç°äº†-stun--turné€šå¸¸ç”¨ä½œ-webrtc-çš„ä¸­ç»§æœåŠ¡å™¨ç¡®ä¿è§†é¢‘è¯­éŸ³è¿æ¥åœ¨å„ç§å¤æ‚ç½‘ç»œç¯å¢ƒä¸‹éƒ½èƒ½å»ºç«‹"&gt;2. coturn æ˜¯ä¸€ä¸ª STUN/TURN æœåŠ¡å™¨ å®ç°ï¼Œä¸»è¦ç”¨äº WebRTCã€VoIPã€è§†é¢‘ä¼šè®®ç­‰å®æ—¶é€šä¿¡åº”ç”¨ä¸­ï¼Œè§£å†³NAT ç©¿é€é—®é¢˜ã€‚coturn åŒæ—¶å®ç°äº† STUN + TURNï¼Œé€šå¸¸ç”¨ä½œ WebRTC çš„ä¸­ç»§æœåŠ¡å™¨ï¼Œç¡®ä¿è§†é¢‘/è¯­éŸ³è¿æ¥åœ¨å„ç§å¤æ‚ç½‘ç»œç¯å¢ƒä¸‹éƒ½èƒ½å»ºç«‹ã€‚&lt;/h4&gt;
&lt;h4 id="3-synapseèŠå¤©æœåŠ¡å™¨ä¸»ä½“æ”¯æŒæ–‡å­—è¯­éŸ³åœ¨çº¿è¯­éŸ³ç”µè¯åœ¨çº¿è§†é¢‘æ–‡ä»¶ä¼ é€æ˜¯ä¸€å¥—å®Œæ•´å¯æŒç»­çš„èŠå¤©æœåŠ¡"&gt;3. synapseèŠå¤©æœåŠ¡å™¨ä¸»ä½“ï¼Œæ”¯æŒæ–‡å­—ï¼Œè¯­éŸ³ï¼Œåœ¨çº¿è¯­éŸ³ç”µè¯ï¼Œåœ¨çº¿è§†é¢‘ï¼Œæ–‡ä»¶ä¼ é€ï¼Œæ˜¯ä¸€å¥—å®Œæ•´å¯æŒç»­çš„èŠå¤©æœåŠ¡ã€‚&lt;/h4&gt;
&lt;h4 id="4-å®¢æˆ·ç«¯æœ‰å¾ˆå¤šç§å®˜ç½‘ä¸Šéƒ½æœ‰ä»‹ç»è¿™é‡Œåªæ¨èä½¿ç”¨elementå®¢æˆ·ç«¯"&gt;4. å®¢æˆ·ç«¯æœ‰å¾ˆå¤šç§ï¼Œå®˜ç½‘ä¸Šéƒ½æœ‰ä»‹ç»ï¼Œè¿™é‡Œåªæ¨èä½¿ç”¨Elementå®¢æˆ·ç«¯ã€‚&lt;/h4&gt;
&lt;p&gt;æœ€æœ€ä¸‹é¢æ˜¯å¤‡ä»½æ¢å¤çš„æ–¹æ³•ï¼Œå¦‚ä½•å¤‡ä»½ï¼ŒæŠŠç›¸å…³dockeræ–‡ä»¶å¤¹æ‰“åŒ…ä¸‹è½½å°±å¯ä»¥äº†ï¼Œéœ€è¦æ¢å¤çš„æ—¶å€™ï¼Œä¸Šä¼ åˆ°ç›¸å…³çš„æœåŠ¡å™¨ï¼Œæ”¾åœ¨rootæ–‡ä»¶å¤¹ä¸‹ã€‚&lt;/p&gt;
&lt;h4 id="åˆ‡è®°synapaeæœåŠ¡å™¨ä¸å¯ä»¥ä½¿ç”¨fakeipçš„dnsä»£ç†ä¸Šç½‘åªèƒ½ç”¨æœ¬åœ°çš„ç½‘ç»œä¸ç„¶ä¼šæ”¶ä¸åˆ°æ¶ˆæ¯ntfyä¼šå‡ºé—®é¢˜"&gt;åˆ‡è®°ï¼ŒSYNAPAEæœåŠ¡å™¨ä¸å¯ä»¥ä½¿ç”¨fakeipçš„DNSä»£ç†ä¸Šç½‘ï¼Œåªèƒ½ç”¨æœ¬åœ°çš„ç½‘ç»œï¼Œä¸ç„¶ï¼Œä¼šæ”¶ä¸åˆ°æ¶ˆæ¯NTFYä¼šå‡ºé—®é¢˜ï¼&lt;/h4&gt;
&lt;p&gt;å‰è¨€
é¦–å…ˆå¿…é¡»ä»‹ç»ä¸‹Matrixã€‚Matrixæ˜¯ä¸€ä¸ªå¼€æºã€å¯äº¤äº’ã€å»ä¸­å¿ƒåŒ–çš„å®æ—¶é€šä¿¡æœåŠ¡æ¡†æ¶ã€‚ä½¿ç”¨Matrixå¯ä»¥æ­å»ºå®‰å…¨çš„é€šä¿¡æœåŠ¡å™¨ï¼Œé…åˆæ”¯æŒ Matrix çš„å®¢æˆ·ç«¯å¯ä»¥å®ç°ä¸ªäººã€å›¢é˜Ÿé—´çš„å®æ—¶èŠå¤©äº¤äº’ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å¸¸è§çš„QQã€å¾®ä¿¡ã€é’‰é’‰ç›¸æ¯”ï¼ŒMatrixçš„ç‰¹ç‚¹å°±æ˜¯å¼€æºï¼Œå¯ç§æœ‰åŒ–éƒ¨ç½²ï¼Œä¿è¯é€šä¿¡çš„å®‰å…¨å’Œéšç§ã€‚ä¸Rocket.chatã€MatterMostç›¸æ¯”ï¼Œmatrixçš„ç‰¹ç‚¹è¿˜è¦å†åŠ ä¸Šå»ä¸­å¿ƒåŒ–ã€‚æ¯ä¸ªè¿è¡ŒMatrixçš„æœåŠ¡å™¨éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©åœ¨ä»»æ„èŠ‚ç‚¹æ³¨å†Œã€è¿æ¥ï¼ŒåŒä¸€ä¸ªèŠ‚ç‚¹å†…çš„ç”¨æˆ·å¯ä»¥ä»»æ„é€šä¿¡ã€‚åŒæ—¶ï¼ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´ä¹Ÿå¯ä»¥é€šè¿‡è”é”ï¼ˆFederationï¼‰æœºåˆ¶è¿›è¡Œé€šä¿¡ï¼Œå®ç°ä¸åŒèŠ‚ç‚¹çš„ç”¨æˆ·ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºMatrixåªæ˜¯ä¸ªæ¡†æ¶ï¼Œå¯ä»¥æœ‰å¾ˆå¤šå®ç°ï¼Œæœ¬æ–‡ä½¿ç”¨çš„synapseå°±æ˜¯å…¶ä¸­ä¸€ä¸ªæœåŠ¡ç«¯å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†å®‰è£…æœåŠ¡ç«¯ï¼Œæœ¬æ–‡è¿˜æœ‰å®‰è£…element webç«¯çš„æ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;æ­ä¸€ä¸ªdemoå¹¶ä¸è€—èµ„æºï¼ŒåŠ ä¸Špostgresqlæ•°æ®åº“æ‰ç”¨äº†200MBå†…å­˜ä¸åˆ°ï¼Œå¦‚æœç”¨é»˜è®¤çš„sqliteæ•°æ®åº“ä¼šæ›´çœå†…å­˜ã€‚&lt;/p&gt;
&lt;h1 id="å®‰è£…æœåŠ¡ç«¯"&gt;å®‰è£…æœåŠ¡ç«¯&lt;/h1&gt;
&lt;h2 id="æ›´æ–°ç¯å¢ƒ"&gt;æ›´æ–°ç¯å¢ƒ&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt update -y &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt upgrade -y &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt install -y curl wget sudo socat
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="å®‰è£…-docker"&gt;å®‰è£… Docker&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -fsSL https://get.docker.com -o get-docker.sh &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sh get-docker.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -L &lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/docker/compose/releases/download/v2.16.0/docker-compose-&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;uname -s&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;-&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;uname -m&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; -o /usr/local/bin/docker-compose 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chmod +x /usr/local/bin/docker-compose
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æ­å»ºsynapse"&gt;æ­å»ºSynapse&lt;/h2&gt;
&lt;p&gt;æŒ‰ç…§æ•™ç¨‹å»ºç«‹/data/synapse/ä¸‹çš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š&lt;/p&gt;</description></item><item><title>Vyosä¸‹å®‰è£…ddns-Go</title><link>https://hanigege.github.io/posts/routers/vyos%E4%B8%8B%E5%AE%89%E8%A3%85ddns-go/</link><pubDate>Sun, 11 May 2025 14:51:24 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/vyos%E4%B8%8B%E5%AE%89%E8%A3%85ddns-go/</guid><description>&lt;br&gt;
&lt;h2 id="è¿™é‡Œä½¿ç”¨vyosè‡ªç®¡ç†å®¹å™¨çš„æ–¹æ³•å¯ä»¥è·å–åˆ°ç½‘å¡å…¬ç½‘ip"&gt;è¿™é‡Œä½¿ç”¨vyosè‡ªç®¡ç†å®¹å™¨çš„æ–¹æ³•,å¯ä»¥è·å–åˆ°ç½‘å¡å…¬ç½‘ip&lt;/h2&gt;
&lt;h3 id="æ“ä½œå‰vyosæœ¬æœºå…ˆç§‘å­¦ä¸ç„¶æ²¡æ³•æ¥dockeré•œåƒ"&gt;æ“ä½œå‰ï¼Œvyosæœ¬æœºå…ˆç§‘å­¦ï¼Œä¸ç„¶æ²¡æ³•æ¥dockeré•œåƒ&lt;/h3&gt;
&lt;p&gt;Â Â Â Â è¿™ç§æ¨¡å¼ä¸å¯ä»¥è®¾ç½®å•ç‹¬çš„IP,å› ä¸ºä½¿ç”¨çš„æ˜¯vyosä¸»æœºçš„ip&lt;/p&gt;
&lt;p&gt;Â Â Â Â æ¡¥æ¥çš„ç½‘ç»œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å»ºä¸€ä¸ªçš„ï¼šåŸå› æ˜¯æ–¹ä¾¿ ddns-goä½¿ç”¨å†…ç½‘çš„ç½‘å€ç™»å½• ï¼š172.23.0.1 (å¯é€‰ï¼Œéå¿…é¡»ï¼Œä¹Ÿå¯ä»¥ç”¨å†…å¤–ç½‘å£ipç™»å½•)&lt;/p&gt;
&lt;h2 id="åˆ›å»ºæ¡¥æ¥ç½‘ç»œ"&gt;åˆ›å»ºæ¡¥æ¥ç½‘ç»œ&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set container network ct-network prefix &lt;span style="color:#e6db74"&gt;&amp;#39;172.23.0.0/24&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æå‰å»ºç«‹å¥½ddnsçš„æ˜ å°„æœ¬åœ°æŒä¹…ç›®å½•"&gt;æå‰å»ºç«‹å¥½ddnsçš„æ˜ å°„æœ¬åœ°æŒä¹…ç›®å½•ï¼š&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir -p /config/containers/ddns
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æ‹‰å–å®¹å™¨é•œåƒ"&gt;æ‹‰å–å®¹å™¨é•œåƒ&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ add container image &lt;span style="color:#e6db74"&gt;&amp;#39;jeessy/ddns-go&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æ­å»ºddns-go"&gt;æ­å»ºddns-go&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set container name ddns-go allow-host-networks &lt;span style="color:#75715e"&gt;#å…è®¸å®¹å™¨ä½¿ç”¨ä¸»æœºç½‘ç»œï¼ˆhost networkï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¹å™¨ä¸ä¼šæœ‰ç‹¬ç«‹çš„ç½‘ç»œæ¥å£ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ VyOS ä¸»æœºçš„ç½‘ç»œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set container name ddns-go image &lt;span style="color:#e6db74"&gt;&amp;#39;docker.io/jeessy/ddns-go&amp;#39;&lt;/span&gt; &lt;span style="color:#75715e"&gt;#æŒ‡å®šè¯¥å®¹å™¨ä½¿ç”¨çš„ Docker é•œåƒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set container name ddns-go restart &lt;span style="color:#e6db74"&gt;&amp;#39;always&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set container name ddns-go volume config destination &lt;span style="color:#e6db74"&gt;&amp;#39;/root/&amp;#39;&lt;/span&gt; &lt;span style="color:#75715e"&gt;#æ˜ å°„å®¹å™¨å†…çš„è·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set container name ddns-go volume config source &lt;span style="color:#e6db74"&gt;&amp;#39;/config/containers/ddns&amp;#39;&lt;/span&gt; &lt;span style="color:#75715e"&gt;#æ˜ å°„æœ¬åœ°çš„è·¯å½¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æŸ¥çœ‹è¿è¡Œæ˜¯å¦æˆåŠŸæœ‰upå³æˆåŠŸ"&gt;æŸ¥çœ‹è¿è¡Œæ˜¯å¦æˆåŠŸæœ‰UPå³æˆåŠŸ&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo podman ps -s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo podman ps -a
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ç™»å½•ç®¡ç†å¹³å°"&gt;ç™»å½•ç®¡ç†å¹³å°&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;http://IP:9876
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç™»å½•ç”¨æˆ·åï¼šadmin&lt;/p&gt;</description></item><item><title>è®©freebsdåœ¨ç»ˆç«¯ä¸‹æ¢æº</title><link>https://hanigege.github.io/posts/freebsd/%E8%AE%A9freebsd%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E6%8D%A2%E6%BA%90/</link><pubDate>Sun, 11 May 2025 13:52:12 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/%E8%AE%A9freebsd%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E6%8D%A2%E6%BA%90/</guid><description>&lt;br&gt;
&lt;h2 id="pkg-æ¢æº"&gt;pkg æ¢æº&lt;/h2&gt;
&lt;p&gt;è‹¥è¦è·å–æ»šåŠ¨æ›´æ–°çš„åŒ…ï¼Œè¯·å°† quarterly ä¿®æ”¹ä¸º latestã€‚äºŒè€…åŒºåˆ«è§ FreeBSD æ‰‹å†Œã€‚è¯·æ³¨æ„ï¼ŒCURRENT ç‰ˆæœ¬åªæœ‰ latestã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å‘½ä»¤ä¿®æ”¹ç³»ç»Ÿçº§ pkg æºä½¿ç”¨ latestï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sed -i &amp;#39;&amp;#39; &amp;#39;s/quarterly/latest/g&amp;#39; /etc/pkg/FreeBSD.conf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»ºç”¨æˆ·çº§æºç›®å½•å’Œæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# mkdir -p /usr/local/etc/pkg/repos
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# nano /usr/local/etc/pkg/repos/mirrors.conf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼ˆUSTCï¼‰&lt;/p&gt;
&lt;p&gt;å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ustc: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;url: &amp;#34;http://mirrors.ustc.edu.cn/freebsd-pkg/${ABI}/latest&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;FreeBSD: { enabled: no }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å—äº¬å¤§å­¦å¼€æºé•œåƒç«™&lt;/p&gt;
&lt;p&gt;å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nju: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;url: &amp;#34;http://mirrors.nju.edu.cn/freebsd-pkg/${ABI}/latest&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;FreeBSD: { enabled: no }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç½‘æ˜“å¼€æºé•œåƒç«™&lt;/p&gt;
&lt;p&gt;å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;163: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;url: &amp;#34;http://mirrors.163.com/freebsd-pkg/${ABI}/latest&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;FreeBSD: { enabled: no }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ports-æºä»¥æºä»£ç æ–¹å¼ç¼–è¯‘å®‰è£…è½¯ä»¶çš„åŒ…ç®¡ç†å™¨"&gt;ports æºï¼šä»¥æºä»£ç æ–¹å¼ç¼–è¯‘å®‰è£…è½¯ä»¶çš„åŒ…ç®¡ç†å™¨&lt;/h2&gt;
&lt;p&gt;ä¸‹è½½ ports
è¿™ä¸ªæºæ˜¯ä¸‹è½½ ports æœ¬èº«çš„æºã€‚ç­‰åŒäºä»¥å‰çš„ portsnapã€‚&lt;/p&gt;</description></item><item><title>è®©freebsdåœ¨ç»ˆç«¯ä¸‹æ”¯æŒä¸­æ–‡</title><link>https://hanigege.github.io/posts/freebsd/%E8%AE%A9freebsd%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87/</link><pubDate>Sun, 11 May 2025 13:48:46 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/%E8%AE%A9freebsd%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%B8%8B%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87/</guid><description>&lt;br&gt;
&lt;h2 id="ç¼–è¾‘etcloginconfç»“å°¾å¤„æˆ‘ä¸€èˆ¬åœ¨russianæ®µè½åé¢æ·»åŠ "&gt;ç¼–è¾‘/etc/login.confï¼Œç»“å°¾å¤„ï¼ˆæˆ‘ä¸€èˆ¬åœ¨russianæ®µè½åé¢ï¼‰æ·»åŠ &lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chinese|Chinese Users Accounts:&lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; :charset&lt;span style="color:#f92672"&gt;=&lt;/span&gt;UTF-8:&lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; :lang&lt;span style="color:#f92672"&gt;=&lt;/span&gt;zh_CN.UTF-8:&lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; :setenv&lt;span style="color:#f92672"&gt;=&lt;/span&gt;LC_ALL&lt;span style="color:#f92672"&gt;=&lt;/span&gt;zh_CN.UTF-8:&lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; :tc&lt;span style="color:#f92672"&gt;=&lt;/span&gt;default:
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä¹‹åè¿è¡Œ"&gt;ä¹‹åè¿è¡Œ&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cap_mkdb /etc/login.conf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pw usermod root -L chinese
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Freebsdç¼–è¯‘å®‰è£…å’Œä½¿ç”¨bash</title><link>https://hanigege.github.io/posts/freebsd/freebsd%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8bash/</link><pubDate>Sun, 11 May 2025 13:33:20 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8bash/</guid><description>&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;freebsdç³»ç»Ÿæˆ‘å»ºè®®æ˜¯ç”¨æ™®é€šç”¨æˆ·ç™»å½•ä½¿ç”¨ï¼ŒbashæŒ‡ä»¤é›†åªä¿®æ”¹æ™®é€šç”¨æˆ·ä½¿ç”¨ï¼Œrootç”¨æˆ·ä¸è¦æ”¹ã€‚
&lt;br&gt;&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ğŸ§± åŸå› ä¸€ï¼šbash é€šå¸¸å®‰è£…åœ¨ /usr/local/binï¼Œè€Œä¸æ˜¯ /bin
&lt;br&gt;&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FreeBSD éµå¾ªä¼ ç»Ÿ Unix çš„ç›®å½•ç»“æ„ï¼Œç³»ç»Ÿæ ¸å¿ƒå·¥å…·ä½äº /binã€/sbinã€/usr/bin ç­‰ï¼Œè€Œ /usr/local/bin æ˜¯ç”¨äºç¬¬ä¸‰æ–¹è½¯ä»¶çš„ã€‚&lt;br&gt;&lt;br&gt;
&lt;p&gt;Â Â Â Â å¦‚æœä½ å°† root çš„ shell æ”¹ä¸º /usr/local/bin/bashï¼Œä½† /usr/local æ²¡æŒ‚è½½æˆ–å‡ºæ•…éšœäº†ï¼Œå°±æ— æ³•ç™»å½•æˆ–ä¿®å¤ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;Â Â Â Â è¿™åœ¨ å•ç”¨æˆ·æ¨¡å¼ï¼ˆsingle user modeï¼‰æˆ–ç³»ç»Ÿä¿®å¤ç¯å¢ƒä¸­ æ˜¯ä¸ªå¤§é—®é¢˜ï¼šç³»ç»Ÿé€šå¸¸åªæŒ‚è½½äº†æ ¹åˆ†åŒº /ï¼Œå¹¶ä¸ä¼šæŒ‚è½½ /usrã€‚&lt;/p&gt;
&lt;p&gt;â¸»&lt;/p&gt;
&lt;p&gt;ğŸ§¯ åŸå› äºŒï¼šç³»ç»Ÿå¯åŠ¨æ—¶çš„æœ€å°å¯ç”¨ç¯å¢ƒä¸­æ²¡æœ‰ bash&lt;/p&gt;
&lt;p&gt;Â Â Â Â ç³»ç»Ÿå¯åŠ¨æ—©æœŸå¯èƒ½ bash è¿˜æ²¡è¢«åŠ è½½ï¼Œroot å°±å¿…é¡»ä¾èµ– /bin/sh ä¹‹ç±»çš„æœ€åŸºæœ¬ shellã€‚
Â Â Â Â å¦‚æœä½ ç”¨çš„æ˜¯ bashï¼Œè€Œ bash åˆä¸å¯ç”¨ï¼Œé‚£ä½ ç”šè‡³è¿ shell éƒ½æ‰“ä¸å¼€ã€‚&lt;/p&gt;
&lt;h2 id="1å®‰è£…bash"&gt;1.å®‰è£…bash&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd /usr/ports/shells/bash
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;make install clean
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨/binç›®å½•ä¸‹é¢åšä¸€ä¸ªç¬¦å·è¿æ¥ã€‚ï¼ˆè¿™ä¸€æ­¥å¯ä»¥ä¸åšï¼Œå¯é€‰ï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ln -s /usr/local/bin/bash /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="åŠ å…¥bashå¦‚æœä¸Šä¸€æ­¥åšäº†"&gt;åŠ å…¥bash,å¦‚æœä¸Šä¸€æ­¥åšäº†&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#39;/bin/bash&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; /etc/shells
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¿æŒé»˜è®¤è·¯å¾„çš„ç”¨ä¸‹é¢çš„&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#39;/usr/local/bin/bash&amp;#39;&lt;/span&gt; | sudo tee -a /etc/shells
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;4.æ›´æ”¹ç”¨æˆ·shell(rootç”¨æˆ·ä¸å»ºè®®ä¿®æ”¹ï¼‰&lt;/p&gt;</description></item><item><title>å®‰è£…freebsd13.1æµç¨‹(14.2ç‰ˆæœ¬çš„ä¸€æ ·)</title><link>https://hanigege.github.io/posts/freebsd/freebsd-install/</link><pubDate>Sun, 11 May 2025 13:12:51 +0800</pubDate><guid>https://hanigege.github.io/posts/freebsd/freebsd-install/</guid><description>&lt;br&gt;
&lt;h2 id="å¼€å§‹å®‰è£…å›è½¦"&gt;å¼€å§‹å®‰è£…ï¼Œå›è½¦&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.07.59@2x.png" alt="CleanShot 2025-05-05 at 07.07.59@2x"&gt;&lt;/p&gt;
&lt;h2 id="ç›´æ¥å›è½¦"&gt;ç›´æ¥å›è½¦&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.08.27@2x.png" alt="CleanShot 2025-05-05 at 07.08.27@2x"&gt;&lt;/p&gt;
&lt;h2 id="å¡«å†™ä¸»æœºå-å¯ç›´æ¥å›è½¦"&gt;å¡«å†™ä¸»æœºå ï¼ˆå¯ç›´æ¥å›è½¦ï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.09.40@2x.png" alt="CleanShot 2025-05-05 at 07.09.40@2x"&gt;&lt;/p&gt;
&lt;h2 id="é»˜è®¤çš„åŸºç¡€ä¸Šå¤šåŠ ä¸€ä¸ªå®‰è£…ports"&gt;é»˜è®¤çš„åŸºç¡€ä¸Šå¤šåŠ ä¸€ä¸ªå®‰è£…ports&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.12.20@2x.png" alt="CleanShot 2025-05-05 at 07.12.20@2x"&gt;&lt;/p&gt;
&lt;h2 id="è¿™é‡Œæˆ‘é€‰æ‹©ufsè™šæ‹Ÿæœºæˆ‘å»ºè®®é€‰ufs"&gt;è¿™é‡Œæˆ‘é€‰æ‹©UFSï¼ˆè™šæ‹Ÿæœºæˆ‘å»ºè®®é€‰UFSï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.12.44@2x.png" alt="CleanShot 2025-05-05 at 07.12.44@2x"&gt;&lt;/p&gt;
&lt;h2 id="ç›´æ¥å›è½¦-1"&gt;ç›´æ¥å›è½¦&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.13.30@2x.png" alt="CleanShot 2025-05-05 at 07.13.30@2x"&gt;&lt;/p&gt;
&lt;h2 id="é€‰æ‹©gpt"&gt;é€‰æ‹©GPT&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.14.48@2x.png" alt="CleanShot 2025-05-05 at 07.14.48@2x"&gt;&lt;/p&gt;
&lt;h2 id="finish"&gt;finish&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.15.11@2x.png" alt="CleanShot 2025-05-05 at 07.15.11@2x"&gt;&lt;/p&gt;
&lt;h2 id="commit"&gt;commit&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.15.38@2x.png" alt="CleanShot 2025-05-05 at 07.15.38@2x"&gt;&lt;/p&gt;
&lt;h2 id="å¼€å§‹å®‰è£…"&gt;å¼€å§‹å®‰è£…&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.16.02@2x.png" alt="CleanShot 2025-05-05 at 07.16.02@2x"&gt;&lt;/p&gt;
&lt;h2 id="å®‰è£…å¥½åä¼šæç¤ºè®¾å®šrootå¯†ç "&gt;å®‰è£…å¥½åä¼šæç¤ºè®¾å®šrootå¯†ç &lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.16.32@2x.png" alt="CleanShot 2025-05-05 at 07.16.32@2x"&gt;&lt;/p&gt;
&lt;h2 id="ok-è®¾ç½®ç½‘ç»œ"&gt;ok è®¾ç½®ç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.17.10@2x.png" alt="CleanShot 2025-05-05 at 07.17.10@2x"&gt;&lt;/p&gt;
&lt;h2 id="é€‰no-è‡ªè®¾ç½®ipåœ°å€"&gt;é€‰no ,è‡ªè®¾ç½®ipåœ°å€&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.17.43@2x.png" alt="CleanShot 2025-05-05 at 07.17.43@2x"&gt;&lt;/p&gt;
&lt;h2 id="è®¾ç½®å®Œç‚¹ok"&gt;è®¾ç½®å®Œç‚¹ok&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-05%20at%2007.18.33@2x.png" alt="CleanShot 2025-05-05 at 07.18.33@2x"&gt;&lt;/p&gt;</description></item><item><title>Alpine Linuxæ­å»ºsing-boxæœåŠ¡ç«¯</title><link>https://hanigege.github.io/posts/linux/alpine-linux-sing-box/</link><pubDate>Sun, 11 May 2025 12:14:50 +0800</pubDate><guid>https://hanigege.github.io/posts/linux/alpine-linux-sing-box/</guid><description>&lt;br&gt;
ç°åœ¨æœ‰å¾ˆå¤šä¾¿å®œNATé¸¡å› ä¸ºé…ç½®è¾ƒä½ï¼Œæ‰€ä»¥åªé€‰ç”¨çš„æ˜¯Alpine Linux,æ‰€ä»¥æˆ‘å°±éšä¾¿å†™äº†ä¸ªæ•™ç¨‹æ–¹ä¾¿ä½¿ç”¨ã€‚
&lt;h2 id="å®‰è£…ä¾èµ–"&gt;å®‰è£…ä¾èµ–&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆå…ˆå®‰è£…singbox,è¿˜æœ‰vimï¼ˆæ–¹ä¾¿ç¼–è¾‘ï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#34;@testing https://dl-cdn.alpinelinux.org/alpine/edge/testing&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#f92672"&gt;/&lt;/span&gt;etc&lt;span style="color:#f92672"&gt;/&lt;/span&gt;apk&lt;span style="color:#f92672"&gt;/&lt;/span&gt;repositories
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apk add sing&lt;span style="color:#f92672"&gt;-&lt;/span&gt;box&lt;span style="color:#a6e22e"&gt;@testing&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apk add vim
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rc&lt;span style="color:#f92672"&gt;-&lt;/span&gt;update add sing&lt;span style="color:#f92672"&gt;-&lt;/span&gt;box default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="è®¾ç½®è‡ªå¯"&gt;è®¾ç½®è‡ªå¯.&lt;/h2&gt;
&lt;h4 id="1è¿™é‡Œè¦è¯´æ˜ä¸€ä¸‹ä¸Šé¢å®‰è£…å¥½åé»˜è®¤ä¼šè‡ªåŠ¨ç”Ÿæˆå¯åŠ¨æ–‡ä»¶etcinitdsing-box-"&gt;1.è¿™é‡Œè¦è¯´æ˜ä¸€ä¸‹ï¼Œä¸Šé¢å®‰è£…å¥½åé»˜è®¤ä¼šè‡ªåŠ¨ç”Ÿæˆå¯åŠ¨æ–‡ä»¶&lt;code&gt;/etc/init.d/sing-box &lt;/code&gt;,&lt;/h4&gt;
&lt;p&gt;é…ç½®æ–‡ä»¶åœ¨
&lt;code&gt;/etc/sing-box/config.json&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="2å¦‚æœç”¨ä¸‹é¢è‡ªå»ºçš„é»˜è®¤çš„å°±ä¸ç”¨å¯åŠ¨å°±è¡Œäº†æ›´ä¸è¦è®¾ç½®è‡ªå¯åŠ¨ä»¥å…å†²çª"&gt;2.å¦‚æœç”¨ä¸‹é¢è‡ªå»ºçš„ï¼Œé»˜è®¤çš„å°±ä¸ç”¨å¯åŠ¨å°±è¡Œäº†ï¼Œæ›´ä¸è¦è®¾ç½®è‡ªå¯åŠ¨ï¼Œä»¥å…å†²çªã€‚&lt;/h4&gt;
&lt;p&gt;ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼š&lt;code&gt;vim /etc/init.d/singbox&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#!/sbin/openrc-run
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;command&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;/usr/bin/sing-box&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;command_args&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;run -c /root/config.json&amp;#34;&lt;/span&gt; &lt;span style="color:#75715e"&gt;#æ˜¯æ‚¨çš„é…ç½®æ–‡ä»¶ä½ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;description&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;singbox service&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;depend&lt;span style="color:#f92672"&gt;()&lt;/span&gt; &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; need net
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; use logger
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;start&lt;span style="color:#f92672"&gt;()&lt;/span&gt; &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ebegin &lt;span style="color:#e6db74"&gt;&amp;#34;Starting singbox&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; start-stop-daemon --start --background --exec $command -- $command_args
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; eend $?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;stop&lt;span style="color:#f92672"&gt;()&lt;/span&gt; &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ebegin &lt;span style="color:#e6db74"&gt;&amp;#34;Stopping singbox&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; start-stop-daemon --stop --exec $command
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; eend $?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååŠ å…¥OpenRCè‡ªå¯åŠ¨&lt;/p&gt;</description></item><item><title>Sing-Boxä¸­çš„ssæœåŠ¡çš„å†™æ³•é…ç½®</title><link>https://hanigege.github.io/posts/routers/sing-box-ss-server/</link><pubDate>Sun, 11 May 2025 12:07:27 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/sing-box-ss-server/</guid><description>&lt;h2 id="æœåŠ¡ç«¯"&gt;æœåŠ¡ç«¯ï¼š&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;shadowsocks&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;listen&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;::&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;listen_port&amp;#34;&lt;/span&gt;: 58442,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;method&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;chacha20-ietf-poly1305&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;password&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Um5zktQDo6GKqM1L/lLzwg==&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;multiplex&amp;#34;&lt;/span&gt;: &lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;enabled&amp;#34;&lt;/span&gt;: true
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="å®¢æˆ·ç«¯"&gt;å®¢æˆ·ç«¯ï¼š&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;shadowsocks&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;tag&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;ss-in-jygg-ros&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;server&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;ä½ çš„åŸŸå.xyz&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;server_port&amp;#34;&lt;/span&gt;: 58442,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;network_strategy&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;hybrid&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;method&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;chacha20-ietf-poly1305&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;password&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Um5zktQDo6GKqM1L/lLzwg==&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;udp_over_tcp&amp;#34;&lt;/span&gt;: false
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Downloads</title><link>https://hanigege.github.io/downloads/</link><pubDate>Sun, 11 May 2025 11:50:45 +0800</pubDate><guid>https://hanigege.github.io/downloads/</guid><description>&lt;h2 id="ä¸‰æ±‡smg4004-4lcçš„å‡çº§æ–‡ä»¶"&gt;ä¸‰æ±‡SMG4004-4LCçš„å‡çº§æ–‡ä»¶&lt;/h2&gt;
&lt;br&gt;
&lt;p&gt;1ã€å…ˆå‡çº§webå›ºä»¶åŒ…
&lt;a href="https://drive.google.com/file/d/1NApkdy91PhARGWWxVDafBiDEFvK0_8G2/view?usp=sharing"&gt;install4_2.2.8_2020092516.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2ã€å†å‡çº§åº•å±‚å›ºä»¶åŒ…
&lt;a href="https://drive.google.com/file/d/1vYljqzx4Zi0f0cRjymoxKoxWMq-LJbNN/view?usp=sharing"&gt;install4_FPGA_1.11_2.11_3.032018122015.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="è™šæ‹Ÿæœºæ‰¿æ¥ä¸‰æ±‡å’Œtelegramæ”¶å‘çŸ­ä¿¡çš„æœºå™¨äººå¯åŠ¨æ–‡ä»¶"&gt;è™šæ‹Ÿæœºæ‰¿æ¥ä¸‰æ±‡å’Œtelegramæ”¶å‘çŸ­ä¿¡çš„æœºå™¨äººå¯åŠ¨æ–‡ä»¶&lt;/h2&gt;
&lt;br&gt;
&lt;p&gt;è®°çš„ä¿®æ”¹å¯åŠ¨æ–‡ä»¶ä¸­çš„å‚æ•°ï¼Œé‡Œé¢æœ‰æ ‡æ³¨ã€‚&lt;a href="https://drive.google.com/file/d/1yJ5ZFjRru2csSIyduJ700zOy8zPUis7G/view?usp=sharing"&gt;sms.py&lt;/a&gt;&lt;/p&gt;</description></item><item><title>å‡ºå›½è‡ªå»ºvoip(äºŒ.2)ä¸‰æ±‡SMG4004-4LCçš„é…ç½®æ–¹æ³•æµ‹è¯•ç”µè¯å‘¼å«</title><link>https://hanigege.github.io/posts/other/sanhui-smg4004-4lc-set/</link><pubDate>Sun, 11 May 2025 11:29:46 +0800</pubDate><guid>https://hanigege.github.io/posts/other/sanhui-smg4004-4lc-set/</guid><description>&lt;h2 id="æˆ‘ä½¿ç”¨çš„æ˜¯ä¸‰æ±‡smg4004-4lcç®—æ˜¯æ¡åƒåœ¾äº†è¿™æ˜¯ä»¥å‰çš„è€æ¬¾4å£è¯­éŸ³ç½‘å…³ç›®å‰è¿™æ¬¾åªèƒ½æ”¯æŒ2gç½‘ç»œå’ŒçŸ­ä¿¡æˆ‘æµ‹è¯•æˆ‘è¿™ä¸ªåœ°åŒºåªæ”¯æŒç§»åŠ¨å’Œè”é€šä¸è¿‡ä¹Ÿå¤Ÿç”¨äº†"&gt;æˆ‘ä½¿ç”¨çš„æ˜¯ä¸‰æ±‡SMG4004-4LCï¼ˆç®—æ˜¯æ¡åƒåœ¾äº†ï¼Œè¿™æ˜¯ä»¥å‰çš„è€æ¬¾ï¼‰ï¼Œ4å£è¯­éŸ³ç½‘å…³ï¼Œç›®å‰è¿™æ¬¾åªèƒ½æ”¯æŒ2gç½‘ç»œå’ŒçŸ­ä¿¡ï¼Œæˆ‘æµ‹è¯•æˆ‘è¿™ä¸ªåœ°åŒºåªæ”¯æŒç§»åŠ¨å’Œè”é€šã€‚ä¸è¿‡ä¹Ÿå¤Ÿç”¨äº†ã€‚&lt;/h2&gt;
&lt;h4 id="ä½¿ç”¨å‰éœ€è¦å…ˆå‡èƒ½è¿™æ¬¾è®¾å¤‡çš„å›ºä»¶ç›¸å…³å‡çº§æ–‡ä»¶æœ¬ç«™æœ‰æä¾›ä¸‹è½½"&gt;ä½¿ç”¨å‰éœ€è¦å…ˆå‡èƒ½è¿™æ¬¾è®¾å¤‡çš„å›ºä»¶ï¼Œç›¸å…³å‡çº§æ–‡ä»¶ï¼Œæœ¬ç«™æœ‰æä¾›ä¸‹è½½ã€‚&lt;/h4&gt;
&lt;p&gt;ç…§ç€ä¸‹é¢è®¾ç½®ï¼Œå°±å¯ä»¥æµ‹è¯•ç”µè¯å‘¼å«äº†ï¼š
&lt;img src="assets/CleanShot%202025-05-11%20at%2011.31.37@2x.png" alt="CleanShot 2025-05-11 at 11.31.37@2x"&gt;
&lt;img src="assets/CleanShot%202025-05-11%20at%2011.31.50@2x.png" alt="CleanShot 2025-05-11 at 11.31.50@2x"&gt;
&lt;img src="assets/CleanShot%202025-05-11%20at%2011.32.01@2x.png" alt="CleanShot 2025-05-11 at 11.32.01@2x"&gt;&lt;/p&gt;</description></item><item><title>å‡ºå›½è‡ªå»ºvoip(äºŒï¼‰åˆ›å»º Telegram æœºå™¨äºº</title><link>https://hanigege.github.io/posts/other/sanhui-telegram-bot-4/</link><pubDate>Sun, 11 May 2025 11:19:47 +0800</pubDate><guid>https://hanigege.github.io/posts/other/sanhui-telegram-bot-4/</guid><description>&lt;p&gt;è¦é€šè¿‡ Telegram æœºå™¨äºº å¯¹æ¥ ä¸‰æ±‡è¯­éŸ³ç½‘å…³ï¼ˆSMG4000-C1LCï¼‰ çš„çŸ­ä¿¡åŠŸèƒ½ï¼Œæ‚¨éœ€è¦å®Œæˆä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;h2 id="æ­¥éª¤-1"&gt;æ­¥éª¤ 1ï¼š&lt;/h2&gt;
&lt;p&gt;æ‰“å¼€ Telegramï¼Œæœç´¢å¹¶ä¸ BotFather èŠå¤©ã€‚&lt;/p&gt;
&lt;p&gt;å‘é€å‘½ä»¤ /newbot æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æœºå™¨äººã€‚&lt;/p&gt;
&lt;p&gt;ç»™æœºå™¨äººèµ·ä¸ªåå­—å¹¶è®¾ç½®ç”¨æˆ·åã€‚&lt;/p&gt;
&lt;p&gt;BotFather ä¼šç»™ä½ ä¸€ä¸ª API Tokenï¼Œç”¨æ¥ä¸ Telegram æœºå™¨äººè¿›è¡Œäº¤äº’ã€‚ä¿å­˜å¥½è¿™ä¸ª &lt;code&gt;Token&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ­¥éª¤ 2ï¼šé…ç½®ä¸‰æ±‡ç½‘å…³å‘é€çŸ­ä¿¡
ä¸‰æ±‡è¯­éŸ³ç½‘å…³ä¸€èˆ¬æ”¯æŒé€šè¿‡ HTTP API æˆ– SMTP å‘é€çŸ­ä¿¡ã€‚é¦–å…ˆï¼Œç¡®ä¿ä¸‰æ±‡ç½‘å…³çš„çŸ­ä¿¡æœåŠ¡å·²ç»å¯ç”¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡æ¥å£å‘é€çŸ­ä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;æ­¥éª¤ 3ï¼šç¼–å†™ Telegram æœºå™¨äººå’Œä¸‰æ±‡ç½‘å…³çš„å¯¹æ¥è„šæœ¬ ï¼ˆæœ¬ç«™æœ‰æä¾›ä¸‹è½½ï¼‰
ä½ éœ€è¦ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œä½¿ç”¨ Telegram æœºå™¨äººè·å–ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ HTTP è¯·æ±‚å°†çŸ­ä¿¡å‘é€åˆ°ä¸‰æ±‡ç½‘å…³ã€‚&lt;/p&gt;
&lt;p&gt;æ­¥éª¤ 3.1ï¼šå®‰è£… Telegram Bot åº“ï¼ˆä¾‹å¦‚ Python çš„ python-telegram-botï¼‰ï¼ˆè¯¦æƒ…ï¼Œè¯·çœ‹voipå‡ºå›½ç³»åˆ—ä¸‰ï¼‰&lt;/p&gt;</description></item><item><title>å‡ºå›½è‡ªå»ºvoip(ä¸€)Freepbx16é…ç½®</title><link>https://hanigege.github.io/posts/other/freepbx16-set-all-1/</link><pubDate>Sun, 11 May 2025 06:43:58 +0800</pubDate><guid>https://hanigege.github.io/posts/other/freepbx16-set-all-1/</guid><description>&lt;br&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ä¸ºä»€ä¹ˆè¦å»ºå›å®¶voipç³»ç»Ÿï¼Œå‡ºå›½åï¼Œç”µè¯å°±æ˜¯å›½é™…é•¿é€”ï¼Œæ‰“ç”µè¯æ”¶å‘çŸ­ä¿¡éƒ½ä¸æ–¹ä¾¿ï¼Œæœ‰æ²¡æœ‰åŠæ³•å¯ä»¥åšåˆ°é€šè¿‡ç½‘ç»œä¼ é€’è¯­éŸ³å’Œæ”¶å‘çŸ­ä¿¡ï¼ˆåˆ©ç”¨telegramæœºå™¨äººï¼‰ï¼Œå½“ç„¶å¯ä»¥ï¼Œæ‰‹æœºå¡å¯ä»¥æ”¾åœ¨å›½å†…çš„å°è®¾å¤‡ä¸Šï¼Œè‡ªå·±æ‰‹æœºä¸Šè£…ä¸€ä¸ªsipè½¯ç”µè¯å®¢æˆ·ç«¯ï¼Œå³å¯å®Œå…¨å®ç°ï¼Œæ¥å¬æ‹¨æ‰“ç”µè¯ï¼Œæ”¶å‘çŸ­ä¿¡ï¼Œå¹¶ä¸”ä¸ä¼šå†å—åœ°åŸŸé™åˆ¶ï¼Œä»…é™å­¦ä¹ äº¤æµï¼Œå‹æƒ…æé†’ï¼Œä¸è¦åšè¿åå½“åœ°æ³•å¾‹æ³•è§„çš„äº‹ã€‚
&lt;h1 id="å¼€å§‹æ“ä½œ"&gt;å¼€å§‹æ“ä½œ&lt;/h1&gt;
&lt;h4 id="æ¶æ„"&gt;æ¶æ„&lt;/h4&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2011.14.14@2x.png" alt="CleanShot 2025-05-11 at 11.14.14@2x"&gt;&lt;/p&gt;
&lt;h2 id="freepbx16é¦–å…ˆä¿®æ”¹ipä¸ºå›ºå®šip"&gt;freepbx16é¦–å…ˆä¿®æ”¹ipä¸ºå›ºå®šip&lt;/h2&gt;
&lt;p&gt;å®‰è£…å¥½åï¼Œç³»ç»Ÿå…¶å®æ˜¯dhcpåŠ¨æ€è·å¾—ipçš„ï¼Œè¿›å…¥çœ‹äº†çœ‹ï¼Œæ˜¯Centosï¼Œæˆ‘ä»¬ä¸éœ€è¦dhcpï¼ŒæŠŠIPç»™å›ºå®šæ­»&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;vi &lt;span style="color:#f92672"&gt;/&lt;/span&gt;etc&lt;span style="color:#f92672"&gt;/&lt;/span&gt;sysconfig&lt;span style="color:#f92672"&gt;/&lt;/span&gt;network&lt;span style="color:#f92672"&gt;-&lt;/span&gt;scripts&lt;span style="color:#f92672"&gt;/&lt;/span&gt;ifcfg&lt;span style="color:#f92672"&gt;-&lt;/span&gt;eth0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸‹é¢çš„å†…å®¹è·Ÿå®é™…é…ç½®æ–‡ä»¶é‡Œçš„å†…å®¹ç›¸å¯¹æ›¿æ¢ï¼Œä¸€ä¸€å¯¹åº”æ›¿æ¢ï¼ŒåŸæ–‡ä»¶é‡Œçš„å†…å®¹å¯èƒ½æ›´å¤šä¸€äº›ï¼Œåªä¿®æ”¹ä¸‹é¢æœ‰çš„ï¼Œæ²¡æ¶‰åŠçš„ä¿æŒåŸæ¥çš„ï¼Œdnsä¸å¯ä»¥ç”¨ç§‘å­¦çš„ï¼Œåªå…è®¸ç”¨æœ¬åœ°ï¼Œä¸ç„¶ä¼šå½±å“åé¢ç³»ç»Ÿé‡Œnat-ipè·å–çš„å‡†ç¡®æ€§&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;TYPE=&amp;#34;Ethernet&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;BOOTPROTO=&amp;#34;static&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;IPADDR=10.8.2.60
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;NETMASK=255.255.255.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;GATEWAY=10.8.2.1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;DNS1=114.114.114.114
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;DEFROUTE=&amp;#34;yes&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;NAME=&amp;#34;eth0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;DEVICE=&amp;#34;eth0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ONBOOT=&amp;#34;yes&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‡å¯ï½&lt;/p&gt;
&lt;h1 id="freepbx16é…ç½®å›¾ä¾‹"&gt;freepbx16é…ç½®å›¾ä¾‹&lt;/h1&gt;
&lt;p&gt;freepbx16é»˜è®¤å®‰è£…åœ¨pveç³»ç»Ÿä¸Šå°±å¥½ï¼Œç™»å½•ç³»ç»Ÿå
ï¼š&lt;/p&gt;
&lt;h2 id="å…ˆè¿›è¡Œasterisk-sip-è®¾ç½®"&gt;å…ˆè¿›è¡Œasterisk sip è®¾ç½®&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2006.47.04@2x.png" alt="å…ˆè¿›è¡Œasterisk sip è®¾ç½®"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2006.56.27@2x.png" alt="CleanShot 2025-05-11 at 06.56.27@2x"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2006.59.32@2x.png" alt="CleanShot 2025-05-11 at 06.59.32@2x"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2007.03.35@2x.png" alt="CleanShot 2025-05-11 at 07.03.35@2x"&gt;&lt;/p&gt;
&lt;h2 id="ç°åœ¨å¼€å§‹è®¾ç½®ç³»ç»Ÿä¸­æ–‡åœ°åŒºæ—¶é—´"&gt;ç°åœ¨å¼€å§‹è®¾ç½®ç³»ç»Ÿä¸­æ–‡åœ°åŒºæ—¶é—´&lt;/h2&gt;
&lt;p&gt;é€‰æ‹©é«˜çº§è®¾ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-mysql" data-lang="mysql"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;é«˜çº§è®¾ç½®é‡Œä¸€å¼€å§‹è¿˜æœ‰ä¸€ä¸ªé€‰é¡¹æ˜¯å¯&lt;/span&gt;&lt;span style="color:#f92672"&gt;`&lt;/span&gt;chan_sip&lt;span style="color:#f92672"&gt;`&lt;/span&gt;,&lt;span style="color:#960050;background-color:#1e0010"&gt;è¿™ä¸ªè®°çš„è¦æ‰“å¼€ï¼Œä¸ç„¶åé¢è®¾ç½®ä¸­ç»§æˆ–è€…æ˜¯&lt;/span&gt;sipæœ‰äº›é€‰é¡¹ä¸æ˜¾ç¤º
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2007.07.49@2x.png" alt="CleanShot 2025-05-11 at 07.07.49@2x"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2007.09.16@2x.png" alt="CleanShot 2025-05-11 at 07.09.16@2x"&gt;&lt;/p&gt;
&lt;h2 id="å¼€å¯ä¸­ç»§é…ç½®-è¿™å—è®¾ç½®æ˜¯è¿æ¥ä¸‰æ±‡è¯­éŸ³ç½‘å…³çš„"&gt;å¼€å¯ä¸­ç»§é…ç½® ï¼ˆè¿™å—è®¾ç½®æ˜¯è¿æ¥ä¸‰æ±‡è¯­éŸ³ç½‘å…³çš„ï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;img src="assets/CleanShot%202025-05-11%20at%2007.12.25@2x.png" alt="CleanShot 2025-05-11 at 07.12.25@2x"&gt;
&lt;img src="assets/CleanShot%202025-05-11%20at%2007.13.45@2x.png" alt="CleanShot 2025-05-11 at 07.13.45@2x"&gt;
&lt;img src="assets/CleanShot%202025-05-11%20at%2007.13.57@2x.png" alt="CleanShot 2025-05-11 at 07.13.57@2x"&gt;
&lt;img src="assets/CleanShot%202025-05-11%20at%2007.14.08@2x.png" alt="CleanShot 2025-05-11 at 07.14.08@2x"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;host&lt;span style="color:#f92672"&gt;=&lt;/span&gt;dynamic
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;port&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;5160&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;type&lt;span style="color:#f92672"&gt;=&lt;/span&gt;peer
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;secret&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;666&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;context&lt;span style="color:#f92672"&gt;=&lt;/span&gt;from&lt;span style="color:#f92672"&gt;-&lt;/span&gt;pstn
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dtmfmode&lt;span style="color:#f92672"&gt;=&lt;/span&gt;rfc2833
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;insecure&lt;span style="color:#f92672"&gt;=&lt;/span&gt;no
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;qualify&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;3000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç…§å›¾å¡«å†™å°±å¥½ï¼Œè¿™é‡Œæ˜¯å†…ç½‘ä¼ è¾“ä½¿ç”¨çš„ï¼Œç«¯å£ä¸å½±å“å•¥&lt;/p&gt;</description></item><item><title>å‡ºå›½è‡ªå»ºvoip(ä¸‰.2ï¼‰Telegramæœºå™¨äººè¿æ¥ç¨‹åºè‡ªå¯åŠ¨(è¡¥å……ç¯‡)</title><link>https://hanigege.github.io/posts/other/telegram-sms-bot2/</link><pubDate>Sun, 11 May 2025 00:58:10 +0800</pubDate><guid>https://hanigege.github.io/posts/other/telegram-sms-bot2/</guid><description>&lt;h2 id="rootsms-source-myenvbinactivate"&gt;root@sms:~# source myenv/bin/activate&lt;/h2&gt;
&lt;h2 id="æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"&gt;æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;source myenv/bin/activate 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;(myenv) root@sms:~# nohup python sms.py &amp;gt; sms.log 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åå°å¯åŠ¨sms.py&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nohup python sms.py &amp;gt; sms.log 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;or
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nohup python sms.py &amp;gt; sms.log 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;(myenv) root@sms:~#
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢çš„ä¸¤æ¡å‘½ä»¤èƒ½ä¸èƒ½åšæˆè„šæœ¬ï¼Œè®¾ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨&lt;/p&gt;
&lt;p&gt;å¯ä»¥çš„ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª systemd æœåŠ¡ æˆ–è€… ç¼–å†™ä¸€ä¸ª shell è„šæœ¬ æ¥å®ç° Python è™šæ‹Ÿç¯å¢ƒçš„æ¿€æ´» å¹¶ è¿è¡Œ sms.py è„šæœ¬ï¼ŒåŒæ—¶è®¾ç½®ä¸º å¼€æœºè‡ªå¯åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;æ–¹æ³• 1ï¼šä½¿ç”¨ systemd (æ¨è)
é€‚ç”¨äº Debian/Ubuntu åŠå¤§å¤šæ•° Linux å‘è¡Œç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;æ­¥éª¤ 1ï¼šåˆ›å»º systemd æœåŠ¡æ–‡ä»¶
è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»º sms.serviceï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nano /etc/systemd/system/sms.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[Unit]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Description=SMS Python Service
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;After=network.target
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[Service]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;User=root
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;WorkingDirectory=/root
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ExecStart=/root/myenv/bin/python /root/sms.py
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Restart=always
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;StandardOutput=append:/root/sms.log
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;StandardError=append:/root/sms.log
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[Install]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;WantedBy=multi-user.target
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;âš  æ³¨æ„ï¼š&lt;/p&gt;</description></item><item><title>å‡ºå›½è‡ªå»ºvoip(ä¸‰ï¼‰è¿æ¥Telegramæœºå™¨äººæœ¬åœ°å®‰è£…</title><link>https://hanigege.github.io/posts/other/telegram-sms-bot/</link><pubDate>Sun, 11 May 2025 00:39:56 +0800</pubDate><guid>https://hanigege.github.io/posts/other/telegram-sms-bot/</guid><description>&lt;h3 id="å‰ææ˜¯telegramè‡ªå·±çš„æœºå™¨äººæå‰ç”Ÿæˆå¥½å¹¶è·å–ç›¸åº”çš„å¯†é’¥"&gt;å‰ææ˜¯telegramè‡ªå·±çš„æœºå™¨äººæå‰ç”Ÿæˆå¥½ï¼Œå¹¶è·å–ç›¸åº”çš„å¯†é’¥&lt;/h3&gt;
&lt;h1 id="æ‰“å¼€ä¸€å°è™šæ‹Ÿæœºå»ºè®®debian12"&gt;æ‰“å¼€ä¸€å°è™šæ‹Ÿæœºï¼ˆå»ºè®®debian12)&lt;/h1&gt;
&lt;h2 id="æ–¹æ³•-1ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"&gt;æ–¹æ³• 1ï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ª Python è™šæ‹Ÿç¯å¢ƒï¼Œå¹¶åœ¨å…¶ä¸­å®‰è£…æ‰€éœ€çš„åº“ã€‚è¿™æ ·å¯ä»¥é¿å…ç³»ç»Ÿçº§ Python ç¯å¢ƒçš„å†²çªã€‚&lt;/p&gt;
&lt;p&gt;å®‰è£… python3-venvï¼ˆå¦‚æœæœªå®‰è£…ï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt install python3&lt;span style="color:#f92672"&gt;-&lt;/span&gt;venv
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; python3 &lt;span style="color:#f92672"&gt;-&lt;/span&gt;m venv myenv
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;source myenv&lt;span style="color:#f92672"&gt;/&lt;/span&gt;bin&lt;span style="color:#f92672"&gt;/&lt;/span&gt;activate
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… python-telegram-bot&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pip install python&lt;span style="color:#f92672"&gt;-&lt;/span&gt;telegram&lt;span style="color:#f92672"&gt;-&lt;/span&gt;bot smpplib
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿è¡Œè„šæœ¬ï¼šä½ å¯ä»¥åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œä½ çš„ Telegram æœºå™¨äººè„šæœ¬,è„šæœ¬&lt;code&gt;sms.py&lt;/code&gt;ä¸‹è½½
å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;python sms&lt;span style="color:#f92672"&gt;.&lt;/span&gt;py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;deactivate
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="è¿è¡Œè„šæœ¬æœ‰ä¸‰ç§æ–¹æ¡ˆä¸€ç§æ˜¯è¿è¡Œåœ¨tmuxè™šæ‹Ÿçª—å£ä¸‹äºŒç§æ˜¯ç›´æ¥æœ¬åœ°åå°è¿è¡Œä¸‰ç§systemdè¿›è¡Œç®¡ç†-å»ºè®®ç¬¬ä¸‰ç§"&gt;è¿è¡Œè„šæœ¬æœ‰ä¸‰ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯è¿è¡Œåœ¨tmuxè™šæ‹Ÿçª—å£ä¸‹ï¼ŒäºŒç§æ˜¯ç›´æ¥æœ¬åœ°åå°è¿è¡Œï¼Œä¸‰ç§systemdè¿›è¡Œç®¡ç† ï¼ˆå»ºè®®ç¬¬ä¸‰ç§ï¼‰&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šè¦è¿è¡Œåœ¨è™šæ‹Ÿçª—å£ä¸‹ï¼Œå»ºè®®ä½¿ç”¨tmux&lt;/p&gt;
&lt;h4 id="1ä½¿ç”¨-tmux"&gt;1.ä½¿ç”¨ tmux&lt;/h4&gt;
&lt;p&gt;å®‰è£…ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt-get install tmux # Debian/Ubuntu 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;yum install tmux # CentOS/RHEL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;å¯åŠ¨ Tmux ä¼šè¯ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;tmux&lt;/strong&gt;
æŒ‰ Ctrl+Bï¼Œç„¶åæŒ‰ Dï¼Œä¼šè¿”å›ç»ˆç«¯ã€‚&lt;/p&gt;
&lt;p&gt;å…³é—­ SSHï¼Œç¨‹åºç»§ç»­è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;é‡æ–°è¿æ¥ï¼š&lt;/p&gt;
&lt;p&gt;åˆ—å‡ºä¼šè¯ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tmux ls
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;0: 1 windows (created ...)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¢å¤ä¼šè¯ï¼š&lt;/p&gt;</description></item><item><title>Vyosä¸Šç½‘ç³»ç»Ÿä¹‹-vyoså‘½ä»¤æŠ€å·§é›†(3)</title><link>https://hanigege.github.io/posts/routers/vyos-jiqiao-3/</link><pubDate>Sat, 10 May 2025 21:35:04 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/vyos-jiqiao-3/</guid><description>&lt;h2 id="ä½ å¯ä»¥ä½¿ç”¨-delete-å’Œ-set-å‘½ä»¤æ¥ä¿®æ”¹-network-group-çš„å­ç½‘"&gt;ä½ å¯ä»¥ä½¿ç”¨ delete å’Œ set å‘½ä»¤æ¥ä¿®æ”¹ network-group çš„å­ç½‘ã€‚&lt;/h2&gt;
&lt;p&gt;ä¿®æ”¹ LAN-v4 çš„ç½‘ç»œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ é™¤åŸæ¥çš„ 192.168.10.0/24&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;delete firewall group network-group LAN-v4 network 192.168.10.0/24
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="2"&gt;
&lt;li&gt;æ·»åŠ æ–°çš„ 192.168.100.0/24&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group LAN-v4 network 192.168.100.0/24
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;æäº¤å¹¶ä¿å­˜&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;commit
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;save
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éªŒè¯ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆ&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;show firewall group network-group LAN-v4
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœè¾“å‡ºå¦‚ä¸‹ï¼Œå°±è¯´æ˜ä¿®æ”¹æˆåŠŸï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; network-group LAN-v4 {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; network 192.168.100.0/24
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ VyOS ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ æ‰€æœ‰é…ç½®ï¼š
æ˜¾ç¤ºå®Œæ•´çš„å±‚çº§é…ç½®ï¼ˆæ¨èï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;show configuration
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªå‘½ä»¤ä¼šä»¥ å±‚çº§ç»“æ„ æ˜¾ç¤ºæ•´ä¸ªé…ç½®ï¼Œç±»ä¼¼äº show running-configã€‚&lt;/p&gt;
&lt;p&gt;æ˜¾ç¤ºæ‰€æœ‰é…ç½®å‘½ä»¤ï¼ˆé€‚åˆå¤åˆ¶ï¼‰($ æ¨¡å¼ä¸‹ï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;show configuration commands
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªå‘½ä»¤ä¼šä»¥ show å‘½ä»¤çš„æ ¼å¼ å±•ç¤ºæ‰€æœ‰é…ç½®ï¼Œé€‚ç”¨äºå¤‡ä»½æˆ–å¤åˆ¶é…ç½®ï¼š&lt;/p&gt;</description></item><item><title>Vyosä¸Šç½‘ç³»åˆ—ä¹‹-Fakeipé…ç½®(2)</title><link>https://hanigege.github.io/posts/routers/vyos-fakeip-2/</link><pubDate>Sat, 10 May 2025 21:25:08 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/vyos-fakeip-2/</guid><description>&lt;h2 id="å¯¹äºç»ˆç«¯ç½‘å…³æ˜¯vyosçš„é€šè¿‡mosdnsæ¥åˆ†æµrealipå’Œfakeipçš„æµé‡-å¯è¿™æ ·é…ç½®"&gt;å¯¹äºç»ˆç«¯ç½‘å…³æ˜¯vyosçš„ï¼Œé€šè¿‡mosdnsæ¥åˆ†æµrealipå’Œfakeipçš„æµé‡, å¯è¿™æ ·é…ç½®:&lt;/h2&gt;
&lt;p&gt;(vyosçš„groupåˆ†ä¸ºaddress-group,network-groupç­‰)&lt;/p&gt;
&lt;h4 id="å®šä¹‰ç»„-ipä¾‹"&gt;å®šä¹‰ç»„ IPä¾‹:&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group address-group Telegram-v4 address &amp;#39;157.148.47.204&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group address-group Telegram-v4 address &amp;#39;182.43.124.6&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="å®šä¹‰ç»„ç½‘æ®µv4ä¾‹"&gt;å®šä¹‰ç»„ç½‘æ®µV4ä¾‹ï¼š&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.56.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.4.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®šä¹‰ç»„telegram V4:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.56.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.4.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.8.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.16.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.12.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;149.154.160.0/20&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.105.192.0/23&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;91.108.20.0/22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group network-group Telegram-v4 network &amp;#39;185.76.151.0/24&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="å®šä¹‰ç»„ip-v6ä¾‹"&gt;å®šä¹‰ç»„ip-V6ä¾‹ï¼š&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group ipv6-address-group Telegram-v6 address &amp;#39;2a00:1098:80:2::1004&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set firewall group ipv6-address-group Telegram-v6 address &amp;#39;2a00:1098:80:2::1001&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®šä¹‰ç»„ç½‘æ®µV6ä¾‹ï¼š&lt;/p&gt;</description></item><item><title>Vyosä¸Šç½‘ç³»åˆ—ä¹‹-ä¸Šç½‘é…ç½®ï¼ˆ1ï¼‰</title><link>https://hanigege.github.io/posts/routers/vyos-jibenshangwang-1/</link><pubDate>Sat, 10 May 2025 21:04:17 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/vyos-jibenshangwang-1/</guid><description>&lt;h4 id="vyosçš„å‘½ä»¤è¡Œç•Œé¢æ˜¯åŸºäºshellçš„æ²¡æœ‰å›¾å½¢ç•Œé¢-ä½†æ˜¯å¯ä»¥ç”¨tabè‡ªåŠ¨è¡¥å…¨"&gt;vyosçš„å‘½ä»¤è¡Œç•Œé¢æ˜¯åŸºäºshellçš„ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢, ä½†æ˜¯å¯ä»¥ç”¨tabè‡ªåŠ¨è¡¥å…¨.&lt;/h4&gt;
&lt;p&gt;æœ¬æ–‡çš„vyoså‘½ä»¤æ˜¯åŸºäºvyosçš„vyos-rolling-nightly-buildsçš„1.5.xç‰ˆæœ¬.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;**ç‰¹åˆ«æ„Ÿè°¢å¤§å«ä½¬ç»™äºˆçš„æŒ‡å¯¼ä¸å¸®åŠ©**&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="pveå®‰è£…vyos"&gt;pveå®‰è£…vyos:&lt;/h2&gt;
&lt;p&gt;ä¸‹è½½nightly-build: &lt;a href="https://github.com/vyos/vyos-nightly-build/releases"&gt;https://github.com/vyos/vyos-nightly-build/releases&lt;/a&gt;
pveçš„è™šæ‹Ÿæœºè®¾ç½®å’Œå®‰è£…(ç•¥), å»ºè®®å†…å­˜2G, ç£ç›˜10Gæˆ–æ›´å¤§, å› ä¸ºvyoså¯ä»¥è¿è¡Œå®¹å™¨, vyosç”¨podmanç®¡ç†å®¹å™¨.&lt;/p&gt;
&lt;p&gt;vmè¿è¡Œå, ç”¨vyos:vyosç™»å½•. ç”¨å‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;install image
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®‰è£…vyos.&lt;/p&gt;
&lt;p&gt;è¿›å…¥é…ç½®æ¨¡å¼ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;configure
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”Ÿæ•ˆï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;commit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¿å­˜é…ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;save
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–æ¶ˆç”Ÿæ•ˆçš„,æœªä¿å­˜çš„é…ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;discard
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä¸‹é¢å¼€å§‹é…ç½®éšæ—¶éƒ½å¯ä»¥è¾“å…¥ç”Ÿæ•ˆå‘½ä»¤å¦‚æœä¸ä¿å­˜é‡å¯åé…ç½®ä¼šå¤±æ•ˆ"&gt;ä¸‹é¢å¼€å§‹é…ç½®ï¼Œéšæ—¶éƒ½å¯ä»¥è¾“å…¥ç”Ÿæ•ˆå‘½ä»¤ï¼Œå¦‚æœä¸ä¿å­˜ï¼Œé‡å¯åé…ç½®ä¼šå¤±æ•ˆ&lt;/h2&gt;
&lt;p&gt;è®¾ç½®sshç™»å½•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set service ssh port &amp;#39;22&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»ºç”¨æˆ·gary:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set system login user gary full-name gary
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set system login user gary authentication plaintext-password &amp;#39;å¯†ç &amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å»ºè®®sshå¯†é’¥ç™»å½•:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set system login user gary authentication public-keys gary@laptop key &amp;#39;your-public-key&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set system login user gary authentication public-keys gary@laptop type &amp;#39;ssh-rsa&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¦ç”¨é»˜è®¤çš„vyosç”¨æˆ·:&lt;/p&gt;</description></item><item><title>About</title><link>https://hanigege.github.io/about/</link><pubDate>Sat, 10 May 2025 16:14:10 +0800</pubDate><guid>https://hanigege.github.io/about/</guid><description>&lt;div align="center"&gt;
 &lt;img src="https://hanigege.github.io/images/mood.svg" alt="Garyçš„å¿ƒæƒ…ç»ˆç«¯" style="width: 90%; max-width: 600px; margin: 2rem 0; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);"&gt;
&lt;/div&gt;</description></item><item><title>vyoså¤šç½‘å£å°ä¸»æœºæ¡¥æ¥é…ç½®(å®Œæ•´)</title><link>https://hanigege.github.io/posts/routers/vyos-qiaojie-4kou/</link><pubDate>Wed, 07 May 2025 23:30:18 +0800</pubDate><guid>https://hanigege.github.io/posts/routers/vyos-qiaojie-4kou/</guid><description>&lt;h3 id="ä¸€åŸºæœ¬ä¸Šç½‘é…ç½®"&gt;ä¸€.åŸºæœ¬ä¸Šç½‘é…ç½®&lt;/h3&gt;
&lt;h3 id="vyosçš„å‘½ä»¤è¡Œç•Œé¢æ˜¯åŸºäºshellçš„æ²¡æœ‰å›¾å½¢ç•Œé¢-ä½†æ˜¯å¯ä»¥ç”¨tabè‡ªåŠ¨è¡¥å…¨"&gt;vyosçš„å‘½ä»¤è¡Œç•Œé¢æ˜¯åŸºäºshellçš„ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢, ä½†æ˜¯å¯ä»¥ç”¨tabè‡ªåŠ¨è¡¥å…¨&lt;/h3&gt;
&lt;p&gt;æœ¬æ–‡çš„vyoså‘½ä»¤æ˜¯åŸºäºvyosçš„vyos-rolling-nightly-buildsçš„1.5.xç‰ˆæœ¬.&lt;/p&gt;</description></item><item><title>æœç´¢</title><link>https://hanigege.github.io/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://hanigege.github.io/search/</guid><description/></item></channel></rss>